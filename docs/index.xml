<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>OpenRun - App Deployment Simplified – Docs</title><link>https://openrun.dev/docs/</link><description>Recent content in Docs on OpenRun - App Deployment Simplified</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><atom:link href="https://openrun.dev/docs/index.xml" rel="self" type="application/rss+xml"/><item><title>App Management Overview</title><link>https://openrun.dev/docs/applications/overview/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/applications/overview/</guid><description>
&lt;p>The various commands for managing OpenRun apps are&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ openrun
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> openrun - OpenRun client and server https://openrun.dev/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">USAGE:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> openrun &lt;span class="o">[&lt;/span>global options&lt;span class="o">]&lt;/span> &lt;span class="nb">command&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="nb">command&lt;/span> options&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>arguments...&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">COMMANDS:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server Manage the OpenRun server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app Manage OpenRun apps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> preview Manage OpenRun preview apps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> account Manage OpenRun accounts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> param Manage app parameter values
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> version Manage app versions
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app-webhook Manage app level webhooks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password Generate a password bcrypt config entry
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> help, h Shows a list of commands or &lt;span class="nb">help&lt;/span> &lt;span class="k">for&lt;/span> one &lt;span class="nb">command&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ openrun app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> openrun app - Manage OpenRun apps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">USAGE:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> openrun app &lt;span class="nb">command&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="nb">command&lt;/span> options&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>arguments...&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">COMMANDS:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> create Create a new app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> list List apps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> delete Delete an app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> approve Approve app permissions
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> reload Reload the app &lt;span class="nb">source&lt;/span> code
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> promote Promote the app from staging to production
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> update-settings Update OpenRun apps settings. Settings changes are NOT staged, they apply immediately to matched stage, prod and preview apps.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> update-metadata Update OpenRun app metadata. Metadata updates are staged and have to be promoted to prod. Use &lt;span class="s2">&amp;#34;openrun param&amp;#34;&lt;/span> to update app parameter metadata.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> help, h Shows a list of commands or &lt;span class="nb">help&lt;/span> &lt;span class="k">for&lt;/span> one command&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The app management subcommands are under the &lt;code>app&lt;/code> command. The &lt;code>preview&lt;/code> command manages preview app for an app and &lt;code>version&lt;/code> command manages versions for an app. The &lt;code>account&lt;/code> command is for managing accounts for an app.&lt;/p>
&lt;h2>App Management&lt;span class="hx:absolute hx:-mt-20" id="app-management">&lt;/span>
&lt;a href="#app-management" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>All the app management subcommands except &lt;code>create&lt;/code> take a glob pattern, so multiple apps can be updated using one command. Use the &lt;code>--dry-run&lt;/code> option with any update CLI call to verify if the options specified are correct before the actual run. No database changes are committed during dry-run and no changes are done in memory.&lt;/p>
&lt;h2>Glob Pattern&lt;span class="hx:absolute hx:-mt-20" id="glob-pattern">&lt;/span>
&lt;a href="#glob-pattern" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The &lt;code>reload/delete/promote/approve/list/update&lt;/code> commands accept a glob pattern. &lt;code>example.com:**&lt;/code> will match apps under the example.com domain. &lt;code>*:**&lt;/code> will match all apps in all domains, &lt;code>all&lt;/code> is a shortcut for this. When using glob patterns, place the pattern inside double-quotes to avoid issues with shell star expansion. For example, &lt;code>&amp;quot;example.com:**&amp;quot;&lt;/code>&lt;/p>
&lt;p>The default for &lt;code>app list&lt;/code> command is to list all apps. All other commands require an glob pattern to be specified explicitly.&lt;/p>
&lt;p>When multiple apps are being updated, if any one app fails, the whole operation is rolled back. This allows for atomic updates across multiple applications.&lt;/p>
&lt;h2>App Listing&lt;span class="hx:absolute hx:-mt-20" id="app-listing">&lt;/span>
&lt;a href="#app-listing" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Use the &lt;code>app list&lt;/code> command to list apps. If the &lt;code>--internal&lt;/code> option is used, then the internal staging and preview apps for each matched prod app are also listed.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ openrun app list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Id Type Version Auth GitInfo Domain:Path SourceUrl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d3kCRk43FOuIGy979NbBWakRMm PROD &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 memory.demo.clace.io:/ github.com/openrundev/openrun/examples/memory_usage/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d3kCZ28w6VIzoXMsT9yldwijxL PROD &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 cowbull.co:/ github.com/openrundev/openrun/examples/cowbull
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d3kCjmw8ldQ2LaOd0CLmWXDApq PROD &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 / github.com/openrundev/openrun/examples/demo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d3kKVvSsSgUHqtNGZaD95NuLK3 PROD &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 du.demo.clace.io:/ github.com/openrundev/openrun/examples/disk_usage/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d6KcZmNwHIB8cSzNCotqBHpeje PROD &lt;span class="m">5&lt;/span> NONE main:ed7545ae739dfe85140a utils.demo.clace.io:/bookmarks github.com/openrundev/apps/utils/bookmarks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ openrun app list -i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Id Type Version Auth GitInfo Domain:Path SourceUrl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d3kCRk43FOuIGy979NbBWakRMm PROD &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 memory.demo.clace.io:/ github.com/openrundev/openrun/examples/memory_usage/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_stg_2d3kCRk43FOuIGy979NbBWakRMm STG &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 memory.demo.clace.io:/_cl_stage github.com/openrundev/openrun/examples/memory_usage/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d3kCZ28w6VIzoXMsT9yldwijxL PROD &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 cowbull.co:/ github.com/openrundev/openrun/examples/cowbull
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_stg_2d3kCZ28w6VIzoXMsT9yldwijxL STG &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 cowbull.co:/_cl_stage github.com/openrundev/openrun/examples/cowbull
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d3kCjmw8ldQ2LaOd0CLmWXDApq PROD &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 / github.com/openrundev/openrun/examples/demo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_stg_2d3kCjmw8ldQ2LaOd0CLmWXDApq STG &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 /_cl_stage github.com/openrundev/openrun/examples/demo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d3kKVvSsSgUHqtNGZaD95NuLK3 PROD &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 du.demo.clace.io:/ github.com/openrundev/openrun/examples/disk_usage/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_stg_2d3kKVvSsSgUHqtNGZaD95NuLK3 STG &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 du.demo.clace.io:/_cl_stage github.com/openrundev/openrun/examples/disk_usage/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d6KcZmNwHIB8cSzNCotqBHpeje PROD &lt;span class="m">5&lt;/span> NONE main:ed7545ae739dfe85140a utils.demo.clace.io:/bookmarks github.com/openrundev/apps/utils/bookmarks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_stg_2d6KcZmNwHIB8cSzNCotqBHpeje STG &lt;span class="m">5&lt;/span> NONE main:ed7545ae739dfe85140a utils.demo.clace.io:/bookmarks_cl_stage github.com/openrundev/apps/utils/bookmarks&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Use the &lt;code>version list&lt;/code> command to list versions for particular apps. This command works on prod app or staging app specifically.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ openrun version list utils.demo.clace.io:/bookmarks_cl_stage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Active Version Previous CreateTime GitCommit GitMessage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> &lt;span class="m">0&lt;/span> 2024-03-01 19:59:27 +0000 UTC 86385ff67deab288c362 Updated bookmarks app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">2&lt;/span> &lt;span class="m">1&lt;/span> 2024-03-01 20:00:20 +0000 UTC 86385ff67deab288c362 Updated bookmarks app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">3&lt;/span> &lt;span class="m">2&lt;/span> 2024-03-01 20:16:08 +0000 UTC 86385ff67deab288c362 Updated bookmarks app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">4&lt;/span> &lt;span class="m">3&lt;/span> 2024-03-02 00:12:28 +0000 UTC 8080fcfe6be832a1f6f5 Update styling &lt;span class="k">for&lt;/span> bookmarks &lt;span class="nv">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span>&amp;gt; &lt;span class="m">5&lt;/span> &lt;span class="m">4&lt;/span> 2024-03-02 00:23:35 +0000 UTC ed7545ae739dfe85140a Update styling &lt;span class="k">for&lt;/span> bookmarks app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ openrun version list utils.demo.clace.io:/bookmarks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Active Version Previous CreateTime GitCommit GitMessage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> &lt;span class="m">0&lt;/span> 2024-03-01 19:59:27 +0000 UTC 86385ff67deab288c362 Updated bookmarks app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">2&lt;/span> &lt;span class="m">1&lt;/span> 2024-03-01 20:00:20 +0000 UTC 86385ff67deab288c362 Updated bookmarks &lt;span class="nv">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span>&amp;gt; &lt;span class="m">5&lt;/span> &lt;span class="m">2&lt;/span> 2024-03-02 00:23:35 +0000 UTC ed7545ae739dfe85140a Update styling &lt;span class="k">for&lt;/span> bookmarks app&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The &lt;code>version switch&lt;/code> command can be used to switch versions, up or down or to particular version. The &lt;code>version revert&lt;/code> command can be used to revert the last change. &lt;code>app promote&lt;/code> makes the prod app run the same version as the current staging app.&lt;/p>
&lt;p>In the above listing, the staging app has five versions. Three of those (1,2 and 5) were promoted to prod. &lt;code>version switch previous utils.demo.clace.io:/bookmarks_cl_stage&lt;/code> will change the stage app to version 4. &lt;code>version switch previous utils.demo.clace.io:/bookmarks&lt;/code> will change the prod app to version 2. After that, &lt;code>app promote utils.demo.clace.io:/bookmarks&lt;/code> will change prod to also be at version 4, same as stage. The &lt;code>version switch&lt;/code> command accepts &lt;code>previous&lt;/code>, &lt;code>next&lt;/code> and actual version number as version to switch to.&lt;/p>
&lt;p>A star, like &lt;code>PROD*&lt;/code> in the &lt;code>app list&lt;/code> output indicates that there are staged changes waiting to be promoted. That will show up any time the prod app is at a different version than the stage app.&lt;/p>
&lt;h2>App Authentication&lt;span class="hx:absolute hx:-mt-20" id="app-authentication">&lt;/span>
&lt;a href="#app-authentication" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>By default, apps are created with the no authentication type. &lt;code>system&lt;/code> auth uses &lt;code>admin&lt;/code> as the username. The password is displayed on the screen during the initial setup of the OpenRun server config.&lt;/p>
&lt;p>To change app auth type, add &lt;code>--auth system&lt;/code> to the &lt;code>app create&lt;/code> command. After an app is created, the auth type can be changed by running &lt;code>app update-settings auth system /myapp&lt;/code>. OAuth based authentication is also supported, see &lt;a href="https://openrun.dev/docs/configuration/authentication/" >authentication&lt;/a> for details.&lt;/p>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-yellow-100 hx:bg-yellow-50 hx:text-yellow-900 hx:dark:border-yellow-200/30 hx:dark:bg-yellow-700/30 hx:dark:text-yellow-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">⚠️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">&lt;p>Changes done to the app settings using the &lt;code>app update-settings&lt;/code> command are not staged or versioned, they apply immediately to the stage/prod/preview apps. App settings are fundamental properties of the app, like what authentication type to use, what git auth key to use etc.&lt;/p>
&lt;p>All other changes done to app metadata using &lt;code>app update-metadata&lt;/code>, &lt;code>app reload&lt;/code>, &lt;code>param update&lt;/code> etc are staged before deployment. Use the &lt;code>--promote&lt;/code> option on the change to promote the change immediately when applying it on the staging app. Use &lt;code>app promote&lt;/code> command to promote later. When a promotion is done, &lt;strong>all&lt;/strong> currently staged changes for that app are promoted, not just the most recent change. After promote, the prod app is exactly same as staging app.&lt;/p>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2>Declarative App Management&lt;span class="hx:absolute hx:-mt-20" id="declarative-app-management">&lt;/span>
&lt;a href="#declarative-app-management" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The CLI and management apps allow imperative management of OpenRun apps. OpenRun apps can also be managed declaratively. The app definition has to be defined in a file and OpenRun can apply the configuration. This works similar to the Kubernetes &lt;code>apply&lt;/code> functionality.&lt;/p>
&lt;p>To use this feature, create an app config file, with &lt;code>.ace&lt;/code> extension. The config file should contain one or more &lt;code>app&lt;/code> definitions. For example, in a file called &lt;code>apps.ace&lt;/code>&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">apps.ace&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/myapps/disk_usage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;github.com/openrundev/apps/system/disk_usage&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/myapps/memory_usage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;github.com/openrundev/apps/system/memory_usage&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/myapps/list_files&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;github.com/openrundev/apps/system/list_files&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>defines three apps. Running&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun apply --approve apps.ace&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>will create the apps if not already present. If present, the app configuration is updated to match the new configuration.&lt;/p>
&lt;h3>Apply Command&lt;span class="hx:absolute hx:-mt-20" id="apply-command">&lt;/span>
&lt;a href="#apply-command" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>The &lt;code>apply&lt;/code> command takes one or two arguments: &lt;code>&amp;lt;filePath&amp;gt; [&amp;lt;appPathGlob&amp;gt;]&lt;/code>. The first is a file path, which can be a glob pointing to multiple files. The files can be from local disk or from a git url. The second optional argument is an app path glob which specifies which apps to apply from the loaded files. By default, all apps is the file(s) are applied.&lt;/p>
&lt;p>The options the &lt;code>apply&lt;/code> command takes are:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>OPTIONS:
--branch value, -b value The branch to checkout if using git source (default: &amp;#34;main&amp;#34;)
--commit value, -c value The commit SHA to checkout if using git source. This takes precedence over branch
--git-auth value, -g value The name of the git_auth entry in server config to use
--approve, -a Approve the app permissions (default: false)
--reload value, -r value Which apps to reload: none, updated, matched
--promote, -p Promote changes from stage to prod (default: false)
--clobber Force update app config, overwriting non-declarative changes (default: false)
--force-reload, -f Force reload even if there is no new commit (default: false)
--dry-run Verify command but don&amp;#39;t commit any changes (default: false)
--help, -h show help&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The branch/commit/git-auth arguments are for the apply file itself (if the file path is a git url). For the app source code, the git config has to be specified in the config file.&lt;/p>
&lt;p>By default, changes are applied to the stage app. Add the &lt;code>--promote&lt;/code> option to promote the changes. Use the &lt;code>--approve&lt;/code> option to approve any permission changes required by apps.&lt;/p>
&lt;p>The &lt;code>--reload&lt;/code> option controls whether new source code is loaded for apps during the apply operation. Setting it to &lt;code>none&lt;/code> means no apps are reloaded, &lt;code>updated&lt;/code> means apps which have a config update are reloaded. &lt;code>matched&lt;/code> (the default) means all apps matched by the app glob are reloaded, even if there is no config update.&lt;/p>
&lt;p>By default, changes are applied as a three way merge. The old config and new config are compared against the live config. If there are changes between old and new declarative config, those changes are applied. Changes done imperatively are not overwritten. Using the &lt;code>--force&lt;/code> option will overwrite any changes applied imperatively through the CLI or UI. The new declarative config overwrites any existing state when &lt;code>--force&lt;/code> is used.&lt;/p>
&lt;h3>App Configuration&lt;span class="hx:absolute hx:-mt-20" id="app-configuration">&lt;/span>
&lt;a href="#app-configuration" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>The declarative app configuration uses Starlark syntax. An app is defined using the &lt;code>app&lt;/code> struct which has these properties:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">Property&lt;/th>
&lt;th style="text-align: center">Optional&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Default&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">path&lt;/td>
&lt;td style="text-align: center">false&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The app installation domain:path&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">source&lt;/td>
&lt;td style="text-align: center">false&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The app source code url&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">dev&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">bool&lt;/td>
&lt;td style="text-align: center">false&lt;/td>
&lt;td style="text-align: center">Whether app is in dev mode&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">auth&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">default&lt;/td>
&lt;td style="text-align: center">The app authentication type (none or system or default or &lt;custom>)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">git_auth&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">default&lt;/td>
&lt;td style="text-align: center">The git auth entry to use&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">git_branch&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">main&lt;/td>
&lt;td style="text-align: center">The git branch to use&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">git_commit&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The git commit to use&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">params&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">dict&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The params for the app&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">spec&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The app spec to use for the app&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">app_config&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">dict&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The config settings for the app&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">container_opts&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">dict&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The container options for the app&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">container_args&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">dict&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The container build args options for the app&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">container_vols&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">list string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The container volumes for the app&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>For example, a definition like&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/streamlit&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;github.com/streamlit/streamlit-example&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">git_branch&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;master&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">spec&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;python-streamlit&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">params&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;p1&amp;#34;&lt;/span>&lt;span class="p">:[&lt;/span>&lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;2&amp;#34;&lt;/span>&lt;span class="p">]},&lt;/span> &lt;span class="n">container_opts&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;cpus&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">container_vols&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;/v1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;/v2&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">app_config&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;ac1&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>defines a Streamlit based app. Applying this file will create the app. Config can be updated through the CLI or UI. Subsequent runs of apply will not overwrite the imperative changes. For example, if a new param &amp;ldquo;p2&amp;rdquo; is defined using the CLI, that will be retained during subsequent runs. If the value of &amp;ldquo;p1&amp;rdquo; is updated in the config file, the next apply run will modify the value.&lt;/p>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-yellow-100 hx:bg-yellow-50 hx:text-yellow-900 hx:dark:border-yellow-200/30 hx:dark:bg-yellow-700/30 hx:dark:text-yellow-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">⚠️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">Apps are identified by their path and source url, so those cannot be changed. Dev mode is set during app creation and cannot be updated. App auth and git_auth are settings which are directly applied without being staged. They can be updated through the CLI but not through the config file. All other properties are metadata changes which are staged. They can be updated through the app config. New app versions are created during apply and versions can be reverted at the app level.&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2>Automated Sync&lt;span class="hx:absolute hx:-mt-20" id="automated-sync">&lt;/span>
&lt;a href="#automated-sync" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>OpenRun supports automatically syncing the app definition from Git. The commands to manage sync are:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>openrun sync
NAME:
openrun sync - Manage sync operations, scheduled and webhook
USAGE:
openrun sync command [command options]
COMMANDS:
schedule Create scheduled sync job for updating app config
list List the sync jobs
delete Delete specified sync job
help, h Shows a list of commands or help for one command&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>&lt;code>openrun sync schedule --approve --promote github.com/openrundev/openrun/examples/utils.star&lt;/code> will create a scheduled sync which will run every 15 minutes and check for app config updates to apply. Use &lt;code>--minutes&lt;/code> option to change the frequency.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>openrun sync schedule --help
NAME:
openrun sync schedule - Create scheduled sync job for updating app config
USAGE:
args: &amp;lt;filePath&amp;gt;
&amp;lt;filePath&amp;gt; is the path to the apply file containing the app configuration.
Examples:
Create scheduled sync, reloading apps with code changes: openrun sync schedule ./app.ace
Create scheduled sync, reloading only apps with a config change: openrun sync schedule --reload=updated github.com/openrundev/apps/apps.ace
Create scheduled sync, promoting changes: openrun sync schedule --promote --approve github.com/openrundev/apps/apps.ace
Create scheduled sync, overwriting changes: openrun sync schedule --promote --clobber github.com/openrundev/apps/apps.ace
OPTIONS:
--branch value, -b value The branch to checkout if using git source (default: &amp;#34;main&amp;#34;)
--git-auth value, -g value The name of the git_auth entry in server config to use
--approve, -a Approve the app permissions (default: false)
--reload value, -r value Which apps to reload: none, updated, matched
--promote, -p Promote changes from stage to prod (default: false)
--minutes value, -s value Schedule sync for every N minutes (default: 0)
--clobber Force update app config, overwriting non-declarative changes (default: false)
--force-reload, -f Force reload even if there are no new commits (default: false)
--dry-run Verify command but don&amp;#39;t commit any changes (default: false)
--help, -h show help&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Scheduled sync takes all the same options as the &lt;code>apply&lt;/code> command. The apply is done automatically by OpenRun on schedule.&lt;/p>
&lt;p>Use &lt;code>openrun sync list&lt;/code> to list all jobs and &lt;code>openrun sync delete &amp;lt;sync_id&amp;gt;&lt;/code> to delete a sync job.&lt;/p>
&lt;h2>Sync Frequency&lt;span class="hx:absolute hx:-mt-20" id="sync-frequency">&lt;/span>
&lt;a href="#sync-frequency" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The default sync frequency is every 15 minutes. This can be changed for each sync by passing &lt;code>--minutes 10&lt;/code> during sync creation. To change the default globally, for any new sync being created, set&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">default_schedule_mins&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>GitHub imposes a &lt;a href="https://docs.github.com/en/rest/using-the-rest-api/rate-limits-for-the-rest-api" target="_blank" rel="noopener">rate limit&lt;/a> for API calls. Every sync run make one list API call to the apply file repo and one API call to each source file repo. So if apply files and source files are in the same repo, there is just one API call in total. If there are multiple sync operation, each runs independently. If there a new commit found, then a clone is done on the repo.&lt;/p>
&lt;p>Sync can be run more frequently, making sure rate limits are respected. If a &lt;a href="https://openrun.dev/docs/configuration/security/#private-repository-access" >default git auth&lt;/a> entry is added, that will be used for all list API calls. The rate limits are higher for authenticated requests.&lt;/p></description></item><item><title>Quick Start</title><link>https://openrun.dev/docs/quickstart/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/quickstart/</guid><description>
&lt;p>OpenRun is an Apache-2.0 licensed project building a web app development and deployment platform for internal tools. OpenRun is built in Go and runs on Linux, macOS and Windows.&lt;/p>
&lt;h2>Installation&lt;span class="hx:absolute hx:-mt-20" id="installation">&lt;/span>
&lt;a href="#installation" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;h3>Certs and Default password&lt;span class="hx:absolute hx:-mt-20" id="certs-and-default-password">&lt;/span>
&lt;a href="#certs-and-default-password" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>OpenRun manages TLS cert using LetsEncrypt for prod environments. For dev environment, it is recommended to install &lt;a href="https://github.com/FiloSottile/mkcert" target="_blank" rel="noopener">mkcert&lt;/a>. OpenRun will automatically create local certs using mkcert if it is present. Install mkcert and run &lt;code>mkcert -install&lt;/code> before starting OpenRun server. Installing OpenRun using brew will automatically install mkcert.&lt;/p>
&lt;p>For container based apps, Docker or Podman or Orbstack should be installed and running on the machine. OpenRun automatically detects the container manager to use.&lt;/p>
&lt;p>OpenRun uses an &lt;code>admin&lt;/code> user account as the default authentication for accessing apps. A random password is generated for this account during initial OpenRun server installation. Note down this password for accessing apps.&lt;/p>
&lt;h3>Install OpenRun On OSX/Linux&lt;span class="hx:absolute hx:-mt-20" id="install-openrun-on-osxlinux">&lt;/span>
&lt;a href="#install-openrun-on-osxlinux" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>To install on OSX/Linux, run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -sSL https://openrun.dev/install.sh &lt;span class="p">|&lt;/span> sh&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Start a new terminal (to get the updated env) and run &lt;code>openrun server start&lt;/code> to start the OpenRun service.&lt;/p>
&lt;h3>Brew Install&lt;span class="hx:absolute hx:-mt-20" id="brew-install">&lt;/span>
&lt;a href="#brew-install" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>To install using brew, run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>brew tap openrundev/homebrew-openrun
brew install openrun
brew services start openrun&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h3>Install On Windows&lt;span class="hx:absolute hx:-mt-20" id="install-on-windows">&lt;/span>
&lt;a href="#install-on-windows" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>To install on Windows, run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>powershell -Command &amp;#34;iwr https://openrun.dev/install.ps1 -useb | iex&amp;#34;&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Start a new command window (to get the updated env) and run &lt;code>openrun server start&lt;/code> to start the OpenRun service.&lt;/p>
&lt;h3>Install Apps&lt;span class="hx:absolute hx:-mt-20" id="install-apps">&lt;/span>
&lt;a href="#install-apps" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>Once OpenRun server is running, to install apps declaratively, open a new window and run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>openrun apply --approve github.com/openrundev/openrun/examples/utils.star&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>To install apps using the CLI, run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>openrun app create --approve github.com/openrundev/apps/system/list_files /files
openrun app create --approve github.com/openrundev/apps/system/disk_usage /disk_usage
openrun app create --approve github.com/openrundev/apps/utils/bookmarks /book&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Open https://localhost:25223 to see the app listing. The disk usage app is available at https://localhost:25223/disk_usage (port 25222 for HTTP). The bookmark manager is available at https://localhost:25223/book, the list files app is available at https://localhost:25223/files.&lt;/p>
&lt;p>The release binaries are also available at &lt;a href="https://github.com/openrundev/openrun/releases" target="_blank" rel="noopener">releases&lt;/a>.&lt;/p>
&lt;h2>Application Types&lt;span class="hx:absolute hx:-mt-20" id="application-types">&lt;/span>
&lt;a href="#application-types" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>OpenRun allows easy management of multiple apps on one OpenRun server installation. There are three main types of OpenRun apps:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Action apps&lt;/strong> - App backend is defined in Starlark and an auto generated form UI and report is created by OpenRun. These are the simplest apps.&lt;/li>
&lt;li>&lt;strong>Containerized Apps&lt;/strong> - App backend (in any language/framework) runs in a container. OpenRun acts as an application server doing reverse proxying for the app APIs. This allows OpenRun to install and manage apps built in frameworks like Streamlit/Gradio/FastHTML/FastAPI/Flask etc.&lt;/li>
&lt;li>&lt;strong>Hypermedia apps&lt;/strong> - The app is completely customizable, allowing combining containerized apps with actions and custom API handlers, building Hypermedia driven UIs.&lt;/li>
&lt;/ul>
&lt;p>For all apps, OpenRun provides blue-green staged deployment, OAuth access controls, secrets management, TLS cert management etc.&lt;/p>
&lt;h2>Action Apps&lt;span class="hx:absolute hx:-mt-20" id="action-apps">&lt;/span>
&lt;a href="#action-apps" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>For use cases where an existing CLI application or API needs to be exposed as a web app, actions provide an easy solution. First, define the parameters to be exposed in the form UI. Create a &lt;code>params.star&lt;/code> file with the params. For example,&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">params.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">param&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;dir&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;The directory to list files from&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">default&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/tmp&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The app defines a run handler which runs &lt;code>ls&lt;/code> on the specified directory. The output text is returned.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">load&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;exec.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;exec&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dry_run&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">out&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">exec&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ls&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;-Lla&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">value&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;File listing for &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">out&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;List Files&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">actions&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">action&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;List Files&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">run&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Show the ls -a output for specified directory&amp;#34;&lt;/span>&lt;span class="p">)],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">permissions&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">permission&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;exec.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;run&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;ls&amp;#34;&lt;/span>&lt;span class="p">]),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The app, when accessed will look as shown below, with the &lt;code>ls&lt;/code> command output displayed:&lt;/p>
&lt;picture class="responsive-picture" style="display: block; margin-left: auto; margin-right: auto;">
&lt;source media="(prefers-color-scheme: dark)" srcset="https://openrun.dev/images/list_files_dark.png">
&lt;source media="(prefers-color-scheme: light)" srcset="https://openrun.dev/images/list_files_light.png">
&lt;img alt="List files app" src="https://openrun.dev/images/list_files_light.png">
&lt;/picture>
&lt;p>See list files &lt;a href="https://github.com/openrundev/apps/tree/main/system/list_files" target="_blank" rel="noopener">code&lt;/a>:&lt;a href="https://utils.demo.clace.io/list_files" target="_blank" rel="noopener">demo&lt;/a> for the above app. See dictionary &lt;a href="https://github.com/openrundev/apps/tree/main/misc/dictionary" target="_blank" rel="noopener">code&lt;/a>:&lt;a href="https://utils.demo.clace.io/dict" target="_blank" rel="noopener">demo&lt;/a> for another actions example app which shows different type of reports. &lt;a href="https://openrun.dev/docs/actions/" >Actions&lt;/a> has more details on building app actions.&lt;/p>
&lt;h2>Containerized Applications&lt;span class="hx:absolute hx:-mt-20" id="containerized-applications">&lt;/span>
&lt;a href="#containerized-applications" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>OpenRun apps which are implemented in &lt;a href="https://github.com/google/starlark-go" target="_blank" rel="noopener">Starlark&lt;/a> run within the OpenRun server. No containers are required for running those apps. For apps where the backend is implemented in any other language, containers are used to run the app. OpenRun works with Docker and Podman. By default, the server looks for the &lt;code>podman&lt;/code> client CLI. If not found, it looks for the &lt;code>docker&lt;/code> client CLI. To customize this, add in server config&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">system&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">container_command&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;/path/to/container_manager_cli&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>There are two options for using containerized apps. One is to include the required files in the app repo. This will mean there should be &lt;code>app.star&lt;/code> with the app config, a &lt;code>Containerfile&lt;/code> or &lt;code>Dockerfile&lt;/code> with the container config. The other option is to use an &lt;a href="https://openrun.dev/docs/app/overview/#building-apps-from-spec" >app spec&lt;/a>. This allows you to use OpenRun without requiring any changes to your app. No container file is even required. For example, the command&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>openrun app create --spec python-streamlit --branch master --approve \
github.com/streamlit/streamlit-example /streamlit&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>does the following:&lt;/p>
&lt;ul>
&lt;li>Checks out the &lt;code>github.com/streamlit/streamlit-example&lt;/code>&lt;/li>
&lt;li>Copy any missing files from the app specification &lt;code>python-streamlit&lt;/code> into the repo&lt;/li>
&lt;li>Load the app source and metadata into the OpenRun server metadata database (SQLite)&lt;/li>
&lt;/ul>
&lt;p>When the first API call is done to the app (lazy-loading), the OpenRun server will build the container image from the &lt;code>Containerfile&lt;/code> defined in the spec, start the container and setup the proxy for the app APIs.&lt;/p>
&lt;p>Any env params which need to be passed to the app can be configured as &lt;a href="https://openrun.dev/docs/app/overview/#app-parameters" >app params&lt;/a>. Params are set, during app creation using &lt;code>app create --param port=9000&lt;/code> or after creation using &lt;code>param update port 9000 /myapp&lt;/code>.&lt;/p>
&lt;p>If the source repo has a &lt;code>Containerfile&lt;/code> or &lt;code>Dockerfile&lt;/code>, the &lt;code>container&lt;/code> spec is a generic spec which works with any language or framework. If the container file defined a port using &lt;code>EXPOSE&lt;/code> directive, then port is not required. Otherwise, specify a port, for example&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>openrun app create --spec container --approve --param port=8000 \
github.com/myorg/myrepo /myapp&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>See &lt;a href="https://openrun.dev/docs/container/overview/" >containerized apps&lt;/a> for details.&lt;/p>
&lt;h2>Managing Applications&lt;span class="hx:absolute hx:-mt-20" id="managing-applications">&lt;/span>
&lt;a href="#managing-applications" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Multiple applications can be installed on a OpenRun server. Each app has a unique path and can be managed separately. The app path is made up of domain_name:url_path. If no domain_name is specified during app creation, the app is created in the default domain. The default domain is looked up when no specific domain match is found. See &lt;a href="https://openrun.dev/docs/applications/routing/" >app routing&lt;/a> for details about routing.&lt;/p>
&lt;p>For local env, url based routing can be used or &lt;code>*.localhost&lt;/code> domain can be used for domain based paths. For production deployment, if wildcard DNS is setup, domain based routing can be used without new DNS entries being required per app. Apps can be hosted on multiple unrelated domains on one OpenRun server.&lt;/p>
&lt;h2>App Installation&lt;span class="hx:absolute hx:-mt-20" id="app-installation">&lt;/span>
&lt;a href="#app-installation" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>To install apps, run &lt;code>openrun app create --approve &amp;lt;source_url&amp;gt; &amp;lt;[domain:]app_path&amp;gt;&lt;/code>. For example,&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openrun app create --approve github.com/openrundev/apps/system/disk_usage /disk_usage&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>This is installing the &lt;code>system/disk_usage&lt;/code> app from the main branch of the &lt;code>openrundev/apps&lt;/code> repo on GitHub. The app is installed for the default domain, to the &lt;code>/disk_usage&lt;/code> path. Opening &lt;a href="https://127.0.0.1:25223/disk_usage" target="_blank" rel="noopener">https://127.0.0.1:25223/disk_usage&lt;/a> will initialize the app and show the app home page.&lt;/p>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-yellow-100 hx:bg-yellow-50 hx:text-yellow-900 hx:dark:border-yellow-200/30 hx:dark:bg-yellow-700/30 hx:dark:text-yellow-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">⚠️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">The &lt;code>/disk_usage/*&lt;/code> path is now reserved for API&amp;rsquo;s under this app. No new apps can be installed under the &lt;code>/disk_usage/&lt;/code> path, but &lt;code>/disk_usage2&lt;/code> is available. Similarly, installing an app under &lt;code>/&lt;/code> path means no new apps can be installed for the default domain.&lt;/div>
&lt;/div>
&lt;/div>
&lt;p>If the app code is available on the OpenRun server node, the &lt;code>app create&lt;/code> can be done directly with the local disk path:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openrun app create --approve ./diskapp /disk_usage_local&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>When developing an app, the source code for the app has to be present locally. To install an app in dev mode, add the &lt;code>--dev&lt;/code> option.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openrun app create --dev --approve ./diskapp /disk_usage_dev&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>In dev mode, source code changes are picked up immediately and the app is live reloaded. For non-dev (prod) apps, &lt;code>app reload&lt;/code> has to be done to pick up changes, from local disk or from git.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>openrun app reload --approve --promote &amp;#34;/disk_usage*&amp;#34;&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>For apps created from GitHub source, &lt;code>app reload&lt;/code> will pick up the &lt;a href="https://openrun.dev/docs/applications/lifecycle/#github-reload" >latest changes&lt;/a> from the branch specified during &lt;code>app create&lt;/code> (default is &lt;code>main&lt;/code>). For apps created from local disk sources, the reload loads from the folder originally used during the create. For non-dev apps, the source code is loaded into the SQLite metadata database managed by the OpenRun server.This allow for versioning, even when working with local sources.&lt;/p>
&lt;h2>App Security&lt;span class="hx:absolute hx:-mt-20" id="app-security">&lt;/span>
&lt;a href="#app-security" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Application config is specified in Starlark code in the &lt;code>app.star&lt;/code> file. By default, the app does not have any permissions. All external actions an app can perform are done through plugin API calls. Every plugin API call needs to &lt;a href="https://openrun.dev/docs/applications/appsecurity/#security-model" >be approved&lt;/a> before it is allowed. This allows for multiple apps to run on the OpenRun server without interfering with each other.&lt;/p>
&lt;p>To approve an app permissions, run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openrun app approve /disk_usage&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The &lt;code>--approve&lt;/code> option can be specified during the &lt;code>app create&lt;/code> and &lt;code>app reload&lt;/code> command to automatically approve the permissions.&lt;/p>
&lt;h2>Staged Deployments&lt;span class="hx:absolute hx:-mt-20" id="staged-deployments">&lt;/span>
&lt;a href="#staged-deployments" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>For dev mode apps, there is just one app. For a prod mode app, creating the app creates a staging app and the actual production app. All config and code changes are applied on the &lt;a href="https://openrun.dev/docs/applications/lifecycle/#staging-apps" >staging mode&lt;/a> app first, and then manually promoted using &lt;code>app promote&lt;/code>. Promotion is automatic if &lt;code>--promote&lt;/code> option is specified for the &lt;code>app reload&lt;/code> (or any other command performing a metadata change).&lt;/p>
&lt;p>The &lt;code>app list&lt;/code> command lists all the apps for the specified &lt;a href="https://openrun.dev/docs/applications/overview/#glob-pattern" >glob pattern&lt;/a>. By default, it lists only the dev and prod apps. To list the staging apps also, add the &lt;code>--internal&lt;/code> (or &lt;code>-i&lt;/code>) option to &lt;code>app list&lt;/code>. &lt;code>all&lt;/code> is a shortcut for &lt;code>*:**&lt;/code>, which means all apps in all domains. &lt;code>all&lt;/code> is the default for &lt;code>app list&lt;/code>. For example:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openrun app list --internal all&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>lists all the apps and internal apps for each app. &lt;code>openrun app list &amp;quot;example.com:**&amp;quot;&lt;/code> lists the main apps for the example.com domain.&lt;/p>
&lt;p>The staging app can be used to verify whether changes are working before the production app is updated. The staging app is accessible by suffixing &lt;code>_cl_stage&lt;/code> at the end of the prod app path. So for an app at &lt;code>https://example.com/&lt;/code>, the staging url is &lt;code>https://example.com/_cl_stage&lt;/code>. For an app at &lt;code>/utils/app1&lt;/code>, the staging app url is &lt;code>/utils/app1_cl_stage&lt;/code>.&lt;/p>
&lt;p>To promote changes from staging to prod, run:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openrun app promote all&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>or &lt;code>openrun app promote &amp;quot;/disk_usage*&amp;quot;&lt;/code> to promote specific apps. Use the &lt;code>--dry-run&lt;/code> option to verify commands before they are actually applied.&lt;/p>
&lt;h2>Lifecycle without Git&lt;span class="hx:absolute hx:-mt-20" id="lifecycle-without-git">&lt;/span>
&lt;a href="#lifecycle-without-git" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>If not using git, a workflow would be:&lt;/p>
&lt;ul>
&lt;li>Create a dev mode app, like &lt;code>openrun app create --dev --approve ~/myappcode /myapp_dev&lt;/code>&lt;/li>
&lt;li>Create a prod mode app, like &lt;code>openrun app create --approve ~/myappcode /myapp&lt;/code>&lt;/li>
&lt;li>As code changes are saved to disk, the changes are immediately live at &lt;code>https://localhost:25223/myapp_dev&lt;/code>&lt;/li>
&lt;li>When code is in a stable state, run &lt;code>openrun app reload /myapp&lt;/code>. This will update the staging app with the most recent code from &lt;code> ~/myappcode&lt;/code> folder.&lt;/li>
&lt;li>The staging app is available at &lt;code>https://localhost:25223/myapp_cl_stage&lt;/code> for verification.&lt;/li>
&lt;li>To promote the code to prod, run &lt;code>openrun app promote /myapp&lt;/code>. The staged code is promoted to prod, live at &lt;code>https://localhost:25223/myapp&lt;/code>.&lt;/li>
&lt;/ul>
&lt;p>Having a staging environment helps catch issues related to account setup (which endpoint is pointed to etc) and other config issues before the changes are live on prod. OpenRun implements versioning for prod apps, even when source is not from git.&lt;/p>
&lt;h2>Lifecycle With Git&lt;span class="hx:absolute hx:-mt-20" id="lifecycle-with-git">&lt;/span>
&lt;a href="#lifecycle-with-git" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>If using git, a workflow would be:&lt;/p>
&lt;ul>
&lt;li>Create a dev mode app, like &lt;code>openrun app create --dev --approve ~/myappcode /myapp_dev &lt;/code>&lt;/li>
&lt;li>Create a prod mode app, like &lt;code>openrun app create --approve github.com/myorg/repo /myapp &lt;/code>&lt;/li>
&lt;li>As code changes are saved to disk, the changes are immediately live at &lt;code>https://localhost:25223/myapp_dev&lt;/code>&lt;/li>
&lt;li>When code is in a stable state, check in the dev code to git.&lt;/li>
&lt;li>Run &lt;code>openrun app reload /myapp&lt;/code>. This will update the staging app with the most recent code from &lt;code>main&lt;/code> branch in git.&lt;/li>
&lt;li>The staging app is live at &lt;code>https://localhost:25223/myapp_cl_stage&lt;/code>. Verify the functionality of the staging app.&lt;/li>
&lt;li>To promote the code to prod, run &lt;code>openrun app promote /myapp&lt;/code>. The staged code is promoted to prod, live at &lt;code>https://localhost:25223/myapp&lt;/code>.&lt;/li>
&lt;/ul>
&lt;h2>App Listing&lt;span class="hx:absolute hx:-mt-20" id="app-listing">&lt;/span>
&lt;a href="#app-listing" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Use &lt;code>openrun app list&lt;/code> to get list of installed app. By default, all apps are listed. Use a glob pattern like &lt;code>example.com:**&lt;/code> to list specific apps. Pass the &lt;code>--internal&lt;/code> or &lt;code>-i&lt;/code> option to &lt;code>list&lt;/code> to include the internal apps in the app listing. The pattern matches the main apps, and if the internal option is specified, the matched app&amp;rsquo;s linked apps are also listed.&lt;/p>
&lt;p>Use &lt;code>openrun version list&lt;/code> to get list of versions for an app. &lt;code>openrun version switch&lt;/code> allows switching between versions. The version command can be run separately on the staging app and prod app, like &lt;code>openrun version list /myapp_cl_stage&lt;/code> and &lt;code>openrun version list /myapp&lt;/code>. The current version is indicated in the output.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ openrun version list /dugit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Active Version Previous CreateTime GitCommit GitMessage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> &lt;span class="m">0&lt;/span> 2024-02-16 19:39:05 +0000 UTC 03ccaa35927667977646 Added version file listing support
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">2&lt;/span> &lt;span class="m">1&lt;/span> 2024-02-16 19:55:51 +0000 UTC 03ccaa35927667977646 Added version file listing &lt;span class="nv">support&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span>&amp;gt; &lt;span class="m">3&lt;/span> &lt;span class="m">2&lt;/span> 2024-02-16 21:18:16 +0000 UTC c00d7b1e99712de13745 Added version switching support
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ openrun version list /dugit_cl_stage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Active Version Previous CreateTime GitCommit GitMessage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> &lt;span class="m">0&lt;/span> 2024-02-16 19:39:05 +0000 UTC 03ccaa35927667977646 Added version file listing support
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">2&lt;/span> &lt;span class="m">1&lt;/span> 2024-02-16 19:54:22 +0000 UTC 03ccaa35927667977646 Added version file listing support
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">3&lt;/span> &lt;span class="m">2&lt;/span> 2024-02-16 20:38:44 +0000 UTC c00d7b1e99712de13745 Added version switching &lt;span class="nv">support&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span>&amp;gt; &lt;span class="m">4&lt;/span> &lt;span class="m">3&lt;/span> 2024-02-16 21:18:42 +0000 UTC c00d7b1e99712de13745 Added version switching support
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ openrun app list -i /dugit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Id Type Version Auth GitInfo Domain:Path SourceUrl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2cSkPeHiATfH46pcUX8EdZqdWQb PROD* &lt;span class="m">3&lt;/span> SYST main:c00d7b1e99712de13745 /dugit github.com/openrundev/openrun/examples/disk_usage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_stg_2cSkPeHiATfH46pcUX8EdZqdWQb STG &lt;span class="m">4&lt;/span> SYST main:c00d7b1e99712de13745 /dugit_cl_stage github.com/openrundev/openrun/examples/disk_usage&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>In the above listing, the staging app is on version 4, prod app on version 3. The &lt;code>*&lt;/code> in the &lt;code>app list&lt;/code> output indicates that the prod app has staged changes waiting to be promoted. Running &lt;code>openrun app promote /dugit&lt;/code> will update prod with the staged changes. &lt;code>version revert&lt;/code> reverts to previous version. &lt;code>version switch&lt;/code> can be used to switch to particular version, &lt;code>next&lt;/code> and &lt;code>previous&lt;/code> are shortcuts for version numbers. Version commands run against the specific app, so revert can be done on the staging app or the main app independently.&lt;/p>
&lt;h2>Developing Apps&lt;span class="hx:absolute hx:-mt-20" id="developing-apps">&lt;/span>
&lt;a href="#developing-apps" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>OpenRun app backend can be written in any language, running in a container. Some apps can be written in &lt;a href="https://github.com/google/starlark-go" target="_blank" rel="noopener">Starlark&lt;/a> and &lt;a href="https://pkg.go.dev/text/template" target="_blank" rel="noopener">Go HTML templates&lt;/a>, in which case no containers are required.&lt;/p>
&lt;p>See &lt;a href="https://openrun.dev/docs/app/overview/" >dev overview&lt;/a> for a quick start overview on developing OpenRun applications.&lt;/p></description></item><item><title>Application Routing</title><link>https://openrun.dev/docs/applications/routing/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/applications/routing/</guid><description>
&lt;h2>Request Routing&lt;span class="hx:absolute hx:-mt-20" id="request-routing">&lt;/span>
&lt;a href="#request-routing" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The OpenRun server can host multiple applications simultaneously. Each application gets a dedicated path, the application can use all sub-paths within that without conflicts with other applications.&lt;/p>
&lt;p>When an application is created, a path needs to be specified and a domain can be optionally specified. Routing for application requests is done based on domain and path. The domain is the namespace within which the paths are resolved. If no domain is specified for the app, it is installed for the default domain. &lt;a href="https://openrun.dev/docs/configuration/networking/#default-domain" >Default domain&lt;/a> can be set using the &lt;code>system.default_domain&lt;/code> config property (default value is &lt;code>localhost&lt;/code>).&lt;/p>
&lt;p>Consider this scenario:&lt;/p>
&lt;ul>
&lt;li>App A is installed at /utils/appA&lt;/li>
&lt;li>App B is installed at /appB&lt;/li>
&lt;li>App C is installed at the root level / for domain example.com, example.com:/&lt;/li>
&lt;/ul>
&lt;p>For the above scenario:&lt;/p>
&lt;ul>
&lt;li>Requests to /utils/appA/* for the default domain go to app A&lt;/li>
&lt;li>Requests to /appB/* for the default domain go to App B.&lt;/li>
&lt;li>Requests to example.com for any path will always go to App C, since it is installed at the root path.&lt;/li>
&lt;/ul>
&lt;h2>Creating Applications&lt;span class="hx:absolute hx:-mt-20" id="creating-applications">&lt;/span>
&lt;a href="#creating-applications" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>When an app is being created, a path and an optional domain need to be specified. For the above example scenario:&lt;/p>
&lt;ul>
&lt;li>No new apps can be created for example.com domain, since App C is installed at the root path.&lt;/li>
&lt;li>For the default domain, /utils/appA and /appB are taken, other paths are available.&lt;/li>
&lt;li>New apps can be created under any path, including root path, for new domains and subdomains, like test.example.com.&lt;/li>
&lt;/ul>
&lt;h2>Notes&lt;span class="hx:absolute hx:-mt-20" id="notes">&lt;/span>
&lt;a href="#notes" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;ul>
&lt;li>The domain specified for the app is used only for routing requests. The user has to ensure that the actual DNS routing is done properly outside of OpenRun for the API calls to land on the OpenRun server.&lt;/li>
&lt;li>Using wildcard DNS entries will reduce the configuration required in the DNS service. So if *.example.com points to the IP address of the OpenRun service, any domain based routing done in OpenRun will work with no further DNS configuration being required. The automated certificates created by OpenRun will be domain level certificates, wildcard certificates are not currently created.&lt;/li>
&lt;li>&lt;code>/_openrun/&lt;/code> API path at the root level and &lt;code>/_openrun_app/&lt;/code> within an app path are reserved paths, they are used by the OpenRun internal APIs, requests will not reach the app. This applies for all domains. &lt;code>_cl_&lt;/code> is reserved for use for internal apps, so app path last component cannot have &lt;code>_cl_&lt;/code>.&lt;/li>
&lt;/ul></description></item><item><title>Config Overview</title><link>https://openrun.dev/docs/configuration/overview/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/configuration/overview/</guid><description>
&lt;h2>OpenRun Server&lt;span class="hx:absolute hx:-mt-20" id="openrun-server">&lt;/span>
&lt;a href="#openrun-server" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The OpenRun server picks up its configuration from the config file at startup. All the parameters have default values, specified in the code at &lt;a href="https://github.com/openrundev/openrun/blob/main/internal/system/openrun.default.toml" target="_blank" rel="noopener">openrun.default.toml&lt;/a>.&lt;/p>
&lt;p>A user-specified config file can be provided. The environment variable &lt;code>CL_CONFIG_FILE&lt;/code> is used to locate the config file. If not set, it defaults to &lt;code>$OPENRUN_HOME/openrun.toml&lt;/code>.&lt;/p>
&lt;p>Values in the user specified config take precedence over the default config values in the source code.&lt;/p>
&lt;h2>Home Directory&lt;span class="hx:absolute hx:-mt-20" id="home-directory">&lt;/span>
&lt;a href="#home-directory" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The &lt;code>OPENRUN_HOME&lt;/code> environment variable is used to locate the home directory for the OpenRun server. If no value is set, a home directory is determined based on the path of the openrun binary (generally one level above the bin directory where the binary is). This location is used to store:&lt;/p>
&lt;ul>
&lt;li>The default config file, &lt;code>$OPENRUN_HOME/openrun.toml&lt;/code>&lt;/li>
&lt;li>The sqlite database containing the metadata information, default is &lt;code>$OPENRUN_HOME/metadata/openrun.db&lt;/code>&lt;/li>
&lt;li>The logs for the service, under the &lt;code>logs&lt;/code> folder.&lt;/li>
&lt;li>The config folder contains the certificates to use for TLS.&lt;/li>
&lt;li>The run folder contains app specific temporary files.&lt;/li>
&lt;/ul>
&lt;h2>OpenRun Client CLI&lt;span class="hx:absolute hx:-mt-20" id="openrun-client-cli">&lt;/span>
&lt;a href="#openrun-client-cli" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>By default, the OpenRun client uses Unix domain sockets to connect to the OpenRun server. &lt;code>$OPENRUN_HOME&lt;/code> should point to the same location for server and client. If no changes are done for the server defaults, then the client can connect to the server locally without any other configuration being required. See &lt;a href="https://openrun.dev/docs/configuration/security/#admin-api-access" >here&lt;/a> for details about the client configuration.&lt;/p>
&lt;h2>App Config&lt;span class="hx:absolute hx:-mt-20" id="app-config">&lt;/span>
&lt;a href="#app-config" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>In &lt;code>openrun.toml&lt;/code>, properties which apply to all apps can be defined under the &lt;code>[app_config]&lt;/code> section. For example&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">app_config&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">audit&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">redact_url&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>sets the redact property to true for all apps. The property can be further configured individually for one or more apps in the app metadata using&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app update-metadata conf --promote &lt;span class="s1">&amp;#39;audit.redact_url=true&amp;#39;&lt;/span> /myapp&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>Config Access from Code&lt;span class="hx:absolute hx:-mt-20" id="config-access-from-code">&lt;/span>
&lt;a href="#config-access-from-code" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>&lt;a href="https://openrun.dev/docs/develop/#app-parameters" >App Params&lt;/a> are the primary user configurable properties for apps. For cases where properties need to be read from &lt;code>openrun.toml&lt;/code> config file or from env, the config builtin can be used. This is available as &lt;code>config&lt;/code> in app definitions and in &lt;code>params.star&lt;/code>. In app declaration (like &lt;code>app.star&lt;/code>), this is available as &lt;code>ace.config&lt;/code>.&lt;/p>
&lt;p>The &lt;code>config&lt;/code>/&lt;code>ace.config&lt;/code> builtin supports the following parameters:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>key&lt;/strong> (string, required) : the config key name&lt;/li>
&lt;li>&lt;strong>default&lt;/strong> (any, required) : the default value&lt;/li>
&lt;/ul>
&lt;p>&lt;code>_branch&lt;/code> is a special key which resolves to the git branch from which the app declaration is loaded.&lt;/p>
&lt;p>In &lt;code>app.star&lt;/code>, a call to config like&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">system_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;systems&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;local&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>will fetch the default value. Adding in &lt;code>openrun.toml&lt;/code> config&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">node_config&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">systems&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;local&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;stage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;test&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>will result in the configured value being available in the code. This allows for installation specific properties, while keeping the source code same across environments.&lt;/p>
&lt;p>In app declaration, same can be accessed as&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">utils.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">system_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">config&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;systems&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;local&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/utils/bookmarks&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;github.com/openrundev/apps/utils/bookmarks&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">params&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;systems&amp;#34;&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">systems_list&lt;/span>&lt;span class="p">})&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>If the app source code needs to be checked out from same branch as the app declaration, then do&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">apps.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">branch&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;_branch&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;main&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">branch&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;/bookmarks&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;github.com/openrundev/apps/utils/bookmarks&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">git_branch&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">branch&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>This creates the app from the same branch as used during the &lt;code>apply&lt;/code>/&lt;code>sync&lt;/code> command.&lt;/p></description></item><item><title>Container Overview</title><link>https://openrun.dev/docs/container/overview/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/container/overview/</guid><description>
&lt;p>OpenRun builds the image and manages the container lifecycle for containerized apps. OpenRun fetches the source code, creates the image, starts the container, does health checks on the container and stops the container when idle. Appspecs allow existing source code to be used with OpenRun with no code changes required.&lt;/p>
&lt;h2>App Specs&lt;span class="hx:absolute hx:-mt-20" id="app-specs">&lt;/span>
&lt;a href="#app-specs" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>OpenRun app specs are defined at &lt;a href="https://github.com/openrundev/appspecs" target="_blank" rel="noopener">https://github.com/openrundev/appspecs&lt;/a>. Most specs use containers, the &lt;code>proxy&lt;/code> spec is an exception.&lt;/p>
&lt;p>The &lt;code>image&lt;/code> spec specifies the image to use. for example&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openrun app create --spec image --approve --param &lt;span class="nv">image&lt;/span>&lt;span class="o">=&lt;/span>nginx &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --param &lt;span class="nv">port&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">80&lt;/span> - nginxapp.localhost:/&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>downloads the nginx image, starts it and proxies any request to &lt;code>https://nginxapp.localhost:25223&lt;/code> to the nginx container&amp;rsquo;s port 80. The container is started on the first API call, and it is stopped automatically when there are no API calls for 180 seconds.&lt;/p>
&lt;p>For all other specs, the &lt;code>Containerfile&lt;/code> is defined in the spec. For example, for the &lt;code>python-streamlit&lt;/code> spec, the Containerfile is &lt;a href="https://github.com/openrundev/appspecs/blob/main/python-streamlit/Containerfile" target="_blank" rel="noopener">here&lt;/a>. Running&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openrun app create --spec python-streamlit --branch master &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --approve github.com/streamlit/streamlit-example /streamlit_app&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>will create an app at &lt;code>https://localhost:25223/streamlit_app&lt;/code>. On the first API call to the app, the image is built from the defined spec and the container is started. The &lt;code>python-gradio&lt;/code> spec does the same for gradio apps.&lt;/p>
&lt;h2>App Specs Listing&lt;span class="hx:absolute hx:-mt-20" id="app-specs-listing">&lt;/span>
&lt;a href="#app-specs-listing" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The specs defined currently are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: left">Spec Name&lt;/th>
&lt;th style="text-align: left">Required Params&lt;/th>
&lt;th style="text-align: left">Optional Params&lt;/th>
&lt;th style="text-align: left">Supports Path Routing&lt;/th>
&lt;th style="text-align: left">Notes&lt;/th>
&lt;th style="text-align: left">Example&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: left">container&lt;/td>
&lt;td style="text-align: left">&lt;/td>
&lt;td style="text-align: left">&lt;ul>&lt;li>&lt;b>port&lt;/b> : The port number within container, optional if EXPOSE directive is present&lt;/li>&lt;/ul>&lt;/td>
&lt;td style="text-align: left">Depends on app&lt;/td>
&lt;td style="text-align: left">Requires app code to have a Containerfile/Dockerfile&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">image&lt;/td>
&lt;td style="text-align: left">&lt;ul>&lt;li>&lt;b>image&lt;/b>: The image to use for the container&lt;/li> &lt;li>&lt;b>port&lt;/b> : The port number within container&lt;/li>&lt;/ul>&lt;/td>
&lt;td style="text-align: left">&lt;/td>
&lt;td style="text-align: left">Depends on app&lt;/td>
&lt;td style="text-align: left">No source url required when creating app, use - as url&lt;/td>
&lt;td style="text-align: left">&lt;code>openrun app create --spec image --approve --param image=nginx --param port=80 - nginxapp.localhost:/&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">proxy&lt;/td>
&lt;td style="text-align: left">&lt;ul>&lt;li>&lt;b>url&lt;/b>: The url to which requests should be proxied&lt;/li> &lt;/ul>&lt;/td>
&lt;td style="text-align: left">&lt;/td>
&lt;td style="text-align: left">No&lt;/td>
&lt;td style="text-align: left">No source url required when creating app, use - as url&lt;/td>
&lt;td style="text-align: left">&lt;code>openrun app create --spec proxy --approve -param url=https://openrun.dev - proxyapp.localhost:/&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">python-wsgi&lt;/td>
&lt;td style="text-align: left">&lt;/td>
&lt;td style="text-align: left">&lt;ul>&lt;li>&lt;b>APP_MODULE&lt;/b>: The module:app for the WSGI app. Defaults to app:app, meaning app in app.py&lt;/li> &lt;/ul>&lt;/td>
&lt;td style="text-align: left">Depends on app&lt;/td>
&lt;td style="text-align: left">Runs Web Server Gateway Interface (WSGI) apps using gunicorn&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">python-asgi&lt;/td>
&lt;td style="text-align: left">&lt;/td>
&lt;td style="text-align: left">&lt;ul>&lt;li>&lt;b>APP_MODULE&lt;/b>: The module:app for the ASGI app. Defaults to app:app, meaning app in app.py&lt;/li> &lt;/ul>&lt;/td>
&lt;td style="text-align: left">Depends on app&lt;/td>
&lt;td style="text-align: left">Runs Asynchronous Server Gateway Interface (ASGI) apps using uvicorn&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">python-flask&lt;/td>
&lt;td style="text-align: left">&lt;/td>
&lt;td style="text-align: left">&lt;ul>&lt;li>&lt;b>port&lt;/b> : The port number within container. If EXPOSE directive is present, that is used. Defaults to 5000&lt;/li>&lt;/ul>&lt;/td>
&lt;td style="text-align: left">Depends on app&lt;/td>
&lt;td style="text-align: left">Runs app using flask dev server&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">python-streamlit&lt;/td>
&lt;td style="text-align: left">&lt;/td>
&lt;td style="text-align: left">&lt;ul>&lt;li>&lt;b>app_file&lt;/b> : The file name of the streamlit app to run. Default streamlit_app.py&lt;/li>&lt;/ul>&lt;/td>
&lt;td style="text-align: left">Yes&lt;/td>
&lt;td style="text-align: left">&lt;/td>
&lt;td style="text-align: left">&lt;code>openrun app create --spec python-streamlit --branch master --approve github.com/streamlit/streamlit-example /streamlit_app&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">python-streamlit-poetry&lt;/td>
&lt;td style="text-align: left">&lt;/td>
&lt;td style="text-align: left">&lt;ul>&lt;li>&lt;b>app_file&lt;/b> : The file name of the streamlit app to run. Default streamlit_app.py&lt;/li>&lt;/ul>&lt;/td>
&lt;td style="text-align: left">Yes&lt;/td>
&lt;td style="text-align: left">Installs packages using poetry&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">python-fasthtml&lt;/td>
&lt;td style="text-align: left">&lt;/td>
&lt;td style="text-align: left">&lt;ul>&lt;li>&lt;b>APP_MODULE&lt;/b>: The module:app for the ASGI app. Defaults to app:app, meaning app in app.py&lt;/li> &lt;/ul>&lt;/td>
&lt;td style="text-align: left">Depends on app&lt;/td>
&lt;td style="text-align: left">Runs app using uvicorn&lt;/td>
&lt;td style="text-align: left">&lt;code>openrun app create --approve --spec python-fasthtml --param APP_MODULE=basic_ws:app https://github.com/AnswerDotAI/fasthtml/examples fasthtmlapp.localhost:/&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">python-gradio&lt;/td>
&lt;td style="text-align: left">&lt;/td>
&lt;td style="text-align: left">&lt;ul>&lt;li>&lt;b>app_file&lt;/b> : The file name of the gradio app to run. Default run.py&lt;/li>&lt;/ul>&lt;/td>
&lt;td style="text-align: left">Yes&lt;/td>
&lt;td style="text-align: left">&lt;/td>
&lt;td style="text-align: left">&lt;code>openrun app create --spec python-gradio --approve github.com/gradio-app/gradio/demo/blocks_flag /gradio_app&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: left">go&lt;/td>
&lt;td style="text-align: left">&lt;ul>&lt;li>&lt;b>port&lt;/b> : The port number within container&lt;/li>&lt;/ul>&lt;/td>
&lt;td style="text-align: left">&lt;ul>&lt;li>&lt;b>MAIN_PACKAGE&lt;/b> : The go module to build, default &amp;ldquo;.&amp;rdquo;. Pass as a &lt;code>--carg&lt;/code> instead of &lt;code>--param&lt;/code>.&lt;/li>&lt;li>&lt;b>APP_ARGS&lt;/b> : Args to pass to the app&lt;/li>&lt;/ul>&lt;/td>
&lt;td style="text-align: left">Depends on app&lt;/td>
&lt;td style="text-align: left">CGO is disabled; go.mod has to be present; app should bind to 0.0.0.0&lt;/td>
&lt;td style="text-align: left">&lt;code>openrun app create --approve --spec go --param port=8080 --param APP_ARGS=&amp;quot;-addr 0.0.0.0:8080&amp;quot; --branch master github.com/golang/example/helloserver /goapp&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2>App Environment Params&lt;span class="hx:absolute hx:-mt-20" id="app-environment-params">&lt;/span>
&lt;a href="#app-environment-params" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>For containerized apps, all params specified for the app (including ones specified in &lt;code>params.star&lt;/code> spec) are passed to the container at runtime as environment parameters. &lt;code>CL_APP_PATH&lt;/code> is a special param passed to the container with the app installation path (without the domain name). &lt;code>PORT&lt;/code> is also set with the value of the port number the app is expected to bind to within the container.&lt;/p>
&lt;p>For example, the command&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app create --approve --spec python-fasthtml &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --param &lt;span class="nv">APP_MODULE&lt;/span>&lt;span class="o">=&lt;/span>basic_ws:app &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> https://github.com/AnswerDotAI/fasthtml/examples fasthtmlapp.localhost:/&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>creates a FastHTML based app. The &lt;code>APP_MODULE&lt;/code> env param is passed to the Container and passed to the startup command line in the &lt;a href="https://github.com/openrundev/appspecs/blob/a06a59a91d99520e271c6f3df68b6fb8292dbf50/python-fasthtml/Containerfile#L41" target="_blank" rel="noopener">Containerfile&lt;/a>.&lt;/p>
&lt;p>To update params, run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun param update APP_MODULE basic_app:app fasthtmlapp.localhost:/&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Param updates are staged, they can be promoted after verification. To delete a param, pass &lt;code>-&lt;/code> as the value to the update. Use &lt;code>openrun param list&lt;/code> to view app params.&lt;/p>
&lt;p>Params can be set to secrets, by setting the value as &lt;code>{{secret &amp;quot;vault_prod&amp;quot; &amp;quot;MY_KEY_NAME&amp;quot;}}&lt;/code>. The secret is resolved when the container is started and the value is passed to the container in its env.&lt;/p>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-blue-200 hx:bg-blue-100 hx:text-blue-900 hx:dark:border-blue-200/30 hx:dark:bg-blue-900/30 hx:dark:text-blue-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">ℹ️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">&lt;strong>Note:&lt;/strong> Staged param updates are a powerful mechanism to ensure that config changes do not break your apps. For example, if BUCKET_NAME is a param pointing to a S3 bucket, the param change can be staged. The staging app can be tested to ensure that the new bucket is functional and there are no IAM/key related errors. Once the staging app is working, the app can be promoted. Code changes are easy to test, but config changes can cause env specific errors. Configuration related issues are a common cause of outages during deployment. OpenRun enables you to avoid such errors.&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2>Container Build Args&lt;span class="hx:absolute hx:-mt-20" id="container-build-args">&lt;/span>
&lt;a href="#container-build-args" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>If the Containerfile has an argument, the arg can be passed during the app create. Most python specs have the python version as an argument, For example, &lt;a href="https://github.com/openrundev/appspecs/blob/a06a59a91d99520e271c6f3df68b6fb8292dbf50/python-fasthtml/Containerfile#L2" target="_blank" rel="noopener">https://github.com/openrundev/appspecs/blob/a06a59a91d99520e271c6f3df68b6fb8292dbf50/python-fasthtml/Containerfile#L2&lt;/a> sets&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>ARG PYTHON_VERSION=3.12.5-slim&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>To change this during app creation, pass &lt;code>--carg PYTHON_VERSION=3.11.1&lt;/code>. For example,&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app create --approve --spec python-fasthtml &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --param &lt;span class="nv">APP_MODULE&lt;/span>&lt;span class="o">=&lt;/span>basic_ws:app &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --carg &lt;span class="nv">PYTHON_VERSION&lt;/span>&lt;span class="o">=&lt;/span>3.11.1 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> https://github.com/AnswerDotAI/fasthtml/examples fasthtmlapp.localhost:/&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>To update args, run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app update-metadata carg &lt;span class="nv">PYTHON_VERSION&lt;/span>&lt;span class="o">=&lt;/span>3.11.2 fasthtmlapp.localhost:/&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Like all metadata updates, arg updates are staged. Pass &lt;code>--promote&lt;/code> to promote immediately or run &lt;code>app promote&lt;/code> to promote from stage to prod.&lt;/p>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-blue-200 hx:bg-blue-100 hx:text-blue-900 hx:dark:border-blue-200/30 hx:dark:bg-blue-900/30 hx:dark:text-blue-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">ℹ️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">&lt;strong>Note:&lt;/strong> The slim images are smaller, but they lack some debugging tools. The regular image can be used during development.&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2>Container Options&lt;span class="hx:absolute hx:-mt-20" id="container-options">&lt;/span>
&lt;a href="#container-options" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>To set CPU and memory limits and other options for the container, pass &lt;code>--copt optkey[=optvalue]&lt;/code> to the app create command. For example, &lt;code>--copt cpu-shares=1000&lt;/code>&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app create --approve --spec python-fasthtml &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --param &lt;span class="nv">APP_MODULE&lt;/span>&lt;span class="o">=&lt;/span>basic_ws:app &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --copt cpu-shares&lt;span class="o">=&lt;/span>&lt;span class="m">1000&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> https://github.com/AnswerDotAI/fasthtml/examples fasthtmlapp.localhost:/&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>sets the CPU shares for the container to 1000.&lt;/p>
&lt;p>To update container options, run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app update-metadata copt cpu-shares&lt;span class="o">=&lt;/span>&lt;span class="m">500&lt;/span> fasthtmlapp.localhost:/&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Like all metadata updates, option updates are staged. Pass &lt;code>--promote&lt;/code> to promote immediately or run &lt;code>app promote&lt;/code> to promote from stage to prod.&lt;/p>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-blue-200 hx:bg-blue-100 hx:text-blue-900 hx:dark:border-blue-200/30 hx:dark:bg-blue-900/30 hx:dark:text-blue-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">ℹ️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">&lt;strong>Note:&lt;/strong> By default there are no limits set for the containers. That allows for full utilization of system resources. To avoid individual apps from utilizing too much of the system resources, CPU/memory limits can be set.&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2>Volumes&lt;span class="hx:absolute hx:-mt-20" id="volumes">&lt;/span>
&lt;a href="#volumes" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>OpenRun automatically manages volumes for containers. Volumes definitions are picked from:&lt;/p>
&lt;ul>
&lt;li>The &lt;code>Dockerfile&lt;/code>/&lt;code>Containerfile&lt;/code> in the source or spec&lt;/li>
&lt;li>The container config in the app definition &lt;code>app.star&lt;/code>&lt;/li>
&lt;li>The app metadata, &lt;code>container-volume&lt;/code>/&lt;code>cvol&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>For named and unnamed volumes, OpenRun creates a unique named volume for each app. This volume is mounted across app updates.&lt;/p>
&lt;p>Bind mounts are supported for mounting secrets into the container. If the source has a template file &lt;code>secret.tmpl&lt;/code> which needs to be loaded into the container at &lt;code>/app/secret.ini&lt;/code>, a volume can be defined like &lt;code>cl_secret:secret.tmpl:/app/secret.ini&lt;/code>. The template file is passed the environment params and the generated file is bound into the container. For example, if the template file contains&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">secret.tmpl&lt;/div>&lt;div>&lt;pre>&lt;code>[DEFAULT]
{{range $k, $v := .params}}
{{- $k -}} = {{- $v }}
{{end}}&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>the params are generated in the ini file format. See &lt;a href="https://github.com/openrundev/appspecs/blob/main/python-streamlit/app.star#L10" target="_blank" rel="noopener">streamlit spec&lt;/a> for an example of using this.&lt;/p>
&lt;p>To define the volume in the app config, add&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">secret.tmpl&lt;/div>&lt;div>&lt;pre>&lt;code> container=container.config(container.AUTO, port=param.port, volumes=[
&amp;#34;cl_secret:secret.tmpl:/app/secret.ini&amp;#34;,
]),&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>To set the volume info in the app metadata, run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app update-metadata cvol --promote &lt;span class="s2">&amp;#34;cl_secret:secret.tmpl:/app/secret.ini&amp;#34;&lt;/span> /APPPATH&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>multiple values are supported for &lt;code>cvol&lt;/code>.&lt;/p></description></item><item><title>Installation</title><link>https://openrun.dev/docs/installation/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/installation/</guid><description>
&lt;h2>Install Release Build&lt;span class="hx:absolute hx:-mt-20" id="install-release-build">&lt;/span>
&lt;a href="#install-release-build" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>OpenRun manages TLS cert using LetsEncrypt for prod environments. For dev environment, it is recommended to install &lt;a href="https://github.com/FiloSottile/mkcert" target="_blank" rel="noopener">mkcert&lt;/a>. OpenRun will automatically create local certs using mkcert if it is present. Install mkcert and run &lt;code>mkcert -install&lt;/code> before starting OpenRun server.&lt;/p>
&lt;p>For container based apps, Docker or Podman or Orbstack should be installed and running on the machine. OpenRun automatically detects the container manager to use.&lt;/p>
&lt;p>OpenRun uses an &lt;code>admin&lt;/code> user account as the default authentication for accessing apps. A random password is generated for this account during initial OpenRun server installation. Note down this password for accessing apps.&lt;/p>
&lt;p>To install the latest release build on Linux, OSX or Windows with WSL, run the install script. Note down the password printed. Add the env variables as prompted and then start the service.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">curl -sSL https://openrun.dev/install.sh &lt;span class="p">|&lt;/span> sh&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>On Windows, to install the OpenRun application, run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">powershell -Command &lt;span class="s2">&amp;#34;iwr https://openrun.dev/install.ps1 -useb | iex&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The app is installed under &lt;code>$HOME/clhome&lt;/code> by default. Note down the generated password for the admin user. Open a new terminal (to get the updated ENV values) and run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openrun server start&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>to start the OpenRun server.&lt;/p>
&lt;p>To install apps declaratively, run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>openrun apply --approve github.com/openrundev/openrun/examples/utils.star all&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Open https://localhost:25223 to access the app listing UI.&lt;/p>
&lt;p>To install a bookmark manager app using the CLI, run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openrun app create --approve github.com/openrundev/apps/utils/bookmarks /book&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The bookmark manager app should be available at &lt;a href="https://localhost:25223/book" target="_blank" rel="noopener">https://localhost:25223/book&lt;/a>.&lt;/p>
&lt;p>See &lt;a href="#start-the-service" >start the service&lt;/a> for details.&lt;/p>
&lt;h2>Brew Install&lt;span class="hx:absolute hx:-mt-20" id="brew-install">&lt;/span>
&lt;a href="#brew-install" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>To install using &lt;a href="https://brew.sh/" target="_blank" rel="noopener">brew&lt;/a>, run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>brew tap openrundev/homebrew-openrun
brew install openrun
brew services start openrun&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>Install from Source&lt;span class="hx:absolute hx:-mt-20" id="install-from-source">&lt;/span>
&lt;a href="#install-from-source" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>To install from source&lt;/p>
&lt;ul>
&lt;li>Ensure that a recent version of &lt;a href="https://go.dev/doc/install" target="_blank" rel="noopener">Go&lt;/a> is available, version 1.21.0 or newer.&lt;/li>
&lt;li>Checkout the OpenRun repo.&lt;/li>
&lt;li>The below instructions assume you are using $HOME/clhome/openrun.toml as the config file and $HOME/clhome as the work directory location.&lt;/li>
&lt;/ul>
&lt;p>First add the below env variables to your shell .profile or .bash_profile:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">OPENRUN_HOME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$HOME&lt;/span>/clhome
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$OPENRUN_HOME&lt;/span>/bin/:&lt;span class="nv">$PATH&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Source the update profile file, like &lt;code>source ~/.bash_profile&lt;/code>. Build the OpenRun binary&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Ensure go is in the $PATH&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p &lt;span class="nv">$OPENRUN_HOME&lt;/span>/bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir &lt;span class="nv">$HOME&lt;/span>/openrun_source &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">cd&lt;/span> &lt;span class="nv">$HOME&lt;/span>/openrun_source
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone -b main https://github.com/openrundev/openrun &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">cd&lt;/span> openrun
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go build -o &lt;span class="nv">$OPENRUN_HOME&lt;/span>/bin/openrun ./cmd/openrun/&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>Initial Configuration&lt;span class="hx:absolute hx:-mt-20" id="initial-configuration">&lt;/span>
&lt;a href="#initial-configuration" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>To use the openrun service, you need an initial config file with the service password and a work directory. Create the openrun.toml file, and create a randomly generate password for the &lt;strong>admin&lt;/strong> user account&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openrun password &amp;gt; &lt;span class="nv">$OPENRUN_HOME&lt;/span>/openrun.toml&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>This will print a random password on the screen, note that down as the password to use for accessing the applications.&lt;/p>
&lt;h2>Start the service&lt;span class="hx:absolute hx:-mt-20" id="start-the-service">&lt;/span>
&lt;a href="#start-the-service" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>To start the OpenRun server, run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openrun server start&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The service logs will be going to $OPENRUN_HOME/logs. The service will be started on &lt;a href="https://127.0.0.1:25223" target="_blank" rel="noopener">https://localhost:25223&lt;/a> by default.&lt;/p>
&lt;h2>Load an App&lt;span class="hx:absolute hx:-mt-20" id="load-an-app">&lt;/span>
&lt;a href="#load-an-app" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>To create an app, ensure that code is available locally and then run the OpenRun client&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openrun app create --dev &lt;span class="nv">$HOME&lt;/span>/openrun_source/openrun/examples/disk_usage /disk_usage&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>To audit and approve the app&amp;rsquo;s security policies, run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">openrun app approve /disk_usage&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>This will create an app at /disk_usage with the example disk_usage app. The disk_usage app allows the user to explore the subfolders which are consuming most disk space.&lt;/p>
&lt;p>To access the app, go to &lt;a href="https://localhost:25223/disk_usage" target="_blank" rel="noopener">https://localhost:25223/disk_usage&lt;/a>. Use &lt;code>admin&lt;/code> as the username and use the password previously generated.&lt;/p>
&lt;p>The code for the disk usage app is in &lt;a href="https://github.com/openrundev/openrun/tree/main/examples/disk_usage/app.star" target="_blank" rel="noopener">GitHub&lt;/a>. app.star is the Starlark config and app.go.html is the html template. The other files are generated files and are created during app development.&lt;/p></description></item><item><title>Overview</title><link>https://openrun.dev/docs/app/overview/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/app/overview/</guid><description>
&lt;p>OpenRun supports deploying any type of app, in any language/framework, using containerized apps. Apps can also be built where the backend API is in the container but the UI is built using OpenRun. OpenRun UI applications implement a &lt;a href="https://hypermedia.systems/hypermedia-reintroduction/" target="_blank" rel="noopener">Hypermedia driven approach&lt;/a> for developing web applications. Applications return HTML fragments as API response using &lt;a href="https://pkg.go.dev/html/template" target="_blank" rel="noopener">Go html templates&lt;/a>. The UI uses HTML enhanced with hypermedia controls using the &lt;a href="https://htmx.org/" target="_blank" rel="noopener">HTMX library&lt;/a> to implement user interactions.&lt;/p>
&lt;p>The backend API routes and dependencies like CSS library, JavaScript modules etc are configured using &lt;a href="https://github.com/google/starlark-go/blob/master/doc/spec.md" target="_blank" rel="noopener">Starlark&lt;/a> configuration. Any custom API handling required is implemented in handler functions also written in Starlark. Starlark is a subset of python, optimized for application configuration use-cases.&lt;/p>
&lt;h2>App Types&lt;span class="hx:absolute hx:-mt-20" id="app-types">&lt;/span>
&lt;a href="#app-types" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>OpenRun apps can be of few different types:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Action apps&lt;/strong>: Actions allow apps to expose an autogenerated UI for simple backend actions.&lt;/li>
&lt;li>&lt;strong>Containerized apps&lt;/strong>: The whole app is implemented in a container, OpenRun proxies the container results. This uses the container and proxy plugins. No Starlark code is required for this.&lt;/li>
&lt;li>&lt;strong>Starlark apps&lt;/strong>: These use the OpenRun plugins to implement the whole app. No containers are required for such apps.&lt;/li>
&lt;li>&lt;strong>Hybrid apps&lt;/strong>: The backend APIs are implemented in a container. OpenRun is used to implement the Hypermedia based UI using Starlark handlers. This uses the http plugin to talk to the backend API and the container plugin to configure the backend.&lt;/li>
&lt;/ul>
&lt;p>This section of the docs covers Starlark and Hybrid apps. For a containerized app, the &lt;code>--spec&lt;/code> definition includes all the app definition. There is no need to do any custom Starlark config for a regular containerized app.&lt;/p>
&lt;h3>Sample Starlark App&lt;span class="hx:absolute hx:-mt-20" id="sample-starlark-app">&lt;/span>
&lt;a href="#sample-starlark-app" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>To create an app with a custom HTML page which shows a listing of files in your root directory, create an &lt;code>~/myapp4/app.star&lt;/code> file with&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;exec.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;exec&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">exec&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ls&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;-l&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">value&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;Error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;hello4&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">custom_layout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">routes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">)],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">permissions&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">permission&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;exec.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;run&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;ls&amp;#34;&lt;/span>&lt;span class="p">])]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>and an &lt;code>~/myapp4/index.go.html&lt;/code> file with&lt;/p>
&lt;!-- prettier-ignore -->
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">index.go.html&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&amp;lt;!doctype html&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>File List&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">title&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ template &amp;#34;openrun_gen_import&amp;#34; . }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ .Data.Error }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{ range .Data.Lines }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{.}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">br&lt;/span>&lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{end}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">body&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;!-- prettier-ignore-end -->
&lt;p>Run &lt;code>openrun app create --auth=none --dev --approve ~/myapp4 /hello4&lt;/code>. After that, the app is available at &lt;code>/hello4&lt;/code>. Note that the &lt;code>--dev&lt;/code> option is required for the &lt;code>openrun_gen_import&lt;/code> file to be generated which is required for live reload.&lt;/p>
&lt;p>This app uses the &lt;code>exec&lt;/code> plugin to run the ls command. The output of the command is shown when the app is accessed. To allow the app to run the plugin command, use the &lt;code>openrun app approve&lt;/code> command.&lt;/p>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-yellow-100 hx:bg-yellow-50 hx:text-yellow-900 hx:dark:border-yellow-200/30 hx:dark:bg-yellow-700/30 hx:dark:text-yellow-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">⚠️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">&lt;strong>Note:&lt;/strong> If running on Windows, change &lt;code>ls&lt;/code> to &lt;code>dir&lt;/code>. Else, use the &lt;code>fs&lt;/code> plugin to make this platform independent. See &lt;a href="https://github.com/openrundev/apps/blob/main/system/disk_usage/app.star" target="_blank" rel="noopener">https://github.com/openrundev/apps/blob/main/system/disk_usage/app.star&lt;/a>.&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3>Custom Layout HTML App&lt;span class="hx:absolute hx:-mt-20" id="custom-layout-html-app">&lt;/span>
&lt;a href="#custom-layout-html-app" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>To return HTML response, a HTML template file named &lt;code>*.go.html&lt;/code> is required. Create an &lt;code>~/myapp2/app.star&lt;/code> file containing&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;hello2&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">custom_layout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">routes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>and an &lt;code>~/myapp2/index.go.html&lt;/code> file containing&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">index.go.html&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">hello world2&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Run &lt;code>openrun app create --auth=none ~/myapp2 /hello2&lt;/code>. After that, the app is available at &lt;code>/hello2&lt;/code>&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">$ curl localhost:25222/hello2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hello world2&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The &lt;code>~/myapp2/index.go.html&lt;/code> can be updated to have a complete HTML page. Use the command &lt;code>openrun app reload --promote /hello2&lt;/code> to pick up changes. This app is using &lt;code>custom_layout=True&lt;/code> which means the app developer has to provide the complete HTML.&lt;/p>
&lt;h3>Default Layout HTML App&lt;span class="hx:absolute hx:-mt-20" id="default-layout-html-app">&lt;/span>
&lt;a href="#default-layout-html-app" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>The default is &lt;code>custom_layout=False&lt;/code> meaning app developer has to provide only the HTML body, OpenRun will automatically generate the rest of the HTML. For using the auto generated HTML templates, the app has to be created in dev mode using the &lt;code>--dev&lt;/code> option.&lt;/p>
&lt;p>Create an &lt;code>~/myapp3/app.star&lt;/code> file containing&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;hello3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">routes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>and an &lt;code>~/myapp3/app.go.html&lt;/code> file containing&lt;/p>
&lt;!-- prettier-ignore -->
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.go.html&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{block &amp;#34;openrun_body&amp;#34; .}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hello world3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{end}}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;!-- prettier-ignore-end -->
&lt;p>Run &lt;code>openrun app create --auth=none --dev ~/myapp3 /hello3 &lt;/code>. After that, the app is available at &lt;code>/hello3&lt;/code>. Note that the &lt;code>--dev&lt;/code> option is required for the &lt;code>index_gen.go.html&lt;/code> file to be generated.&lt;/p>
&lt;p>There is only one route defined, for page /, which shows a HTML page with the name of the app. The body is generated from the contents of the app.go.html file. A more verbose way to write the same app config would be&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;hello3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">custom_layout&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">False&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">routes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">path&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;index_gen.go.html&amp;#34;&lt;/span>&lt;span class="p">)]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>Automatic Error Handling&lt;span class="hx:absolute hx:-mt-20" id="automatic-error-handling">&lt;/span>
&lt;a href="#automatic-error-handling" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>To enable &lt;a href="https://openrun.dev/docs/plugins/overview/#automatic-error-handling" >automatic error handling&lt;/a> (recommended), add an &lt;code>error_handler&lt;/code> function like:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">error_handler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">req&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">IsPartial&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ret&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">retarget&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;#error_div&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">reswap&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;innerHTML&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ret&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;error.go.html&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div></description></item><item><title>Plugin Overview</title><link>https://openrun.dev/docs/plugins/overview/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/plugins/overview/</guid><description>
&lt;p>Plugins provide an API for OpenRun Starlark code to call out to external systems. Plugins are implemented in Go. Every plugin API calls needs to be in the approved list for it to be permitted. See &lt;a href="https://openrun.dev/docs/applications/appsecurity/#sample-application/" >security&lt;/a> for an overview of the security model.&lt;/p>
&lt;p>Each plugin is identified by a unique name, like &lt;code>store.in&lt;/code> or &lt;code>exec.in&lt;/code>. Plugins ending with &lt;code>.in&lt;/code> are internal plugins, built into the OpenRun binary. Support for external plugins which are loaded dynamically is planned.&lt;/p>
&lt;h2>Plugin Usage&lt;span class="hx:absolute hx:-mt-20" id="plugin-usage">&lt;/span>
&lt;a href="#plugin-usage" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>To use a plugin, load it using&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;http.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;http&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>This adds &lt;code>http&lt;/code> to the namespace for the app. To make a call to the plugin, first add the permissions to the app config.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">permissions&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">permission&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;http.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;get&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">permission&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;http.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;post&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Run &lt;code>openrun app approve /myapp&lt;/code> to authorize the app to call the &lt;code>get&lt;/code> and &lt;code>post&lt;/code> methods on the http plugin.&lt;/p>
&lt;p>In the app handler code, do&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">SERVICE_URL&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;/api/challenge/&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">challenge_id&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ret&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">error&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;invalid_challenge_id&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">code&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">404&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>At runtime, OpenRun will check if the &lt;code>get&lt;/code> call is authorized. If so, the call to the plugin will be performed.&lt;/p>
&lt;h2>Response Handling&lt;span class="hx:absolute hx:-mt-20" id="response-handling">&lt;/span>
&lt;a href="#response-handling" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>All plugin API calls return a &lt;code>plugin_response&lt;/code> structure. The fields in this are&lt;/p>
&lt;ul>
&lt;li>&lt;code>error&lt;/code> The error message string, empty string if no error&lt;/li>
&lt;li>&lt;code>error_code&lt;/code> The error code integer, zero if no error&lt;/li>
&lt;li>&lt;code>value&lt;/code> The actual return value for the plugin API call. The datatype for this depends on the API, check the API documentation for details.&lt;/li>
&lt;/ul>
&lt;p>To check the error status of an API call:&lt;/p>
&lt;ul>
&lt;li>Check boolean value for the return. If false, that indicates an error which can be returned.&lt;/li>
&lt;li>If no error, get the &lt;code>value&lt;/code> property and continue with processing&lt;/li>
&lt;/ul>
&lt;p>For example,&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;https://localhost:9999/test&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># error condition&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ret&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;error_block&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ret&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="c1"># ret.value is the return value. The http plugin response has a json() function&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>An alternate way to write the error check is&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;https://localhost:9999/test&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">error&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># error condition&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ret&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;error_block&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Success&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ret&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">())&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>Automatic Error Handling&lt;span class="hx:absolute hx:-mt-20" id="automatic-error-handling">&lt;/span>
&lt;a href="#automatic-error-handling" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>OpenRun supports automatic error handling, so that the handler functions do not have to check the error status of every plugin API call. The way this is implemented is such that if no explicit error handling is done, then the automatic error handling kicks in. If explicit error handling is done, then automatic error handling is not done. See &lt;a href="https://github.com/openrundev/apps/blob/main/utils/bookmarks/app.star" target="_blank" rel="noopener">bookmarks app&lt;/a> for an example of how the automatic error handling can be used.&lt;/p>
&lt;p>If the &lt;code>error_handler&lt;/code> function is defined, then that is called with the error. The manual error checking works the same as mentioned above. But if no manual error checking is done, then the OpenRun platform will automatically call the &lt;code>error_handler&lt;/code> function in case of an error. The &lt;code>error_handler&lt;/code> could be defined as:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">error_handler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">req&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">IsPartial&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ret&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">retarget&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;#error_div&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">reswap&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;innerHTML&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ret&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;error.go.html&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>When no explicit error checks are done, the automatic error handling happens in these three cases:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Value Access&lt;/strong> When the response &lt;code>value&lt;/code> is accessed&lt;/li>
&lt;li>&lt;strong>Next API call&lt;/strong> When the next plugin API call happens (to any plugin function)&lt;/li>
&lt;li>&lt;strong>Handler Return&lt;/strong> When the handler function returns&lt;/li>
&lt;/ul>
&lt;h3>Value Access&lt;span class="hx:absolute hx:-mt-20" id="value-access">&lt;/span>
&lt;a href="#value-access" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>If the handler code is&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;https://localhost:9999/test&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ret&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">())&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>If the &lt;code>get&lt;/code> API had succeeded, then the &lt;code>value&lt;/code> property access will work as usual. But if the &lt;code>get&lt;/code> API had failed, then the &lt;code>value&lt;/code> access will fail and the &lt;code>error_handler&lt;/code> will be called with the original request and the error response.&lt;/p>
&lt;h3>Next API Call&lt;span class="hx:absolute hx:-mt-20" id="next-api-call">&lt;/span>
&lt;a href="#next-api-call" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>If the &lt;code>value&lt;/code> is not being accessed, then the next plugin call will raise the error. For example, if the handler code is&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">store&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">begin&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">bookmark&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">store&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">select_one&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">table&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bookmark&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;url&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">url&lt;/span>&lt;span class="p">})&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">value&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The response of the &lt;code>begin&lt;/code> API is not checked. When the next &lt;code>select_one&lt;/code> API is called, if the previous &lt;code>begin&lt;/code> had failed, the &lt;code>select_one&lt;/code> API will raise the previous API call&amp;rsquo;s error, the &lt;code>select_one&lt;/code> will not run.&lt;/p>
&lt;h3>Handler Return&lt;span class="hx:absolute hx:-mt-20" id="handler-return">&lt;/span>
&lt;a href="#handler-return" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>If the handler code is&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">insert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">store&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">begin&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">book&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">doc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bookmark&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;abc&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">store&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">insert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">table&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bookmark&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">book&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">store&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">commit&lt;/span>&lt;span class="p">()&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Assume all the API calls had succeeded and then the &lt;code>commit&lt;/code> fails. Since the &lt;code>value&lt;/code> is not accessed and there is no plugin API call after the &lt;code>commit&lt;/code> call, the OpenRun platform will raise the error after the handler completes since the &lt;code>commit&lt;/code> had failed.&lt;/p>
&lt;h3>Overriding Automatic Error Handling&lt;span class="hx:absolute hx:-mt-20" id="overriding-automatic-error-handling">&lt;/span>
&lt;a href="#overriding-automatic-error-handling" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>The automatic error handling is great for handling the unusual error scenarios. For the error scenarios which are common, like a database uniqueness check failure, the error handing can be done explicitly in the handler code. If the handler code is&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">store&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">insert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">table&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bookmark&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">new_bookmark&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">error&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ret&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;error.go.html&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The automatic error handling will not be invoked in this case since the &lt;code>ret.error&lt;/code> is being checked. Checking the truth status of &lt;code>ret&lt;/code> also will disable the automatic error handling:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">store&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">insert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">table&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bookmark&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">new_bookmark&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">error&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ret&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;error.go.html&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-blue-200 hx:bg-blue-100 hx:text-blue-900 hx:dark:border-blue-200/30 hx:dark:bg-blue-900/30 hx:dark:text-blue-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">ℹ️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">&lt;strong>Note:&lt;/strong> When developing a new app, first define the &lt;code>error_handler&lt;/code> and test it for the partial and full page scenarios. All subsequent handler code does not need to handle errors unless specific handling is required. If no &lt;code>error_handler&lt;/code> is defined, a generic error message screen is returned. If is recommended to define a custom &lt;code>error_handler&lt;/code>.&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2>Returning Errors from Functions&lt;span class="hx:absolute hx:-mt-20" id="returning-errors-from-functions">&lt;/span>
&lt;a href="#returning-errors-from-functions" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>For returning error values within Starlark code, a convenience &lt;code>ace.output&lt;/code> struct is available. If you have a function in Starlark which can return success or an error, use &lt;code>ace.output&lt;/code>.&lt;/p>
&lt;p>The fields in the &lt;code>ace.output&lt;/code> structure are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">Property&lt;/th>
&lt;th style="text-align: center">Optional&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Default&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">value&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">any&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The return value&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">error&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The error message&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>If a function &lt;code>f1&lt;/code> returns an error value, using &lt;code>return ace.output(error=&amp;quot;mymessage&amp;quot;)&lt;/code>, the caller will automatically fail when it tries to access the return value using &lt;code>f1().value&lt;/code>. To do custom error handling, do&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>ret = f1()
if not ret:
return &amp;#34;Call failed: &amp;#34; &amp;#43; ret.error&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>Plugin Accounts&lt;span class="hx:absolute hx:-mt-20" id="plugin-accounts">&lt;/span>
&lt;a href="#plugin-accounts" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Some plugins like &lt;code>exec.in&lt;/code> do not require any account information. Others like &lt;code>store.in&lt;/code> need some account information. The account configuration for a plugin is loaded from the OpenRun config file &lt;code>openrun.toml&lt;/code>. For example, the default configuration for &lt;code>store.in&lt;/code> is &lt;a href="https://github.com/openrundev/openrun/blob/e5ab0c1139d257c7f02fbe03d060a6bfe1b5f605/internal/system/openrun.default.toml#L54" target="_blank" rel="noopener">here&lt;/a>, which contains:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">plugin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="s2">&amp;#34;store.in&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">db_connection&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;sqlite:$OPENRUN_HOME/openrun_app.db&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Any application using the &lt;code>store.in&lt;/code> plugin will by default use the &lt;code>$OPENRUN_HOME/openrun_app.db&lt;/code> sqlite database. To change the default account config used by apps, update &lt;code>openrun.toml&lt;/code> and restart the OpenRun server. For example, adding the below will overwrite the default &lt;code>store.in&lt;/code> config for all apps.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">plugin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="s2">&amp;#34;store.in&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">db_connection&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;sqlite:/tmp/openrun_app.db&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h3>Account Linking&lt;span class="hx:absolute hx:-mt-20" id="account-linking">&lt;/span>
&lt;a href="#account-linking" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>If specific account config is required for an app, then the app can be linked to a specific account config. First add a new account config by adding in &lt;code>openrun.toml&lt;/code>&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">plugin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="s2">&amp;#34;store.in#tmpaccount&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">db_connection&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;sqlite:/tmp/openrun_app.db&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>For an app &lt;code>/myapp&lt;/code> using &lt;code>store.in&lt;/code>, run &lt;code>openrun account link --promote /myapp store.in tmpaccount&lt;/code>&lt;/p>
&lt;p>This links the &lt;code>myapp&lt;/code> app to use the &lt;code>tmpaccount&lt;/code> account.&lt;/p>
&lt;h3>Named Account&lt;span class="hx:absolute hx:-mt-20" id="named-account">&lt;/span>
&lt;a href="#named-account" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>In addition to using account linking, the plugin code itself can point to specific accounts. For example, if the app code has&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;http.in#google&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;googlehttp&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>then the app will use the &lt;code>http.in#google&lt;/code> account config by default. This also can be overridden using account links, by
running &lt;code>openrun account link --promote /myapp http.in#google myaccount&lt;/code>&lt;/p>
&lt;p>This approach is useful if an app has to access multiple accounts for the same plugin. The account linking approach is recommended for normal scenarios.&lt;/p>
&lt;p>OpenRun apps aim to be portable across installations, without requiring code changes. Using account config allows the app code to be independent of the installation specific account config.&lt;/p></description></item><item><title>Application Lifecycle</title><link>https://openrun.dev/docs/applications/lifecycle/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/applications/lifecycle/</guid><description>
&lt;h2>Application Types&lt;span class="hx:absolute hx:-mt-20" id="application-types">&lt;/span>
&lt;a href="#application-types" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>A OpenRun application can be one of four types:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Development Apps&lt;/strong> : Used for developing apps, supports live reload from code change on disk.&lt;/li>
&lt;li>&lt;strong>Production Apps&lt;/strong> : For production use. Can be created from git hosted source or from sources on local disk.&lt;/li>
&lt;li>&lt;strong>Staging Apps&lt;/strong> : For reviewing code and config changes before they are pushed to prod. Every prod app has one staging app.&lt;/li>
&lt;li>&lt;strong>Preview Apps&lt;/strong> : For creating a review environment for code changes, useful as part of code review.&lt;/li>
&lt;/ul>
&lt;h2>Development Apps&lt;span class="hx:absolute hx:-mt-20" id="development-apps">&lt;/span>
&lt;a href="#development-apps" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Development mode apps are used for developing or updating OpenRun apps. The source for these apps has to be on local disk, it cannot be git. Any code or config changes are live reloaded immediately for dev apps. To create a dev mode app, add the &lt;code>--dev&lt;/code> option to the &lt;code>app create&lt;/code> command. For example,&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app create --dev --approve /home/user/mycode /myapp&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>Production Apps&lt;span class="hx:absolute hx:-mt-20" id="production-apps">&lt;/span>
&lt;a href="#production-apps" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Without the &lt;code>--dev&lt;/code> options, apps are created as production apps by default. Production apps can be created from source on GitHub or from local disk. In either case, the source code for the app is uploaded to the OpenRun metadata database. For example:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app create --approve /home/user/mycode example.com:/&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>creates an production app. After app creation, the original source location is not read, until a &lt;code>app reload&lt;/code> operation is done to update the sources. The source folder &lt;code>/home/user/mycode&lt;/code> can be deleted if reload is not required, since the sources are present in the OpenRun metadata database. Every production app automatically has one staging app associated with it.&lt;/p>
&lt;h2>Staging Apps&lt;span class="hx:absolute hx:-mt-20" id="staging-apps">&lt;/span>
&lt;a href="#staging-apps" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Staging apps are created for each production app. The purpose of staging app is to be able to verify config and code changes before they are made live in the prod app. For example, after the previous &lt;code>app create&lt;/code> command, a call to &lt;code>app list&lt;/code> with the &lt;code>--internal&lt;/code> option will show two apps:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app list --internal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Id Type Version GitCommit GitBranch Domain:Path SourceUrl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2aMvX3fc9fH18n6i2Jew0tNxnky PROD &lt;span class="m">1&lt;/span> example.com:/ /home/user/mycode
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_stg_2aMvX3fc9fH18n6i2Jew0tNxnky STG &lt;span class="m">1&lt;/span> example.com:/_cl_stage /home/user/mycode&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The second app is the staging app for the first. &lt;code>app list&lt;/code> shows only the main apps by default, the &lt;code>--internal&lt;/code> option makes it show the linked apps.&lt;/p>
&lt;p>The staging app url is available by suffixing &lt;code>_cl_stage&lt;/code> at the end of the app path. So for an app at &lt;code>https://example.com/&lt;/code>, the staging url is &lt;code>https://example.com/cl_stage&lt;/code>. For an app at &lt;code>https://example.com/utils/app1&lt;/code>, the staging app url is &lt;code>https://example.com/utils/app1_cl_stage&lt;/code>.&lt;/p>
&lt;h2>Promoting Changes&lt;span class="hx:absolute hx:-mt-20" id="promoting-changes">&lt;/span>
&lt;a href="#promoting-changes" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>When there are code changes, running &lt;code>app reload&lt;/code> will update the staging environment.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app reload example.com:/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Reloaded apps: example.com:/_cl_stage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">1&lt;/span> app&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span> reloaded, &lt;span class="m">0&lt;/span> app&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span> approved, &lt;span class="m">0&lt;/span> app&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span> promoted.&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The staging app is version 2 now, prod app is still at version 1.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app list -i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Id Type Version GitCommit GitBranch Domain:Path SourceUrl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2aMvX3fc9fH18n6i2Jew0tNxnky PROD* &lt;span class="m">1&lt;/span> example.com:/ /home/user/mycode
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_stg_2aMvX3fc9fH18n6i2Jew0tNxnky STG &lt;span class="m">2&lt;/span> example.com:/_cl_stage /home/user/mycode&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>At this point, going to the url &lt;code>example.com:/_cl_stage&lt;/code> will show the updated code while &lt;code>example.com:/&lt;/code> has not been updated.&lt;/p>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-blue-200 hx:bg-blue-100 hx:text-blue-900 hx:dark:border-blue-200/30 hx:dark:bg-blue-900/30 hx:dark:text-blue-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">ℹ️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">The &lt;code>*&lt;/code> next to PROD indicates that there are staged changes waiting to be promoted to PROD.&lt;/div>
&lt;/div>
&lt;/div>
&lt;p>To promote the changes to prod, run &lt;code>app promote&lt;/code>&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app promote example.com:/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Promoting example.com:/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">1&lt;/span> app&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span> promoted.&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The prod app is at the same version as the staging app now&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app list -i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Id Type Version GitCommit GitBranch Domain:Path SourceUrl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2aMvX3fc9fH18n6i2Jew0tNxnky PROD &lt;span class="m">2&lt;/span> example.com:/ /home/user/mycode
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_stg_2aMvX3fc9fH18n6i2Jew0tNxnky STG &lt;span class="m">2&lt;/span> example.com:/_cl_stage /home/user/mycode&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>If the application code change requires new permissions, the reload operation will fail unless &lt;code>--approve&lt;/code> is added.&lt;/p>
&lt;p>To do the reload, approval and promotion is one step, do &lt;code>openrun app reload --approve --promote example.com:/&lt;/code>.&lt;/p>
&lt;h2>GitHub Reload&lt;span class="hx:absolute hx:-mt-20" id="github-reload">&lt;/span>
&lt;a href="#github-reload" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The rules for fetching source code from local disk and GitHub are:&lt;/p>
&lt;ul>
&lt;li>If the source url starts with &lt;code>http://&lt;/code>, &lt;code>https://&lt;/code> or &lt;code>github.com&lt;/code>, the source is assumed to be from a github API endpoint. Otherwise the source is assumed to be local disk on the OpenRun server.&lt;/li>
&lt;li>If OpenRun client and server are on different machines and local disk is being used, the code needs to be copied to the server node first.&lt;/li>
&lt;li>For GitHub source, the format is https://domain_name/org_name/repo_name/sub/folder, like &lt;code>github.com/openrundev/openrun/examples/disk_usage&lt;/code>. The sub_folder should contain the &lt;code>app.star&lt;/code> config file.&lt;/li>
&lt;li>During &lt;code>app create&lt;/code> and &lt;code>app reload&lt;/code>, the commit id takes precedence over the branch name if both are specified.&lt;/li>
&lt;li>During &lt;code>app reload&lt;/code>, if no branch and commit are specified, the newest code is checked out from the current branch. &lt;code>main&lt;/code> is used as current branch if no branch was previously specified for the app.&lt;/li>
&lt;/ul>
&lt;h2>Preview Apps&lt;span class="hx:absolute hx:-mt-20" id="preview-apps">&lt;/span>
&lt;a href="#preview-apps" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Preview allows the creation of any number of linked preview apps for a main app. This is supported for apps created from GitHub source. The commit id to use needs to be specified when creating the preview. For example,&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun preview create 49182d4ca1cacbd8e3463a77c2174a6da1fb66c9 /myapp&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>creates an app accessible at &lt;code>/myapp_cl_preview_49182d4ca1cacbd8e3463a77c2174a6da1fb66c9&lt;/code> which runs the app code in the specified commit id.&lt;/p>
&lt;p>Preview apps cannot be changed once they are created. If preview app requires new permissions, add the &lt;code>--approve&lt;/code> option to the &lt;code>preview create&lt;/code> command.&lt;/p>
&lt;h2>Write Mode Access&lt;span class="hx:absolute hx:-mt-20" id="write-mode-access">&lt;/span>
&lt;a href="#write-mode-access" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Staging and Preview apps have read only access by default to plugin APIs. This means that when they make calls to plugin APIs, only APIs defined as READ by the plugin are permitted. The HTTP plugin defines GET/OPTIONS/HEAD requests as READ type, POST/PUT/DELETE are defined as WRITE. For the CLI Exec plugin, the run API is defined as WRITE since the CLI command run might do write operations.&lt;/p>
&lt;p>For cases where the plugin defines an API as Write, the app permission can overwrite the default type and define the operation to be a READ operation. For example, the disk_usage app runs the &lt;code>du&lt;/code> command, which is a read operation. The &lt;a href="https://github.com/openrundev/openrun/blob/49182d4ca1cacbd8e3463a77c2174a6da1fb66c9/examples/disk_usage/app.star#L45" target="_blank" rel="noopener">app config defines&lt;/a> the run plugin call as &lt;code>type=&amp;quot;READ&amp;quot;&lt;/code>, over-riding the default WRITE type defined in the plugin. If no type is specified in the permission, the type defined in the plugin takes effect.&lt;/p>
&lt;p>Staging and Preview apps are allowed only READ calls by default, even if the app permissions allow WRITE operations. To allow stage apps access to WRITE operations, run &lt;code>openrun app update-settings stage-write-access true all&lt;/code>. Change &lt;code>all&lt;/code> to the desired app glob pattern.&lt;/p>
&lt;p>To allow preview apps access to WRITE operation, run &lt;code>openrun app update-settings preview-write-access true example.com:/&lt;/code>. This changes the existing preview apps and any new preview apps created for example.com:/ to allow write operations, if the permissions have been approved.&lt;/p></description></item><item><title>Container Config</title><link>https://openrun.dev/docs/container/config/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/container/config/</guid><description>
&lt;p>The default configuration for the OpenRun server is defined &lt;a href="https://github.com/openrundev/openrun/blob/main/internal/system/openrun.default.toml" target="_blank" rel="noopener">here&lt;/a>. The container related config settings are&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">app_config&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># Health check Config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">container&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">health_url&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">container&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">health_attempts_after_startup&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">30&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">container&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">health_timeout_secs&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># Idle Shutdown Config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">container&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">idle_shutdown_secs&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">180&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">container&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">idle_shutdown_dev_apps&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c"># Status check Config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">container&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">status_check_interval_secs&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">container&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">status_health_attempts&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">3&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>A health check is done on the container after container is started. If the health check fails 30 times, the container is assumed to be down.&lt;/p>
&lt;p>In the running state, a status check is done on the app every five seconds. If three of those checks fail, then the container is assumed to be down.&lt;/p>
&lt;p>If an app does not receive any API request for 180 seconds, the app is assumed to be idle and the container is stopped. The idle shutdown does not apply for dev apps, only for prod mode apps.&lt;/p>
&lt;h2>Changing Config&lt;span class="hx:absolute hx:-mt-20" id="changing-config">&lt;/span>
&lt;a href="#changing-config" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The &lt;code>openrun.toml&lt;/code> can be updated to have a different value for any of the properties. After the server restart, the config change will apply for all apps.&lt;/p>
&lt;p>To apply the config at the app level, the app metadata can be updated. For example the command&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app update-metadata conf --promote container.idle_shutdown_secs&lt;span class="o">=&lt;/span>&lt;span class="m">600&lt;/span> /myapp&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>changes the idle timeout for the &lt;code>/myapp&lt;/code> app to 600 secs. Without the &lt;code>--promote&lt;/code> option, the change will be staged and can be verified on the staging app. App metadata level setting take precedence over the defaults in the &lt;code>openrun.toml&lt;/code>. Using &lt;code>all&lt;/code> as the app name will apply the change for all current apps (but not for any new apps created later).&lt;/p>
&lt;h2>Docker/Podman&lt;span class="hx:absolute hx:-mt-20" id="dockerpodman">&lt;/span>
&lt;a href="#dockerpodman" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The default for the container command to use is&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">system&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">container_command&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;auto&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>&lt;code>auto&lt;/code> means that OpenRun will look for &lt;code>podman&lt;/code> in the path. If found, it will use that. Else it will use &lt;code>docker&lt;/code> as the container manager command. If the value for &lt;code>container_command&lt;/code> is set to any other value, that will be used as the command to use.&lt;/p>
&lt;p>Orbstack implements the Docker CLI interface, so Orbstack also works fine with OpenRun.&lt;/p></description></item><item><title>Plugin Catalog</title><link>https://openrun.dev/docs/plugins/catalog/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/plugins/catalog/</guid><description>
&lt;p>The page lists the available plugins and their API details.&lt;/p>
&lt;h2>Database Storage&lt;span class="hx:absolute hx:-mt-20" id="database-storage">&lt;/span>
&lt;a href="#database-storage" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The &lt;code>store.in&lt;/code> plugin supports a document store interface for writing data to SQLite. See &lt;a href="https://openrun.dev/docs/plugins/store/" >store&lt;/a> for details.&lt;/p>
&lt;h2>Container Config&lt;span class="hx:absolute hx:-mt-20" id="container-config">&lt;/span>
&lt;a href="#container-config" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The &lt;code>container.in&lt;/code> plugin supports configuring for using a container for deploying backend APIs. See &lt;a href="https://openrun.dev/docs/plugins/container/" >container&lt;/a> for details.&lt;/p>
&lt;h2>Proxy Config&lt;span class="hx:absolute hx:-mt-20" id="proxy-config">&lt;/span>
&lt;a href="#proxy-config" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The &lt;code>proxy.in&lt;/code> plugin supports proxying API calls to deploying backend APIs. See &lt;a href="https://openrun.dev/docs/plugins/proxy/" >proxy&lt;/a> for details.&lt;/p>
&lt;h2>HTTP Plugin&lt;span class="hx:absolute hx:-mt-20" id="http-plugin">&lt;/span>
&lt;a href="#http-plugin" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;h3>get,head,options,post,put,delete,patch&lt;span class="hx:absolute hx:-mt-20" id="getheadoptionspostputdeletepatch">&lt;/span>
&lt;a href="#getheadoptionspostputdeletepatch" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>The &lt;code>http.in&lt;/code> plugin supports making HTTP API calls. The APIs available are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">API&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>get&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Read&lt;/td>
&lt;td style="text-align: center">HTTP Get request&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>head&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Read&lt;/td>
&lt;td style="text-align: center">HTTP Head request&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>options&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Read&lt;/td>
&lt;td style="text-align: center">HTTP Options request&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>post&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Write&lt;/td>
&lt;td style="text-align: center">HTTP Post request&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>put&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Write&lt;/td>
&lt;td style="text-align: center">HTTP Put request&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>delete&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Write&lt;/td>
&lt;td style="text-align: center">HTTP Delete request&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>patch&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Write&lt;/td>
&lt;td style="text-align: center">HTTP Patch request&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>All the API&amp;rsquo;s support the following parameters:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>url&lt;/strong> (string, required) : the url to send the request to&lt;/li>
&lt;li>&lt;strong>params&lt;/strong> (dict, optional) : url params to send&lt;/li>
&lt;li>&lt;strong>headers&lt;/strong> (dict, optional) : HTTP headers to send&lt;/li>
&lt;li>&lt;strong>body&lt;/strong> (string, optional) : body to send&lt;/li>
&lt;li>&lt;strong>form_body&lt;/strong> (dict, optional) : form body to send&lt;/li>
&lt;li>&lt;strong>form_encoding&lt;/strong> (string, optional) : the form encoding to use, &lt;code>application/x-www-form-urlencoded&lt;/code> (default) or &lt;code>multipart/form-data&lt;/code>&lt;/li>
&lt;li>&lt;strong>json_body&lt;/strong> (object, optional) : the object to send as json encoded body&lt;/li>
&lt;li>&lt;strong>auth_basic&lt;/strong> (tuple(string, string), optional): HTTP basic auth username and password&lt;/li>
&lt;li>&lt;strong>auth_signature&lt;/strong> (string, optional): Signature auth type&lt;/li>
&lt;li>&lt;strong>error_on_fail&lt;/strong> (bool, optional): Whether to fail on non-2xx status code, default true&lt;/li>
&lt;/ul>
&lt;p>The response for all API&amp;rsquo;s (&lt;code>value&lt;/code> within &lt;code>plugin_response&lt;/code>) contains following properties:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>url&lt;/strong> (string): the url the response is for&lt;/li>
&lt;li>&lt;strong>status_code&lt;/strong> (int): the HTTP status code&lt;/li>
&lt;li>&lt;strong>headers&lt;/strong> (dict): the output headers&lt;/li>
&lt;li>&lt;strong>encoding&lt;/strong> (string): the transfer encoding header&lt;/li>
&lt;li>&lt;strong>body()&lt;/strong> (string) : the response body as a string&lt;/li>
&lt;li>&lt;strong>json()&lt;/strong> (object) : the response body un-marshalled as a json&lt;/li>
&lt;/ul>
&lt;p>If the API calls fails to go through then the plugin response &lt;code>error&lt;/code> property will be set. If the API returns non 2xx status code, error is set (unless &lt;code>error_on_fail&lt;/code> is False). The &lt;code>status_code&lt;/code> will indicate whether the API succeeded on the server. To make an API call and parse the response as JSON, do&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;http://localhost:9999/test&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">()&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>Exec Plugin&lt;span class="hx:absolute hx:-mt-20" id="exec-plugin">&lt;/span>
&lt;a href="#exec-plugin" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;h3>run&lt;span class="hx:absolute hx:-mt-20" id="run">&lt;/span>
&lt;a href="#run" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>The &lt;code>exec.in&lt;/code> plugin allows running external commands, starting a new process for the specified command. The APIs available are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">API&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>run&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Read/Write&lt;/td>
&lt;td style="text-align: center">Runs the command as a new process&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>The API supports the following parameters:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>path&lt;/strong> (string, required) : the command to run&lt;/li>
&lt;li>&lt;strong>args&lt;/strong> (list of strings, optional) : arguments to pass to the cmd&lt;/li>
&lt;li>&lt;strong>env&lt;/strong> (list of strings, optional) : the env to pass to the cmd, in the form &lt;code>key=value&lt;/code>&lt;/li>
&lt;li>&lt;strong>process_partial&lt;/strong> (bool, optional) : whether to process the output when there is a failure&lt;/li>
&lt;li>&lt;strong>stdout_file&lt;/strong> (bool, optional) : whether to send the stdout for the process to a temporary file on disk&lt;/li>
&lt;li>&lt;strong>parse&lt;/strong> (string, optional) : Whether to parse the stdout. Supported options are &lt;code>json&lt;/code> and &lt;code>jsonlines&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>The default response (when &lt;code>stdout_file&lt;/code> is &lt;code>False&lt;/code>) for the &lt;code>exec&lt;/code> API (&lt;code>value&lt;/code> within &lt;code>plugin_response&lt;/code>) is of type list of strings. The stdout is scanned and split on newlines. The list of lines is returned. For example&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">exec&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ls&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;-l&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">process_partial&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">error&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;Error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">error&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">line&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Process lines&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-yellow-100 hx:bg-yellow-50 hx:text-yellow-900 hx:dark:border-yellow-200/30 hx:dark:bg-yellow-700/30 hx:dark:text-yellow-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">⚠️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">&lt;strong>Note:&lt;/strong> Only first 100MB of the command stdout output is scanned currently, the rest is discarded.&lt;/div>
&lt;/div>
&lt;/div>
&lt;p>If &lt;code>stdout_file&lt;/code> is &lt;code>True&lt;/code>, then the plugin output &lt;code>value&lt;/code> is the name for the temp file to which the output was written. There is no size limit on this file output. The user is responsible for deleting this file.&lt;/p>
&lt;h2>FS Plugin&lt;span class="hx:absolute hx:-mt-20" id="fs-plugin">&lt;/span>
&lt;a href="#fs-plugin" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The &lt;code>fs.in&lt;/code> allows working with local file system. The APIs available are&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">API&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>abs&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Read&lt;/td>
&lt;td style="text-align: center">Returns the absolute path for given relative path&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>list&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Read&lt;/td>
&lt;td style="text-align: center">List files in specified directory&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>find&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Read&lt;/td>
&lt;td style="text-align: center">Find files under specified directory matching criteria&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>serve_tmp_file&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Read&lt;/td>
&lt;td style="text-align: center">Load file metadata to the OpenRun database and make available through API&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3>abs&lt;span class="hx:absolute hx:-mt-20" id="abs">&lt;/span>
&lt;a href="#abs" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>The &lt;code>abs&lt;/code> API supports the following parameter:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>path&lt;/strong> (string, required) : the file path&lt;/li>
&lt;/ul>
&lt;p>The response for the API (&lt;code>value&lt;/code> within &lt;code>plugin_response&lt;/code>) is of type string, the absolute path for given path.&lt;/p>
&lt;h3>list&lt;span class="hx:absolute hx:-mt-20" id="list">&lt;/span>
&lt;a href="#list" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>The &lt;code>list&lt;/code> API supports the following parameters:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>path&lt;/strong> (string, required) : the directory path&lt;/li>
&lt;li>&lt;strong>recursive_size&lt;/strong> (bool, optional, default false) : whether to include the recursive size of sub-directories&lt;/li>
&lt;li>&lt;strong>ignore_errors&lt;/strong> (bool, optional, default false) : whether to ignore errors when accessing entries&lt;/li>
&lt;/ul>
&lt;p>The response for the API is a list of type &lt;code>FileInfo&lt;/code>. The &lt;code>FileInfo&lt;/code> struct contains the fields:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>name&lt;/strong> (string) : the file name&lt;/li>
&lt;li>&lt;strong>size&lt;/strong> (int) : the file size in bytes, rounded up to 4K&lt;/li>
&lt;li>&lt;strong>is_dir&lt;/strong> (bool) : is it a directory&lt;/li>
&lt;li>&lt;strong>mode&lt;/strong> (int) : file mode info&lt;/li>
&lt;/ul>
&lt;h3>find&lt;span class="hx:absolute hx:-mt-20" id="find">&lt;/span>
&lt;a href="#find" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>The &lt;code>find&lt;/code> API supports the following parameters:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>path&lt;/strong> (string, required) : the directory path&lt;/li>
&lt;li>&lt;strong>name&lt;/strong> (string, optional) : the file name glob pattern to match&lt;/li>
&lt;li>&lt;strong>limit&lt;/strong> (int, optional, default 10K, max 100K) : the limit on number of entries to return&lt;/li>
&lt;li>&lt;strong>min_size&lt;/strong> (int, optional) : the minimum file size in bytes to look for&lt;/li>
&lt;li>&lt;strong>ignore_errors&lt;/strong> (bool, optional, default false) : whether to ignore errors when accessing entries&lt;/li>
&lt;/ul>
&lt;p>The response for the &lt;code>find&lt;/code> API is a list of type &lt;code>FileInfo&lt;/code>, same as returned by &lt;code>list&lt;/code>.&lt;/p>
&lt;h3>serve_tmp_file&lt;span class="hx:absolute hx:-mt-20" id="serve_tmp_file">&lt;/span>
&lt;a href="#serve_tmp_file" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>The &lt;code>serve_tmp_file&lt;/code> API supports the following parameters:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>path&lt;/strong> (string, required) : the file path to serve&lt;/li>
&lt;li>&lt;strong>name&lt;/strong> (string, optional, default basename of path) : the file name to use (when serving the API)&lt;/li>
&lt;li>&lt;strong>visibility&lt;/strong> (string, optional, default &lt;code>fs.USER&lt;/code>) : the API access level for the file (&lt;code>fs.USER&lt;/code> or &lt;code>fs.APP&lt;/code>)&lt;/li>
&lt;li>&lt;strong>mime_type&lt;/strong> (string, optional, default &lt;code>application/octet-stream&lt;/code>) : the mime type to use when serving the file&lt;/li>
&lt;li>&lt;strong>expiry_minutes&lt;/strong> (int, optional, default 60 minutes) : how long to keep the file metadata, set to zero for no deletion&lt;/li>
&lt;li>&lt;strong>single_access&lt;/strong> (bool, optional, default &lt;code>True&lt;/code>) : whether to serve the file just once and then automatically delete it&lt;/li>
&lt;/ul>
&lt;p>The response for the &lt;code>serve_tmp_file&lt;/code> API is a dict with the fields:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>id&lt;/strong> (string) : the id of the metadata entry&lt;/li>
&lt;li>&lt;strong>url&lt;/strong> (string) : the url path (without domain) for downloading the file&lt;/li>
&lt;li>&lt;strong>name&lt;/strong> (string) : the file name&lt;/li>
&lt;/ul>
&lt;p>The &lt;code>serve_tmp_file&lt;/code> API creates a metadata entry in the OpenRun database. The file can be served through an API using this entry. The default behavior is the file is accessible only to the user who created it. First download of the file will serve the file and automatically deletes the file. The file is deleted after 60 minutes in case there is no API access before that. Deleting the metadata entry removes the database entry and &lt;strong>also deletes the file from disk&lt;/strong>. If the file should not be deleted, do:&lt;/p>
&lt;p>&lt;code>ret = fs.serve_tmp_file(&amp;quot;/tmp/myfile&amp;quot;, single_access=False, expiry_minutes=0)&lt;/code>&lt;/p>
&lt;p>See number_lines app &lt;a href="https://github.com/openrundev/apps/blob/main/misc/num_lines/app.star" target="_blank" rel="noopener">code&lt;/a>:&lt;a href="https://utils.demo.clace.io/num_lines" target="_blank" rel="noopener">demo&lt;/a> for an example of using this API. Setting &lt;code>visibility&lt;/code> to &lt;code>fs.APP&lt;/code> will make the API available to anyone who has access to the app.&lt;/p></description></item><item><title>Ports and Certificates</title><link>https://openrun.dev/docs/configuration/networking/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/configuration/networking/</guid><description>
&lt;h2>HTTP&lt;span class="hx:absolute hx:-mt-20" id="http">&lt;/span>
&lt;a href="#http" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>For HTTP requests, by default the OpenRun service listens on port 25222, on the localhost(127.0.0.1) interface. This means the HTTP port can be accessed from the same machine, it cannot be accessed remotely. To configure this, update the config file&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">host&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;127.0.0.1&amp;#34;&lt;/span> &lt;span class="c"># bind to localhost by default for HTTP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">port&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">25222&lt;/span> &lt;span class="c"># default port for HTTP&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>to desired values. Port 0 means bind to any available port. Port -1 means disable HTTP access. Use host as &lt;code>0.0.0.0&lt;/code> to bind to all available interfaces.&lt;/p>
&lt;h2>HTTPS&lt;span class="hx:absolute hx:-mt-20" id="https">&lt;/span>
&lt;a href="#https" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>For HTTPS requests, the OpenRun service listens on port 25223 by default, on the any(0.0.0.0) interface. This means the HTTPS port can be accessed from the same machine and also remotely. The various HTTPS config settings are:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># HTTPS port binding related Config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">https&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">host&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;0.0.0.0&amp;#34;&lt;/span> &lt;span class="c"># bind to all interfaces (if port is &amp;gt;= 0)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">port&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">25223&lt;/span> &lt;span class="c"># port for HTTPS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">enable_cert_lookup&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="c"># enable looking for domain specific certificate files on disk&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">service_email&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="c"># email address for registering with Let&amp;#39;s Encrypt. Set a value to enable automatic certs&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">use_staging&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="c"># use Let&amp;#39;s Encrypt staging server&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cert_location&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;$OPENRUN_HOME/config/certificates&amp;#34;&lt;/span> &lt;span class="c"># where to look for existing certificate files&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">storage_location&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;$OPENRUN_HOME/run/certmagic&amp;#34;&lt;/span> &lt;span class="c"># where to cache dynamically created certificates&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Port 0 means bind to any available port. Port -1 means disable HTTPS access.&lt;/p>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-blue-200 hx:bg-blue-100 hx:text-blue-900 hx:dark:border-blue-200/30 hx:dark:bg-blue-900/30 hx:dark:text-blue-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">ℹ️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">Using the HTTPS port is recommended even for the local environment. HTTP/2 works with HTTPS only. Server Sent Events (SSE) are used by OpenRun for live reload of dev apps, &lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events#listening_for_custom_events" target="_blank" rel="noopener">SSE works best with HTTP/2&lt;/a>. Without HTTP/2, there can be connection limit issues with HTTP causing connections from browser to OpenRun server to hang.&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2>TLS Certificates&lt;span class="hx:absolute hx:-mt-20" id="tls-certificates">&lt;/span>
&lt;a href="#tls-certificates" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>In the default configuration, where service_email is empty, certmagic integration is disabled. The certificate handling behavior is:&lt;/p>
&lt;ul>
&lt;li>&lt;code>$OPENRUN_HOME/config/certificates&lt;/code> is looked up for a crt and key file in the PEM format matching the domain name as passed to the server. If a matching certificate is found, that is used.&lt;/li>
&lt;li>If no domain specific certificate is found, then the default certificate &lt;code>default.crt&lt;/code> and &lt;code>default.key&lt;/code> are looked up. If found, that is used.&lt;/li>
&lt;li>If default certificate is not found, then a self-signed default certificate is auto created in the certificates folder.&lt;/li>
&lt;/ul>
&lt;p>The intent is to allow custom certificates to be placed in the certificate folder, which will be used. If not found, a self-signed certificate is created and used. For example, if files example.com.crt and example.com.key are found in the certificates folder, those are used for example.com domain.&lt;/p>
&lt;h2>Redirect from HTTP to HTTPS&lt;span class="hx:absolute hx:-mt-20" id="redirect-from-http-to-https">&lt;/span>
&lt;a href="#redirect-from-http-to-https" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>To enable automatic redirect from HTTP to HTTPS, add &lt;code>redirect_to_https = true&lt;/code> in the &lt;code>http&lt;/code> section of the config. Also, change the &lt;code>host&lt;/code> to &lt;code>0.0.0.0&lt;/code>. For example,&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">http&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">host&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;0.0.0.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">port&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">redirect_to_https&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>All requests to the HTTP port will 308 redirect to the HTTPS port.&lt;/p>
&lt;h2>Dev Env Certificates&lt;span class="hx:absolute hx:-mt-20" id="dev-env-certificates">&lt;/span>
&lt;a href="#dev-env-certificates" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>For local dev environment, using the auto generated certs will result in browser warnings when connecting to the HTTPS port. To avoid this, if &lt;a href="https://github.com/FiloSottile/mkcert" target="_blank" rel="noopener">mkcert&lt;/a> is installed and configured, OpenRun automatically creates a mkcert cert for any new local domain. Ensure that the mkcert installation has been done once.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">mkcert -install&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>Enable Automatic Signed Certificate&lt;span class="hx:absolute hx:-mt-20" id="enable-automatic-signed-certificate">&lt;/span>
&lt;a href="#enable-automatic-signed-certificate" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>OpenRun uses the &lt;a href="https://github.com/caddyserver/certmagic" target="_blank" rel="noopener">certmagic&lt;/a> library for fully-managed TLS certificate issuance and renewal for production deployment. Certmagic is disabled by default. To enable, the pre-requisites are:&lt;/p>
&lt;ul>
&lt;li>The https config is using 443 as the port number. Running on privileged ports requires additional &lt;a href="#privileged-ports" >setup&lt;/a>&lt;/li>
&lt;li>There is an DNS entry created pointing your host name or domain wildcard to the IP address of the host running the OpenRun server. This has to be done in your DNS provider config.&lt;/li>
&lt;li>Port 443 is reachable from the public internet. This has to be done in your infrastructure provider network settings.&lt;/li>
&lt;/ul>
&lt;p>Once the pre-requisites are met, set the &lt;code>service_email&lt;/code> config parameter to your email address. This enables certmagic based certificate creation. The config will look like:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># HTTPS port binding related Config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">https&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">host&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;0.0.0.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">port&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">enable_cert_lookup&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="c"># enable looking for domain specific certificate files on disk&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">service_email&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;MY_EMAIL@example.com&amp;#34;&lt;/span> &lt;span class="c"># CHANGE to your email address&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">use_staging&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span> &lt;span class="c"># CHANGE to false for production&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">cert_location&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;$OPENRUN_HOME/config/certificates&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">storage_location&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;$OPENRUN_HOME/run/certmagic&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Test out the certificate creation by sending HTTPS requests to port 443. If the certificate is getting created, change &lt;code>use_staging&lt;/code> to false. Let&amp;rsquo;s Encrypt has strict rate limits, use the staging config to ensure that the pre-requisites are met before using the production config.&lt;/p>
&lt;p>With this config, certmagic is used to create certificates for all HTTPS requests. Self signed certificates and enable_cert_lookup property are not used when certmagic is enabled.&lt;/p>
&lt;h2>Default Domain&lt;span class="hx:absolute hx:-mt-20" id="default-domain">&lt;/span>
&lt;a href="#default-domain" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The config has the default domain set to &lt;code>localhost&lt;/code> by default. The default domain is used for any app which is installed without an explicit domain being specified. This can be changed to the required value when configuring the server.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">system&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">default_domain&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;localhost&amp;#34;&lt;/span> &lt;span class="c"># default domain for apps&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The list_app app is served at the default domain root level if no app is installed there.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">system&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">root_serve_list_apps&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;auto&amp;#34;&lt;/span> &lt;span class="c"># &amp;#34;auto&amp;#34; means serve list_apps app for default domain, &amp;#34;disable&amp;#34; means don&amp;#39;t server for any domain,&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>To disable this, set &lt;code>root_serve_list_apps&lt;/code> to &lt;code>disable&lt;/code>. The list apps app uses the default authentication as set for the system. If another domain needs to be used, set the value to that.&lt;/p>
&lt;p>The list_apps app can be installed explicitly from &lt;code>github.com/openrundev/apps/openrun/list_apps&lt;/code> source path. This allows the app to be installed with required auth settings. The listing shows apps which are available unauthenticated and apps which are using the same auth as the one set for the list_apps app.&lt;/p>
&lt;h2>Privileged Ports&lt;span class="hx:absolute hx:-mt-20" id="privileged-ports">&lt;/span>
&lt;a href="#privileged-ports" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>On Linux, binding to low ports is disabled for non-root users. To enable binding to port 80 for HTTP and 443 for HTTPS, run the command&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo setcap &lt;span class="nv">cap_net_bind_service&lt;/span>&lt;span class="o">=&lt;/span>+ep /path/to/openrun_binary&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>This would be required after any new build or update of the OpenRun binary.&lt;/p>
&lt;h2>Notes&lt;span class="hx:absolute hx:-mt-20" id="notes">&lt;/span>
&lt;a href="#notes" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;ul>
&lt;li>Please provide a valid email address in service_email. This allows you to receive expiration emails and also allows the CA to contact you if required.&lt;/li>
&lt;li>Start the configuration with staging &lt;code>use_staging = true&lt;/code>, change to production config &lt;code>use_staging = false&lt;/code> after ensuring that DNS and networking is working fine.&lt;/li>
&lt;li>If port 0 is used, the service will bind to any available port. Look at the stdout or logs to find the port used. Clients would have to be updated after every server restarted to point to the new port.&lt;/li>
&lt;li>Only the &lt;a href="https://github.com/caddyserver/certmagic#tls-alpn-challenge" target="_blank" rel="noopener">TLS-ALPN&lt;/a> challenge is enabled in OpenRun. The HTTP and DNS based challenges are not supported currently.&lt;/li>
&lt;li>If OpenRun is running behind a load balancer, ensure that the load balancer is doing TLS pass-through. If TLS termination is done in the load balancer, then the automatic certificate management done by OpenRun through certmagic will not work.&lt;/li>
&lt;/ul></description></item><item><title>Routing</title><link>https://openrun.dev/docs/app/routing/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/app/routing/</guid><description>
&lt;p>The request routing layer in OpenRun is built on top of the &lt;a href="https://github.com/go-chi/chi" target="_blank" rel="noopener">chi&lt;/a> routing library. API requests (JSON or text), HTML requests and proxied requests are supported. For HTML requests, the routing is built for hypermedia exchange, so all routes are defined in terms of pages and fragments within the pages. This grouping of requests helps make it clear which API does what and provide an easy mechanism to deal with partial HTMX driven requests and full page refreshes. Simpler application might have one page with some interactions within that. Larger applications can be composed of multiple pages, each page having some interactive fragments.&lt;/p>
&lt;h2>Routes&lt;span class="hx:absolute hx:-mt-20" id="routes">&lt;/span>
&lt;a href="#routes" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The app contains an &lt;code>routes&lt;/code> array, which defines all the routes for the app. For example, the app definition&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;hello1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">routes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/help&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;help.go.html&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>defines two routes. &lt;code>/&lt;/code> routes to the default index page, &lt;code>/help&lt;/code> routes to the help page. Routes can be of three types: HTML, API and Proxy.&lt;/p>
&lt;h2>HTML Route&lt;span class="hx:absolute hx:-mt-20" id="html-route">&lt;/span>
&lt;a href="#html-route" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>An HTML route defined using &lt;code>ace.html&lt;/code> defines the properties for a HTML page. The response is HTML text. The data returned by the handler function is passed to the template. If the handler returns a &lt;code>ace.response&lt;/code> or &lt;code>ace.redirect&lt;/code>, then that takes effect, otherwise the template is rendered.&lt;/p>
&lt;p>An HTML route can have fragments defined within it. These are sub-apis which used for hypermedia driven interactions from the main page.&lt;/p>
&lt;p>The parameters for &lt;code>ace.html&lt;/code> are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">Property&lt;/th>
&lt;th style="text-align: center">Optional&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Default&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">path&lt;/td>
&lt;td style="text-align: center">False&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The route, should start with a /&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">full&lt;/td>
&lt;td style="text-align: center">True&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">index.go.html if custom layout, else index_gen.go.html&lt;/td>
&lt;td style="text-align: center">The template to use for full page requests&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">partial&lt;/td>
&lt;td style="text-align: center">True&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">None&lt;/td>
&lt;td style="text-align: center">The template to use for partial page requests&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">handler&lt;/td>
&lt;td style="text-align: center">True&lt;/td>
&lt;td style="text-align: center">function&lt;/td>
&lt;td style="text-align: center">handler (if defined)&lt;/td>
&lt;td style="text-align: center">The handler function to use for the route&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">fragments&lt;/td>
&lt;td style="text-align: center">True&lt;/td>
&lt;td style="text-align: center">ace.fragment[]&lt;/td>
&lt;td style="text-align: center">[]&lt;/td>
&lt;td style="text-align: center">The fragment array&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">method&lt;/td>
&lt;td style="text-align: center">True&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">GET&lt;/td>
&lt;td style="text-align: center">The HTTP method type: GET,POST,PUT,DELETE etc, for example &lt;code>ace.GET&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2>Fragment&lt;span class="hx:absolute hx:-mt-20" id="fragment">&lt;/span>
&lt;a href="#fragment" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The fragments array in the html page definition defines the API interactions within the page. The parameters for &lt;code>ace.Fragment&lt;/code> are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">Property&lt;/th>
&lt;th style="text-align: center">Optional&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Default&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">path&lt;/td>
&lt;td style="text-align: center">False&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The route, should not start with a /&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">partial&lt;/td>
&lt;td style="text-align: center">True&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">Inherited from page&lt;/td>
&lt;td style="text-align: center">The template to use for partial requests&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">handler&lt;/td>
&lt;td style="text-align: center">True&lt;/td>
&lt;td style="text-align: center">function&lt;/td>
&lt;td style="text-align: center">Inherited from page&lt;/td>
&lt;td style="text-align: center">The handler function to use for the route&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">method&lt;/td>
&lt;td style="text-align: center">True&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">GET&lt;/td>
&lt;td style="text-align: center">The HTTP method type: GET,POST,PUT,DELETE etc, for example &lt;code>ace.GET&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-blue-200 hx:bg-blue-100 hx:text-blue-900 hx:dark:border-blue-200/30 hx:dark:bg-blue-900/30 hx:dark:text-blue-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">ℹ️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">&lt;code>partial&lt;/code> and &lt;code>handler&lt;/code> are inherited from the page level, unless overridden for the fragment.&lt;/div>
&lt;/div>
&lt;/div>
&lt;p>For example, in this page definition&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/game/&lt;/span>&lt;span class="si">{game_id}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">full&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;game.go.html&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">partial&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;game_info_tmpl&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">handler&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">game_handler&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fragments&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fragment&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;submit&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">method&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">POST&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">handler&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">lambda&lt;/span> &lt;span class="n">req&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">post_game_update&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;submit&amp;#34;&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fragment&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;refresh&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">partial&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;refresh_tmpl&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>there are three API&amp;rsquo;s defined:&lt;/p>
&lt;ul>
&lt;li>GET /game/{game_id} : game_handler is the handler function, full page request returns game.go.html, partial HTMX request returns game_info_tmpl template.&lt;/li>
&lt;li>POST /game/{game_id}/submit : The handler is a lambda function. The game_info_tmpl template partial is inherited from the page as the response for the POST.&lt;/li>
&lt;li>GET /game/{game_id}/refresh : game_handler is inherited from the page. For full page, it returns the game.go.html response. For partial HTMX requests, refresh_tmpl template is returned.&lt;/li>
&lt;/ul>
&lt;h2>API Route&lt;span class="hx:absolute hx:-mt-20" id="api-route">&lt;/span>
&lt;a href="#api-route" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>An API route defines a route which returns JSON (default) or plain text response. The handler response is converted to the desired format and returned. The parameters for &lt;code>ace.api&lt;/code> are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">Property&lt;/th>
&lt;th style="text-align: center">Optional&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Default&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">path&lt;/td>
&lt;td style="text-align: center">False&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The route, should start with a /&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">handler&lt;/td>
&lt;td style="text-align: center">True&lt;/td>
&lt;td style="text-align: center">function&lt;/td>
&lt;td style="text-align: center">handler (if defined)&lt;/td>
&lt;td style="text-align: center">The handler function to use for the route&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">method&lt;/td>
&lt;td style="text-align: center">True&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">GET&lt;/td>
&lt;td style="text-align: center">The HTTP method type: GET,POST,PUT,DELETE etc, for example &lt;code>ace.GET&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">type&lt;/td>
&lt;td style="text-align: center">True&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">JSON&lt;/td>
&lt;td style="text-align: center">The response type, &lt;code>ace.JSON&lt;/code> or &lt;code>ace.TEXT&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>For example&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;api&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">routes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/myapi&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>A GET request to &lt;code>/myapi&lt;/code> endpoint will return JSON &lt;code>{&amp;quot;a&amp;quot;: 1}&lt;/code>.&lt;/p>
&lt;h2>Proxy Route&lt;span class="hx:absolute hx:-mt-20" id="proxy-route">&lt;/span>
&lt;a href="#proxy-route" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>A Proxy route defines a route which has to be proxied to another service. All API calls under that route are proxied (all methods and all sub-routes). Websocket connections are also proxied. Proxy uses a plugin based config, the app has to be authorized to do the proxying. The parameters for &lt;code>ace.Proxy&lt;/code> are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">Property&lt;/th>
&lt;th style="text-align: center">Optional&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Default&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">path&lt;/td>
&lt;td style="text-align: center">False&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The route, should start with a /&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">config&lt;/td>
&lt;td style="text-align: center">False&lt;/td>
&lt;td style="text-align: center">ProxyConfig&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The proxy configuration to use&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>The proxy configuration &lt;code>proxy.config&lt;/code> has the options:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">Property&lt;/th>
&lt;th style="text-align: center">Optional&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Default&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">url&lt;/td>
&lt;td style="text-align: center">False&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The url to forward the requests to&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">strip_path&lt;/td>
&lt;td style="text-align: center">True&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">Additional path components to strip from the request path. The app installation path is always stripped.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">preserve_host&lt;/td>
&lt;td style="text-align: center">False&lt;/td>
&lt;td style="text-align: center">boolean&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">Whether to preserve the Host header. Default false, the Host header is set to the target host value&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>For example, an app which forwards requests to &lt;code>www.google.com&lt;/code> is&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;proxy.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;proxy&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Proxy&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">routes&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">proxy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;https://www.google.com&amp;#34;&lt;/span>&lt;span class="p">)),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">permissions&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">permission&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;proxy.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;config&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;https://www.google.com&amp;#34;&lt;/span>&lt;span class="p">]),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The plugin is authorized to allow proxying to &lt;code>https://www.google.com&lt;/code>. Any request to the app will be forwarded after stripping the app path. So if app is installed at &lt;code>/test&lt;/code>, a request to &lt;code>/test/abc/def&lt;/code> will be forwarded to &lt;code>/abc/def&lt;/code>. In addition, if the proxy is configured with &lt;code>strip_path=&amp;quot;/abc&amp;quot;&lt;/code>, then the request will be sent to &lt;code>/def&lt;/code>.&lt;/p>
&lt;p>If proxying is enabled for &lt;code>/&lt;/code> route, then &lt;code>/static&lt;/code> file serving is disabled for the app since requests to static path are also forwarded to the upstream service. &lt;code>/static_root&lt;/code> serving is available and overrides the proxy config.&lt;/p>
&lt;p>See &lt;a href="https://openrun.dev/docs/plugins/proxy/" >proxy plugin&lt;/a> for details about the proxy config.&lt;/p>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-yellow-100 hx:bg-yellow-50 hx:text-yellow-900 hx:dark:border-yellow-200/30 hx:dark:bg-yellow-700/30 hx:dark:text-yellow-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">⚠️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">&lt;strong>Note:&lt;/strong> If the upstream service service uses relative paths, then all requests are automatically proxied. If the service uses absolute paths, then it better that the app is installed at the root path, like &lt;code>example.com:&lt;/code> instead of &lt;code>example.com:/test&lt;/code>. If the service uses absolute path including the domain name, then the client will see the absolute path and those requests will not come through the proxy. The HTML body is not rewritten by OpenRun to rewrite path references. The upstream service needs to use relative paths to ensure that all requests come through OpenRun.&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2>Request Flow&lt;span class="hx:absolute hx:-mt-20" id="request-flow">&lt;/span>
&lt;a href="#request-flow" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The API flow is&lt;/p>
&lt;ul>
&lt;li>The API is first sent to the matching app&lt;/li>
&lt;li>Within the app, the API is routed based on the routes defined&lt;/li>
&lt;li>If there is a handler defined for the matched route, the handler function is called with the request as argument&lt;/li>
&lt;li>The response template is invoked, with an input map containing a &lt;code>Data&lt;/code> property as returned by the handler function&lt;/li>
&lt;li>If the API type is set to json, the handler response is directly returned, with no template being used&lt;/li>
&lt;li>If &lt;a href="https://openrun.dev/docs/plugins/overview/#automatic-error-handling" >automatic error handling&lt;/a> is enabled (&lt;code>error_handler&lt;/code> is defined), then the error handler function is called if there is a error during the handler invocation. The error handler does the response processing, the templates defined in the route are not used.&lt;/li>
&lt;/ul>
&lt;h2>Notes&lt;span class="hx:absolute hx:-mt-20" id="notes">&lt;/span>
&lt;a href="#notes" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;ul>
&lt;li>For HTMX requests, the &lt;code>partial&lt;/code> template is used. For regular requests, the page level &lt;code>full&lt;/code> template is used&lt;/li>
&lt;li>If there is a function called &lt;code>handler&lt;/code> defined, that is the default handler function for all API&amp;rsquo;s&lt;/li>
&lt;li>For non-HTMX update requests (POST/PUT/DELETE), the &lt;a href="https://en.wikipedia.org/wiki/Post/Redirect/Get" target="_blank" rel="noopener">Post-Redirect-Get&lt;/a> pattern is automatically implemented by redirecting to the location pointed to by the &lt;code>Referer&lt;/code> header.&lt;/li>
&lt;/ul></description></item><item><title>Application Security</title><link>https://openrun.dev/docs/applications/appsecurity/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/applications/appsecurity/</guid><description>
&lt;p>OpenRun applications run in a sandbox environment with no direct access to the system or OpenRun service. All access is through plugins. When an application is installed, the admin can audit the application for what access is being requested. Only the permissions which are approved are allowed at runtime.&lt;/p>
&lt;h2>Security Model&lt;span class="hx:absolute hx:-mt-20" id="security-model">&lt;/span>
&lt;a href="#security-model" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The security model used by OpenRun is:&lt;/p>
&lt;ul>
&lt;li>The application code written in Starlark(python) and HTML templates is untrusted.&lt;/li>
&lt;li>The OpenRun service and plugin code (in Go) are trusted.&lt;/li>
&lt;li>The admin can audit and approve the access required by the untrusted application code when the app is being installed.&lt;/li>
&lt;li>After installation, further application code updates do not require any further audit, as long as no new permissions are required. If the updated app code requires any new permission, the new plugin call will fail at runtime with a permission error.&lt;/li>
&lt;/ul>
&lt;p>The trust boundary is about what the application can do in the backend. The frontend code is sandboxed by the browser, there is no additional auditing implemented for the frontend code.&lt;/p>
&lt;p>For apps which make calls to external programs (using &lt;code>exec&lt;/code> plugin) and containerized apps, the external program runs as usual. The OpenRun security model applies for Starlark apps. For other apps, the security model allows control on which program to run and what args to pass and which container to use. But there is no restriction on what the external program or container itself can do.&lt;/p>
&lt;h2>Usecases&lt;span class="hx:absolute hx:-mt-20" id="usecases">&lt;/span>
&lt;a href="#usecases" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>This security model allows for the following:&lt;/p>
&lt;ul>
&lt;li>Users can download applications and run on their machine, without worrying about what operations the app can do on their system outside the audited permissions.&lt;/li>
&lt;li>Operations teams can install and approve applications. Further application updates can be handled by the development team, without requiring the operational admins to verify the updated code. As long as the application works within the originally defined permission boundary, application updates will continue to work.&lt;/li>
&lt;li>Application developers can use LLM powered automated code generation tools without worrying about the side-effects of the code. If the generated code tries to perform any operation not previously approved, it will fail.&lt;/li>
&lt;/ul>
&lt;h2>Sample Application&lt;span class="hx:absolute hx:-mt-20" id="sample-application">&lt;/span>
&lt;a href="#sample-application" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>As an example, the disk usage analysis app requires &lt;a href="https://github.com/openrundev/openrun/blob/8b8975cea2d650c9f80dab6eb70cc5b2ddbe5c40/examples/disk_usage/app.star#L42" target="_blank" rel="noopener">two permissions&lt;/a>&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Disk Usage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">routes&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">partial&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;du_table_block&amp;#34;&lt;/span>&lt;span class="p">)],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">permissions&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">permission&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;exec.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;run&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;du&amp;#34;&lt;/span>&lt;span class="p">]),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">permission&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;exec.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;run&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;readlink&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">style&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;https://unpkg.com/mvp.css@1.14.0/mvp.css&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>It requests permission to use the &lt;code>exec.in&lt;/code> plugin to &lt;code>run&lt;/code> two CLI commands, first being &lt;code>du&lt;/code> and other being &lt;code>readlink&lt;/code>. When installing the app&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ openrun app create ./examples/disk_usage/ /utils/disk_usage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">App audit results /utils/disk_usage : app2WPQHwr5ZpKELqh0TvP5YMSnbab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Plugins :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exec.in
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Permissions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exec.in.run &lt;span class="o">[&lt;/span>du&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exec.in.run &lt;span class="o">[&lt;/span>readlink&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">App created. Permissions need to be approved&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>an audit report is shown with these requests. To approve the requested permissions, the admin can do&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ openrun app approve /utils/disk_usage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">App audit: /utils/disk_usage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Plugins :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exec.in
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Permissions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exec.in.run &lt;span class="o">[&lt;/span>du&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exec.in.run &lt;span class="o">[&lt;/span>readlink&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">App permissions have been approved.&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The approval can be done during the app create itself, in that case the app is installed and approved immediately. None of the plugin code runs during the app creation, even for calls at the global scope. If the audit report does not match expectations, the app can be deleted.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ openrun app create --approve ./examples/disk_usage/ /utils/disk_usage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">App audit results /utils/disk_usage : app2WPQpws6C1mWb6BujYGOdWMnF1C
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Plugins :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exec.in
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Permissions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exec.in.run &lt;span class="o">[&lt;/span>du&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exec.in.run &lt;span class="o">[&lt;/span>readlink&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">App created. Permissions have been approved
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ openrun app delete /utils/disk_usage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">App deleted /utils/disk_usage&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Once the app is created, if the application code is updated to change &lt;a href="https://github.com/openrundev/openrun/blob/8b8975cea2d650c9f80dab6eb70cc5b2ddbe5c40/examples/disk_usage/app.star#L9" target="_blank" rel="noopener">the line&lt;/a> from&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">exec&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;readlink&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;-f&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">current&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">process_partial&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>to&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">exec&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;rm&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;-f&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">current&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">process_partial&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The app will fail at runtime with an error like&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>app /utils/disk_usage is not permitted to call exec.in.run with argument 0 having value &amp;#34;rm&amp;#34;, expected &amp;#34;readlink&amp;#34;. Update the app or audit and approve permissions&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The app cannot be run until either the code change is reverted or the admin approves the new call to rm.&lt;/p></description></item><item><title>Request</title><link>https://openrun.dev/docs/app/request/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/app/request/</guid><description>
&lt;h2>Request Structure&lt;span class="hx:absolute hx:-mt-20" id="request-structure">&lt;/span>
&lt;a href="#request-structure" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The handler function is passed one argument which has the details about the API call. The fields in this structure are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">Property&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">AppName&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">The app name in the config&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">AppPath&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">The path where the app is installed. If root, then empty string&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">AppUrl&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">The url for the app root&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">PagePath&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">The path for the current page. If root, then empty string&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">PageUrl&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">The url for the current page&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">Method&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">The HTTP method, GET/POST etc&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">IsDev&lt;/td>
&lt;td style="text-align: center">bool&lt;/td>
&lt;td style="text-align: center">Is the app installed in dev mode&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">IsPartial&lt;/td>
&lt;td style="text-align: center">bool&lt;/td>
&lt;td style="text-align: center">Is this an HTMX driven partial request&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">RemoteIP&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">The Client IP address&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">UrlParams&lt;/td>
&lt;td style="text-align: center">dict&lt;/td>
&lt;td style="text-align: center">The url parameters, if used in the url spec&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">Form&lt;/td>
&lt;td style="text-align: center">dict&lt;/td>
&lt;td style="text-align: center">The form data, including body and query&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">Query&lt;/td>
&lt;td style="text-align: center">dict&lt;/td>
&lt;td style="text-align: center">The url query data, as a string array&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">PostForm&lt;/td>
&lt;td style="text-align: center">dict&lt;/td>
&lt;td style="text-align: center">The form data from the body&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">Data&lt;/td>
&lt;td style="text-align: center">dict&lt;/td>
&lt;td style="text-align: center">The response from the handler function (passed to the template)&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2>Accessing Inputs&lt;span class="hx:absolute hx:-mt-20" id="accessing-inputs">&lt;/span>
&lt;a href="#accessing-inputs" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;h3>Url Parameters&lt;span class="hx:absolute hx:-mt-20" id="url-parameters">&lt;/span>
&lt;a href="#url-parameters" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>For a route defined like&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/user/&lt;/span>&lt;span class="si">{user_id}&lt;/span>&lt;span class="s2">/settings&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;index.go.html&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>the url parameter &lt;code>user_id&lt;/code> can be accessed in the handler&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">req&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">UrlParams&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;user_id&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>&lt;a href="https://go-chi.io/#/pages/routing?id=routing-patterns-amp-url-parameters" target="_blank" rel="noopener">Wildcard parameters&lt;/a> are allowed at the end of the route. These are defined as&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/path/*&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;index.go.html&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>and can be accessed as&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">req&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">UrlParams&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;*&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>&lt;a href="https://github.com/google/re2/wiki/Syntax" target="_blank" rel="noopener">Regexes&lt;/a> are also allowed in the path, these are defined as &lt;code>ace.html(&amp;quot;/articles/{aid:^[0-9]{5,6}}&amp;quot;)&lt;/code> and accessed as &lt;code>req.UrlParams[&amp;quot;{aid}&amp;quot;]&lt;/code>. The route will match only if the regex matches.&lt;/p>
&lt;h3>Query String Parameters&lt;span class="hx:absolute hx:-mt-20" id="query-string-parameters">&lt;/span>
&lt;a href="#query-string-parameters" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>Query string parameters can be accessed as&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">req&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Query&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="kc">None&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The value for Query is an string array, since there can be multiple query parameters with the same name.&lt;/p>
&lt;h3>Form Data&lt;span class="hx:absolute hx:-mt-20" id="form-data">&lt;/span>
&lt;a href="#form-data" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>Form data can be accessed like&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">req&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Form&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="kc">None&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The value for Form is an string array, since there can be multiple form parameters with the same name.&lt;/p></description></item><item><title>Security</title><link>https://openrun.dev/docs/configuration/security/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/configuration/security/</guid><description>
&lt;p>The default configuration for the OpenRun server is:&lt;/p>
&lt;ul>
&lt;li>Application management (admin APIs) are accessible over unix domain sockets only (not accessible remotely). Since UDS enforces file permissions checks, no additional authentication is needed for admin APIs.&lt;/li>
&lt;li>Admin user account is used to access applications, default &lt;code>auth&lt;/code> for apps is &lt;code>system&lt;/code>&lt;/li>
&lt;li>The admin user password bcrypt hash has to be added to the server config file, or a random password is generated every time the server is restarted&lt;/li>
&lt;li>Applications can be changed to not require any authentication, &lt;code>auth&lt;/code> can be &lt;code>none&lt;/code> or use Oauth2 based auth.&lt;/li>
&lt;li>There is no user management support in OpenRun currently. The system account is present by default (which can be disabled) or OAuth based auth can be used.&lt;/li>
&lt;/ul>
&lt;h2>Admin Account Password&lt;span class="hx:absolute hx:-mt-20" id="admin-account-password">&lt;/span>
&lt;a href="#admin-account-password" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>When the OpenRun server is started, it looks for the entry&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">security&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">admin_password_bcrypt&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="c"># the password bcrypt value&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>in the config file. If the value is undefined or empty, then a random password is generated and is used as the admin password for that server session. The password being used is displayed on the stdout of the server startup. This will change on every restart.&lt;/p>
&lt;p>To configure a value for the admin user password, use the &lt;code>password&lt;/code> helper command:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">openrun password&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>to generate a random password. This will print out the password and its bcrypt value to the screen. Save the password in your password manager and add the bcrypt hash to your config file.&lt;/p>
&lt;p>To use a particular value for the admin password, run:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">openrun password --prompt&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>This will prompt for the password and print out the bcrypt hash to add to the config file.&lt;/p>
&lt;h2>Admin API Access&lt;span class="hx:absolute hx:-mt-20" id="admin-api-access">&lt;/span>
&lt;a href="#admin-api-access" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>By default, the OpenRun client uses Unix domain sockets to connect to the OpenRun server. Admin API calls to manage applications are disabled over HTTP/HTTPS by default. Unix sockets work when the client is on the same machine as the server, the client does not need to pass any credentials to connect over unix sockets.&lt;/p>
&lt;p>To enable remote API calls, where the client is on a different machine from the server, the server needs to be changed to add the following:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">security&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">admin_over_tcp&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">true&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>If running the OpenRun client from a remote machine, the config options required for the client are:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">server_uri&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;https://&amp;lt;SERVER_HOST&amp;gt;:25223&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">admin_user&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;admin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">client&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">admin_password&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="c"># Change to actual password&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">skip_cert_check&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span> &lt;span class="c"># Change to true if using self-signed certs&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>All other server related config entries are ignored by the OpenRun client. Note that to connect to a OpenRun server over HTTP remotely, the server needs to be bound to the all interface(0.0.0.0), see &lt;a href="https://openrun.dev/docs/configuration/networking/" >here&lt;/a>.&lt;/p>
&lt;p>If server_uri is set to the https endpoint and the OpenRun server is running with a self-signed certificate, set &lt;code>skip_cert_check = true&lt;/code> in config to disable the TLS certificate check.&lt;/p>
&lt;h2>Application Security&lt;span class="hx:absolute hx:-mt-20" id="application-security">&lt;/span>
&lt;a href="#application-security" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>See &lt;a href="https://openrun.dev/docs/applications/appsecurity/" >appsecurity&lt;/a> for details about the application level sandboxing.&lt;/p>
&lt;h2>Private Repository Access&lt;span class="hx:absolute hx:-mt-20" id="private-repository-access">&lt;/span>
&lt;a href="#private-repository-access" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The &lt;code>app create&lt;/code> and &lt;code>app reload&lt;/code> commands can read public GitHub repositories. If the repository is private, to be able to access the repo, the &lt;a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account" target="_blank" rel="noopener">ssh key&lt;/a> or &lt;a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens" target="_blank" rel="noopener">personal access token&lt;/a> needs to be specified.&lt;/p>
&lt;h3>SSH Keys&lt;span class="hx:absolute hx:-mt-20" id="ssh-keys">&lt;/span>
&lt;a href="#ssh-keys" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>For SSH key, in the &lt;code>openrun.toml&lt;/code> config file, create an entry like:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">git_auth&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mykey&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">key_file_path&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;/Users/myuser/.ssh/id_rsa&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">password&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;mypassphrase&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>&lt;code>mykey&lt;/code> is the git auth key name, &lt;code>key_file_path&lt;/code> points to the location of a private key file for a user with access to the repository and &lt;code>password&lt;/code> is the passphrase if any for the file.&lt;/p>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-blue-200 hx:bg-blue-100 hx:text-blue-900 hx:dark:border-blue-200/30 hx:dark:bg-blue-900/30 hx:dark:text-blue-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">ℹ️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">Use &lt;code>ssh-keygen -l -f ~/.ssh/id_rsa.pub&lt;/code> (on public key) to check if the fingerprint matches the SHA256 fingerprint shown at &lt;a href="https://github.com/settings/keys" target="_blank" rel="noopener">https://github.com/settings/keys&lt;/a>. To verify the passphrase, use &lt;code>ssh-keygen -y -f ~/.ssh/id_rsa&lt;/code> (on the private key) and type in the passphrase to check if the passphrase is correct.&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3>Personal Access Token&lt;span class="hx:absolute hx:-mt-20" id="personal-access-token">&lt;/span>
&lt;a href="#personal-access-token" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>For personal access token, set&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">git_auth&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">mypat&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">user_id&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;myid&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">password&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;github_pat_11A7FXXXXXXX&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The &lt;code>user_id&lt;/code> needs to be set to an non-empty value like the github id even though it is ignored for the auth.&lt;/p>
&lt;p>When running &lt;code>app create&lt;/code>, add &lt;code>--git-auth mykey&lt;/code> or &lt;code>--git-auth mypat&lt;/code> option. The private key specified will be used for accessing the repository. &lt;code>app reload&lt;/code> command will automatically use the same key as specified during the create. To set the default git key to use, add in config:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">security&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">default_git_auth&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;mykey&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>This git key is used for &lt;code>apply&lt;/code> and &lt;code>sync&lt;/code> also. To change the git auth key for an app, run:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">openrun app update-settings git-auth newkey /myapp&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The git auth is not a staged changed, it applies immediately for the staging and prod apps and preview apps.&lt;/p></description></item><item><title>Store Plugin</title><link>https://openrun.dev/docs/plugins/store/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/plugins/store/</guid><description>
&lt;p>The &lt;code>store.in&lt;/code> plugin provides a document store interface to work with SQLite tables (PostgreSQL support is coming soon). The goal for the store plugin is to support a full managed interface, creating the app automatically creates the tables required for the app.&lt;/p>
&lt;h2>Introduction&lt;span class="hx:absolute hx:-mt-20" id="introduction">&lt;/span>
&lt;a href="#introduction" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The &lt;code>store.in&lt;/code> plugins automatically creates tables with the specified schema. The tables are created on first load unless they are already present. The tables are linked to the app. The tables use a document store interface. The data is stored as JSON(B) data types. To query the data, a structured interface is used similar to the one provided by MongoDB. The advantage of this approach is that SQL injection is not possible, even if the application code is incorrectly written.&lt;/p>
&lt;h2>Schema Definition&lt;span class="hx:absolute hx:-mt-20" id="schema-definition">&lt;/span>
&lt;a href="#schema-definition" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The schema for the app is specified in the &lt;code>schema.star&lt;/code> file in the root directory of the app code. The format of this file is like:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;bookmark&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fields&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">field&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;url&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">STRING&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">field&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;tags&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">LIST&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">indexes&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">index&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s2">&amp;#34;url&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">unique&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;tag&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">fields&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">field&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;tag&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">STRING&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">field&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;urls&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">LIST&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">indexes&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">index&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s2">&amp;#34;tag&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">unique&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">])&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Multiple types can be specified. Each type has a name, list of fields and list of indexes. Each field has a name and a type, the valid types are &lt;code>INT&lt;/code>, &lt;code>STRING&lt;/code>, &lt;code>BOOLEAN&lt;/code>, &lt;code>LIST&lt;/code> and &lt;code>DICT&lt;/code>.&lt;/p>
&lt;p>Each type maps to one table in the underlying database. Indexes can be created on the fields. Each index is specified as list of field names. Adding &lt;code>:desc&lt;/code> to the field name changes the index to be sorted descending instead of default ascending. Setting &lt;code>unique&lt;/code> property to &lt;code>True&lt;/code> makes it an unique index.&lt;/p>
&lt;h2>Schema Design&lt;span class="hx:absolute hx:-mt-20" id="schema-design">&lt;/span>
&lt;a href="#schema-design" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>SQL tables are used as underlying storage, but joins are not supported by the &lt;code>store.in&lt;/code> interface. The schema design to use would be same as schema used for a &lt;a href="https://www.mongodb.com/developer/products/mongodb/mongodb-schema-design-best-practices/" target="_blank" rel="noopener">document database&lt;/a>. Since &lt;code>LIST&lt;/code> and &lt;code>DICT&lt;/code> data types are supported, de-normalized schema is recommended instead of normalized schema.&lt;/p>
&lt;h2>Store Types&lt;span class="hx:absolute hx:-mt-20" id="store-types">&lt;/span>
&lt;a href="#store-types" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The type information is read from the schema file and schema types are automatically created for the app. The &lt;code>doc&lt;/code> namespace has type objects for each type. For the previous example, the two types created are &lt;code>doc.bookmark&lt;/code> and &lt;code>doc.tag&lt;/code>. The &lt;code>table&lt;/code> namespace also has entry populated which reference the table names for the type. For the previous example, the two table names available are &lt;code>table.bookmark&lt;/code> and &lt;code>table.tag&lt;/code>. This allows creating objects and persisting them using the store API by doing:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">bookmark&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">doc&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bookmark&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">url&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;http://openrun.dev&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">tags&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;webapps&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;tools&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">store&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">insert&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">table&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bookmark&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">bookmark&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>Store APIs&lt;span class="hx:absolute hx:-mt-20" id="store-apis">&lt;/span>
&lt;a href="#store-apis" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The API&amp;rsquo;s in the &lt;code>store.in&lt;/code> plugin and their arguments and response are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">API&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Args&lt;/th>
&lt;th style="text-align: center">Response Value&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>begin&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Read&lt;/td>
&lt;td style="text-align: center">-&lt;/td>
&lt;td style="text-align: center">-&lt;/td>
&lt;td style="text-align: center">Begin a new transaction&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>commit&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Write&lt;/td>
&lt;td style="text-align: center">-&lt;/td>
&lt;td style="text-align: center">-&lt;/td>
&lt;td style="text-align: center">Commit active transaction&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>rollback&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Read&lt;/td>
&lt;td style="text-align: center">-&lt;/td>
&lt;td style="text-align: center">-&lt;/td>
&lt;td style="text-align: center">Rollback active transaction&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>select_by_id&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Read&lt;/td>
&lt;td style="text-align: center">table: string &lt;br> id : int&lt;/td>
&lt;td style="text-align: center">doc&lt;/td>
&lt;td style="text-align: center">Select one record by id&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>select&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Read&lt;/td>
&lt;td style="text-align: center">table: string &lt;br> filter : dict &lt;br> sort : list string &lt;br> offset : int &lt;br> limit : int (default 10,000)&lt;/td>
&lt;td style="text-align: center">doc iterator&lt;/td>
&lt;td style="text-align: center">Select by filter&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>select_one&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Read&lt;/td>
&lt;td style="text-align: center">table: string &lt;br> filter : dict&lt;/td>
&lt;td style="text-align: center">doc&lt;/td>
&lt;td style="text-align: center">Select one by filter&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>count&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Read&lt;/td>
&lt;td style="text-align: center">table: string &lt;br> filter : dict&lt;/td>
&lt;td style="text-align: center">int&lt;/td>
&lt;td style="text-align: center">Count entries by filter&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>insert&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Write&lt;/td>
&lt;td style="text-align: center">table: string &lt;br> entry : doc&lt;/td>
&lt;td style="text-align: center">id : int&lt;/td>
&lt;td style="text-align: center">Insert a document&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>update&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Write&lt;/td>
&lt;td style="text-align: center">table: string &lt;br> entry : doc&lt;/td>
&lt;td style="text-align: center">count : int&lt;/td>
&lt;td style="text-align: center">Update a document&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>delete_by_id&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Write&lt;/td>
&lt;td style="text-align: center">table: string &lt;br> id : int&lt;/td>
&lt;td style="text-align: center">count : int&lt;/td>
&lt;td style="text-align: center">Delete one document by id&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>delete&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Write&lt;/td>
&lt;td style="text-align: center">table: string &lt;br> filter : dict&lt;/td>
&lt;td style="text-align: center">count : int&lt;/td>
&lt;td style="text-align: center">Delete multiple docs by filter&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2>Transactions&lt;span class="hx:absolute hx:-mt-20" id="transactions">&lt;/span>
&lt;a href="#transactions" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The transaction handling APIs &lt;code>begin&lt;/code>, &lt;code>commit&lt;/code> and &lt;code>rollback&lt;/code> take no arguments. All the other APIs take the table name as the first argument. The transaction created by the &lt;code>begin&lt;/code> is saved in a thread local, there is no need to pass the transaction manually to subsequent API calls. The transaction &lt;code>rollback&lt;/code> is automatically done at the end of the API handler if &lt;code>commit&lt;/code> is not done explicitly.&lt;/p>
&lt;h2>Automatic Fields&lt;span class="hx:absolute hx:-mt-20" id="automatic-fields">&lt;/span>
&lt;a href="#automatic-fields" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>All tables have some fields added automatically. These are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">Field&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">_id&lt;/td>
&lt;td style="text-align: center">int&lt;/td>
&lt;td style="text-align: center">Primary key&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">_version&lt;/td>
&lt;td style="text-align: center">int&lt;/td>
&lt;td style="text-align: center">Schema version&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">_created_by&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">User id&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">_updated_by&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">User id&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">_created_at&lt;/td>
&lt;td style="text-align: center">timestamp&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">_updated_at&lt;/td>
&lt;td style="text-align: center">timestamp&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>These fields can be accessed like regular user defined field in the store APIs. So &lt;code>bookmark._id&lt;/code> can be used the way &lt;code>bookmark.url&lt;/code> is used in all the APIs.&lt;/p>
&lt;h2>Iterators&lt;span class="hx:absolute hx:-mt-20" id="iterators">&lt;/span>
&lt;a href="#iterators" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The &lt;code>select&lt;/code> API returns a document iterator. Use a regular python &lt;code>for&lt;/code> loop to iterate on the entries. For example,&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">store&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">table&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bookmark&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{},&lt;/span> &lt;span class="n">limit&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">sort&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;_created_at:desc&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">error&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="s2">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">error&lt;/span>&lt;span class="p">},&lt;/span> &lt;span class="s2">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">bookmarks&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">row&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">bookmarks&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">row&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Iterating till the end of the loop automatically closes the iterator. Returning from a handler without closing an iterator will cause the handler to fail. The iterator is automatically closed by the OpenRun platform to prevent a resource leak. The API failure is used to indicate to the developer that the code needs to be fixed to explicitly close the iterator.&lt;/p>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-yellow-100 hx:bg-yellow-50 hx:text-yellow-900 hx:dark:border-yellow-200/30 hx:dark:bg-yellow-700/30 hx:dark:text-yellow-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">⚠️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">&lt;strong>Note:&lt;/strong> The iterator cannot be directly returned from the handler. A list needs to be created and populated if the entries need to be passed to the template.&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2>Select Limits and Sort&lt;span class="hx:absolute hx:-mt-20" id="select-limits-and-sort">&lt;/span>
&lt;a href="#select-limits-and-sort" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>For the &lt;code>select&lt;/code> API, a limit of 10,000 is set as the default limit value. The API can pass a different limit value if required. The maximum value allowed for the limit is 100,000. Passing a limit beyond that will result in an API failure.&lt;/p>
&lt;p>The sort argument can be used to sort the result for the &lt;code>select&lt;/code> API. The argument is a list of strings. For example, &lt;code>[&amp;quot;age&amp;quot;, &amp;quot;city&amp;quot;]&lt;/code> is sorted on age and city ascending. &lt;code>[&amp;quot;age&amp;quot;, &amp;quot;city:desc&amp;quot;]&lt;/code> is sorted on age ascending and city descending.&lt;/p>
&lt;h2>Filter&lt;span class="hx:absolute hx:-mt-20" id="filter">&lt;/span>
&lt;a href="#filter" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The &lt;code>select&lt;/code>, &lt;code>select_one&lt;/code>, &lt;code>count&lt;/code> and &lt;code>delete&lt;/code> APIs take a filter parameter. The filter has to be specified as a dict. The format of the filter is similar to the format used by MongoDB. The advantage of this over a SQL expression is that there is no possibility of SQL injection, even with an improperly written application.&lt;/p>
&lt;p>The filter is specified as a list diction, the keys are the names of the field to apply the condition on. The value can be a value, in which case it is treated as a equality match. If the value is an diction, then the it is treated as a expression to apply on the specified field.&lt;/p>
&lt;p>For example, a filter &lt;code>{&amp;quot;age&amp;quot;: 30}&lt;/code> is equivalent to sql where clause &lt;code>age = ?&lt;/code> with the parameter bound to 30. Filter &lt;code>{&amp;quot;age&amp;quot;: 30, &amp;quot;city&amp;quot;: &amp;quot;New York&amp;quot;, &amp;quot;state&amp;quot;: &amp;quot;California&amp;quot;}&lt;/code> is same as sql &lt;code>age = ? AND city = ? AND state = ?&lt;/code>, with the appropriate bindings. To express an or condition, do filter as &lt;code>{&amp;quot;age&amp;quot;: 30, &amp;quot;$or&amp;quot;: [{&amp;quot;city&amp;quot;: &amp;quot;New York&amp;quot;}, {&amp;quot;state&amp;quot;: &amp;quot;California&amp;quot;}]}&lt;/code>. That translates to &lt;code>age = ? AND ( city = ? OR state = ? )&lt;/code>&lt;/p>
&lt;p>To express an inequality condition, do &lt;code>{&amp;quot;age&amp;quot;: {&amp;quot;$gt&amp;quot;: 30}}&lt;/code> which becomes &lt;code>age &amp;gt; ?&lt;/code>.&lt;/p>
&lt;p>The logical operators supported are &lt;code>$AND&lt;/code> and &lt;code>$OR&lt;/code>, case insensitive.&lt;/p>
&lt;p>The filter operators supported (case insensitive) are&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">Filter&lt;/th>
&lt;th style="text-align: center">SQL&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">$GT&lt;/td>
&lt;td style="text-align: center">&amp;gt;&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">$LT&lt;/td>
&lt;td style="text-align: center">&amp;lt;&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">$GTE&lt;/td>
&lt;td style="text-align: center">&amp;gt;=&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">$LTE&lt;/td>
&lt;td style="text-align: center">&amp;lt;=&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">$EQ&lt;/td>
&lt;td style="text-align: center">=&lt;/td>
&lt;td style="text-align: center">Default when value is not a dict&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">$NE&lt;/td>
&lt;td style="text-align: center">!=&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">$LIKE&lt;/td>
&lt;td style="text-align: center">like&lt;/td>
&lt;td style="text-align: center">Value has to be passed with % added, &lt;br> it is not added automatically. For example &lt;code>&amp;quot;%test%&amp;quot;&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Action Apps</title><link>https://openrun.dev/docs/actions/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/actions/</guid><description>
&lt;p>Actions allow apps to expose an autogenerated UI for simple backend actions. For use cases where an existing CLI application or API needs to be exposed as a web app, actions provide an easy solution. An app can have one or more actions defined. Each action has to be given a unique path, which does not conflict with any other route defined for the app. See weather app &lt;a href="https://github.com/openrundev/apps/blob/main/misc/weather/app.star" target="_blank" rel="noopener">code&lt;/a>:&lt;a href="https://utils.demo.clace.io/weather" target="_blank" rel="noopener">demo&lt;/a> for an example of using Actions.&lt;/p>
&lt;h2>Sample Action&lt;span class="hx:absolute hx:-mt-20" id="sample-action">&lt;/span>
&lt;a href="#sample-action" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>First, define the parameters to be exposed in the form UI. Create a &lt;code>params.star&lt;/code> file with the &lt;a href="https://openrun.dev/docs/develop/#app-parameters" >params&lt;/a>. For example,&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">params.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">param&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;dir&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;The directory to list files from&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">default&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;/tmp&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">param&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;detail&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">BOOLEAN&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Whether to show file details&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">default&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>This app defines a run handler which runs &lt;code>ls&lt;/code> on the specified directory. The output text is returned.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">load&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;exec.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;exec&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dry_run&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dir&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;.&amp;#34;&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dir&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">startswith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;./&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dir&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;..&amp;#34;&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dir&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">startswith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;../&amp;#34;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Validation failed&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">param_errors&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;dir&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;relative paths not supported&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cmd_args&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;-Lla&amp;#34;&lt;/span> &lt;span class="k">if&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">detail&lt;/span> &lt;span class="k">else&lt;/span> &lt;span class="s2">&amp;#34;-La&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dir&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">out&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">exec&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;ls&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">cmd_args&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">value&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;File listing for &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dir&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">out&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;List Files&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">actions&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">action&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;List Files&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">run&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Show the ls -a output for specified directory&amp;#34;&lt;/span>&lt;span class="p">)],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">permissions&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">permission&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;exec.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;run&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;ls&amp;#34;&lt;/span>&lt;span class="p">]),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The app, when accessed will look as shown below, with the &lt;code>ls&lt;/code> command output displayed:&lt;/p>
&lt;picture class="responsive-picture" style="display: block; margin-left: auto; margin-right: auto;">
&lt;source media="(prefers-color-scheme: dark)" srcset="https://openrun.dev/images/list_filesd_dark.png">
&lt;source media="(prefers-color-scheme: light)" srcset="https://openrun.dev/images/list_filesd_light.png">
&lt;img alt="List files app" src="https://openrun.dev/images/list_files_light.png">
&lt;/picture>
&lt;h2>Action Definition&lt;span class="hx:absolute hx:-mt-20" id="action-definition">&lt;/span>
&lt;a href="#action-definition" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>An action is defined using the &lt;code>ace.action&lt;/code> struct. The fields in this structure are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">Property&lt;/th>
&lt;th style="text-align: center">Optional&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Default&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">name&lt;/td>
&lt;td style="text-align: center">false&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The action name&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">path&lt;/td>
&lt;td style="text-align: center">false&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The path to use within app path&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">run&lt;/td>
&lt;td style="text-align: center">false&lt;/td>
&lt;td style="text-align: center">function&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The function to run on execution&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">suggest&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">function&lt;/td>
&lt;td style="text-align: center">none&lt;/td>
&lt;td style="text-align: center">The function to run on suggest&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">description&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">none&lt;/td>
&lt;td style="text-align: center">The description for the action&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">hidden&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">list strings&lt;/td>
&lt;td style="text-align: center">none&lt;/td>
&lt;td style="text-align: center">The params which should be hidden in the UI for this Action&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">show_validate&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">boolean&lt;/td>
&lt;td style="text-align: center">False&lt;/td>
&lt;td style="text-align: center">Whether to show an Validate option for this action&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>The name and description are shown in the app UI. The app params are displayed in a form. &lt;code>BOOLEAN&lt;/code> types are checkboxes, others are text boxes.&lt;/p>
&lt;p>When the form is submitted, the &lt;code>run&lt;/code> function is called. The params are passed as an &lt;code>args&lt;/code> argument. The response as returned by the handler is shown on the UI.&lt;/p>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-yellow-100 hx:bg-yellow-50 hx:text-yellow-900 hx:dark:border-yellow-200/30 hx:dark:bg-yellow-700/30 hx:dark:text-yellow-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">⚠️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">In the action handler function, use &lt;code>args&lt;/code> argument to get the values from the form. Referencing &lt;code>params&lt;/code> will give the default values for the parameters, not the actual values passed in.&lt;/div>
&lt;/div>
&lt;/div>
&lt;p>The &lt;code>hidden&lt;/code> property can be used to hide params for specific Actions. Set it to the list of params to hide, for example &lt;code>hidden=[&amp;quot;param1&amp;quot;]&lt;/code>.&lt;/p>
&lt;h2>Action Result&lt;span class="hx:absolute hx:-mt-20" id="action-result">&lt;/span>
&lt;a href="#action-result" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The handler returns an &lt;code>ace.result&lt;/code> struct. The fields in this structure are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">Property&lt;/th>
&lt;th style="text-align: center">Optional&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Default&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">status&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The action status message&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">values&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">list&lt;/td>
&lt;td style="text-align: center">[]&lt;/td>
&lt;td style="text-align: center">The actions output, list of strings or list of dicts&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">report&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">ace.AUTO&lt;/td>
&lt;td style="text-align: center">The type of report to generate. Default is &lt;code>ace.AUTO&lt;/code>, where it is selected based on response type. Other options are &lt;code>ace.JSON&lt;/code>, &lt;code>ace.TEXT&lt;/code>, &lt;code>ace.TABLE&lt;/code>, &lt;code>ace.DOWNLOAD&lt;/code> and &lt;code>ace.IMAGE&lt;/code>. Any other value is a custom template name.&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">param_errors&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">dict&lt;/td>
&lt;td style="text-align: center">{}&lt;/td>
&lt;td style="text-align: center">The validation errors to report for each param. The key is the param name, the value is the error message&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2>Validating Params&lt;span class="hx:absolute hx:-mt-20" id="validating-params">&lt;/span>
&lt;a href="#validating-params" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The &lt;code>run&lt;/code> handler can validate the parameters. If there are errors, it can return a validation error like&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="k">def&lt;/span> &lt;span class="nf">run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dry_run&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dir&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;.&amp;#34;&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dir&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">startswith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;./&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dir&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;..&amp;#34;&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">dir&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">startswith&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;../&amp;#34;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Validation failed&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">param_errors&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;dir&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;relative paths not supported&amp;#34;&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">dry_run&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Validation successful&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Actual code for run handler&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Errors can be reported for multiple params. If the action definition has &lt;code>show_validate=True&lt;/code>, then a Validate option will show up in the UI. Calling that will invoke the run handler with &lt;code>dry_run=True&lt;/code>. The run handler should return after the param validation when dry_run is true.&lt;/p>
&lt;h2>Suggest Handler&lt;span class="hx:absolute hx:-mt-20" id="suggest-handler">&lt;/span>
&lt;a href="#suggest-handler" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>If a suggest handler is defined for an action, then a Suggest button shows up in the UI. Suggest allows property values to be populated dynamically. For example, if the app has three params A, B and C, and all are empty initially. The first suggest can do &lt;code>return {&amp;quot;A&amp;quot;: [&amp;quot;avalue1&amp;quot;, &amp;quot;avalue2&amp;quot;, &amp;quot;avalue3&amp;quot;]}&lt;/code>. This will populate the A param with a dropdown. A subsequent suggest call can populate the value for B, with a list of options or with an actual value. The suggest handler is optional. A sample suggest handler is&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">suggest&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">alist&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">store&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">select&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">table&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">adata&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">aval&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">alist&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">aval&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">alist&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">B&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">store&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">select_one&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">table&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">adata&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">A&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">value&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">bval&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">{}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>See weather app &lt;a href="https://github.com/openrundev/apps/blob/main/misc/weather/app.star" target="_blank" rel="noopener">code&lt;/a>:&lt;a href="https://utils.demo.clace.io/weather" target="_blank" rel="noopener">demo&lt;/a> for an example of using suggest.&lt;/p>
&lt;h2>Report Types&lt;span class="hx:absolute hx:-mt-20" id="report-types">&lt;/span>
&lt;a href="#report-types" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The response &lt;code>values&lt;/code> can be a list of string or a list of dicts. The report is generated automatically by default. For list of strings, the report is a TEXT report. For list of dicts, the report can be either&lt;/p>
&lt;ul>
&lt;li>TABLE - selected if all dict values for the first row are simple types&lt;/li>
&lt;li>JSON - selected if any of the values for the first row is a complex type (like dict or list)&lt;/li>
&lt;/ul>
&lt;p>For TABLE report, the fields from the first row are used as columns. Extra fields in subsequent rows are ignored. For JSON report, a JSON tree representation of each row is shown. The report type can be set to specific type instead of using AUTO.&lt;/p>
&lt;h2>Custom Templates&lt;span class="hx:absolute hx:-mt-20" id="custom-templates">&lt;/span>
&lt;a href="#custom-templates" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>If the &lt;code>report&lt;/code> type is set to any value other than &lt;code>ace.AUTO/TEXT/JSON/TABLE&lt;/code>, that is treated as a custom template to use. The template should be defined in a &lt;code>*.go.html&lt;/code> file. Either the file name can be used or a template/block name can be used. See &lt;a href="https://openrun.dev/docs/develop/templates/#template-file-location" >template&lt;/a> for details.&lt;/p>
&lt;p>For styling, OpenRun uses DaisyUI by default, so default styles are reset. The custom template can use inline styles or it can use TailwindCSS/DaisyUI. For DaisyUI, the app has to be run in dev mode first for the style.css to be generated. See &lt;a href="https://openrun.dev/docs/develop/styling/#tailwindcss" >styling&lt;/a> for details.&lt;/p>
&lt;p>See dictionary &lt;a href="https://github.com/openrundev/apps/tree/main/misc/dictionary" target="_blank" rel="noopener">code&lt;/a>:&lt;a href="https://utils.demo.clace.io/dict" target="_blank" rel="noopener">demo&lt;/a> for an actions example app which shows different type of reports.&lt;/p>
&lt;h2>Param Value Selector&lt;span class="hx:absolute hx:-mt-20" id="param-value-selector">&lt;/span>
&lt;a href="#param-value-selector" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>For some params, it is useful to be able to provide a list of values from which the user can choose. The way this is supported is by using an options param. If &lt;code>param1&lt;/code> is a param which should show up as a selector, then define another param with the name &lt;code>options-param1&lt;/code>, of type &lt;code>LIST&lt;/code>. Set a default value for &lt;code>options-param1&lt;/code> with the values to show in the selector dropdown. For example&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">params.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">param&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;param1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;The param1 description&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">default&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;option1&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">param&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;options-param1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">LIST&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Options for param1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">default&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;option1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;option2&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>In the UI, &lt;code>options-param1&lt;/code> is not displayed. &lt;code>param1&lt;/code> is show with a selector, having &lt;code>option1&lt;/code> and &lt;code>option2&lt;/code> as options. See &lt;a href="https://github.com/openrundev/apps/tree/main/misc/dictionary" target="_blank" rel="noopener">dictionary&lt;/a> for an app which uses this.&lt;/p>
&lt;p>This approach is used for flexibility, instead of directly allowing the options to be configured for the param. The options param approach has the flexibility that when an app is installed, the options can be configured for the installation. This avoids having to maintain different copies of the app code. For example:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">openrun app create --approve --param options-param1&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;[&amp;#34;option1&amp;#34;, &amp;#34;option2&amp;#34;, &amp;#34;options3&amp;#34;]&amp;#39;&lt;/span> /mycode /myapp&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>adds a new &lt;code>options3&lt;/code> option.&lt;/p>
&lt;h2>Display Types&lt;span class="hx:absolute hx:-mt-20" id="display-types">&lt;/span>
&lt;a href="#display-types" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>For string type params, the &lt;code>display_type&lt;/code> property can be set to &lt;code>FILE&lt;/code>, &lt;code>PASSWORD&lt;/code> or &lt;code>TEXTAREA&lt;/code>. If no value is set, the field shows as a text input box. &lt;code>FILE&lt;/code> param shows as a file upload input. &lt;code>PASSWORD&lt;/code> shows as a password input. &lt;code>TEXTAREA&lt;/code> shows as a text area.&lt;/p>
&lt;h2>File Handling&lt;span class="hx:absolute hx:-mt-20" id="file-handling">&lt;/span>
&lt;a href="#file-handling" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>For &lt;code>FILE&lt;/code> display type, the Action app user can upload a file. The file is uploaded to a temp file on the server and the file name is available through the &lt;code>args.param_name&lt;/code>. The file can be process as required from disk. Multiple &lt;code>FILE&lt;/code> type params are supported, each param can upload one file only. The temp files are deleted at the end of the handler function execution.&lt;/p>
&lt;p>To return file as output for the Action, using the &lt;a href="https://openrun.dev/docs/plugins/catalog/#serve_tmp_file" >&lt;code>fs.serve_tmp_file&lt;/code>&lt;/a> API. This makes a file on disk available through an API.&lt;/p>
&lt;p>See number_lines app &lt;a href="https://github.com/openrundev/apps/blob/main/misc/num_lines/app.star" target="_blank" rel="noopener">code&lt;/a>:&lt;a href="https://utils.demo.clace.io/num_lines" target="_blank" rel="noopener">demo&lt;/a> for an example of using this API. Use &lt;code>report=ace.DOWNLOAD&lt;/code> property in the &lt;code>ace.result&lt;/code> to generate a file download link.&lt;/p>
&lt;p>Files from the system temp directory and from &lt;code>/tmp&lt;/code> are accessible by default for &lt;code>serve_tmp_file&lt;/code> API. The file is deleted from disk by default after the first download. This can be configured at the system level using&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">app_config&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">fs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">file_access&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;$TEMPDIR&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;/tmp&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>To set this at the app level, run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>openrun app update-metadata conf --promote fs.file_access=&amp;#39;[&amp;#34;/var/tmp&amp;#34;, &amp;#34;$TEMPDIR&amp;#34;, &amp;#34;/tmp&amp;#34;]&amp;#39; /myapp&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>Multiple Actions&lt;span class="hx:absolute hx:-mt-20" id="multiple-actions">&lt;/span>
&lt;a href="#multiple-actions" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Multiple actions can be defined for an app. Each action should have a dedicated path. If there are multiple actions, a switcher dropdown is automatically added for the app. The order of entries in the dropdown is the same order as defined in the app.&lt;/p>
&lt;p>See weather app &lt;a href="https://github.com/openrundev/apps/blob/main/misc/weather/app.star" target="_blank" rel="noopener">code&lt;/a>:&lt;a href="https://utils.demo.clace.io/weather" target="_blank" rel="noopener">demo&lt;/a> for an example of using multiple actions in one app.&lt;/p></description></item><item><title>App Authentication</title><link>https://openrun.dev/docs/configuration/authentication/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/configuration/authentication/</guid><description>
&lt;p>By default, apps are created with the &lt;code>none&lt;/code> authentication type. A &lt;code>system&lt;/code> auth is available which uses &lt;code>admin&lt;/code> as the username. The password is displayed on the screen during the initial setup of the OpenRun server config.&lt;/p>
&lt;p>To set the auth type, add &lt;code>--auth system&lt;/code> to the app create command. After an app is created, the auth type can be changed by running &lt;code>app update-settings auth system /myapp&lt;/code>.&lt;/p>
&lt;h2>Default Authentication Type&lt;span class="hx:absolute hx:-mt-20" id="default-authentication-type">&lt;/span>
&lt;a href="#default-authentication-type" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Any app when created uses the default auth type configured for the server. &lt;code>none&lt;/code> is the default. To change this, add&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">security&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">app_default_auth_type&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;github_prod&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>assuming there is a &lt;code>github_prod&lt;/code> oauth config.&lt;/p>
&lt;p>Any new app created will use this as the auth unless overridden in the &lt;code>app create&lt;/code> call or using &lt;code>app update&lt;/code>.&lt;/p>
&lt;h2>Client Cert Authentication (mTLS)&lt;span class="hx:absolute hx:-mt-20" id="client-cert-authentication-mtls">&lt;/span>
&lt;a href="#client-cert-authentication-mtls" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Apps can be updated to use mutual TLS authentication. To enable this, first set &lt;code>disable_client_certs&lt;/code> to &lt;code>false&lt;/code> in the &lt;code>https&lt;/code> section. Add a &lt;code>client_auth&lt;/code> config entry in server config with the CA certificate to verify against. Multiple entries can be added, the entry name should be &lt;code>cert&lt;/code> or should start with &lt;code>cert_&lt;/code>. For example&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">https&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">disable_client_certs&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">client_auth&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cert_test1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ca_cert_file&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s2">&amp;#34;/data/certs/ca1.crt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">client_auth&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">cert_test2&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">ca_cert_file&lt;/span>&lt;span class="p">=&lt;/span>&lt;span class="s2">&amp;#34;/data/certs/ca2.crt&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>defines two client_auth configs: &lt;code>cert_test1&lt;/code> using ca1.crt and &lt;code>cert_test2&lt;/code> using ca2.crt. Apps can be updated to use this auth config by running &lt;code>app update-settings auth cert_test1 /myapp&lt;/code> or &lt;code>app update-settings auth cert_test2 /myapp&lt;/code>.&lt;/p>
&lt;p>Any API call to the app has to pass the client certificates. Using curl, the call would look like:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">curl -k --cert client.crt --key client.key https://localhost:25223/myapp&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>If the client cert has been signed with the root CA defined in /data/certs/ca1.crt, the API call will succeed. Otherwise it fails. HTTP requests are not allowed when client cert authentication is used.&lt;/p>
&lt;h2>OAuth Authentication&lt;span class="hx:absolute hx:-mt-20" id="oauth-authentication">&lt;/span>
&lt;a href="#oauth-authentication" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>OAuth based authentication is supported for the following providers:&lt;/p>
&lt;ul>
&lt;li>github&lt;/li>
&lt;li>google&lt;/li>
&lt;li>digitalocean&lt;/li>
&lt;li>bitbucket&lt;/li>
&lt;li>amazon&lt;/li>
&lt;li>azuread&lt;/li>
&lt;li>microsoftonline&lt;/li>
&lt;li>gitlab&lt;/li>
&lt;li>auth0&lt;/li>
&lt;li>okta&lt;/li>
&lt;li>oidc&lt;/li>
&lt;/ul>
&lt;p>The configuration format for each is&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">auth&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">github_test&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">key&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;abcdefgh&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">secret&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;mysecret&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Here, the auth config entry name is &lt;code>github_test&lt;/code>. The entry name can be one of the supported providers, or a supported provider name followed by a &lt;code>_&lt;/code> and a qualifier. The provider name is case sensitive. So &lt;code>github&lt;/code>, &lt;code>google&lt;/code>, &lt;code>github_prod&lt;/code>, &lt;code>google_my_org&lt;/code> etc are valid config names. &lt;code>github-test&lt;/code> and &lt;code>my_org_google&lt;/code> are not valid.&lt;/p>
&lt;p>The server &lt;code>openrun.toml&lt;/code> can have multiple auth configs defined. One of them can be set to be the default using &lt;code>app_default_auth_type&lt;/code> config. Apps can be configured to use one of &lt;code>system&lt;/code> or &lt;code>none&lt;/code> or a valid auth config name as the &lt;code>auth&lt;/code>. For example, app 1 can use &lt;code>system&lt;/code> and app 2 can use &lt;code>github_test&lt;/code>.&lt;/p>
&lt;h2>Callback Url&lt;span class="hx:absolute hx:-mt-20" id="callback-url">&lt;/span>
&lt;a href="#callback-url" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>To enable any Oauth provider, the callback url domain has to be specified in the server config. Add&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">security&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">callback_url&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;https://example.com:25223&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>in the &lt;code>openrun.toml&lt;/code>. In the OAuth account, for an entry &lt;code>github_test&lt;/code>, the callback url to use will be &lt;code>https://example.com:25223/_openrun/auth/github_test/callback&lt;/code>.&lt;/p>
&lt;p>The format for the callback url to use is &lt;code>&amp;lt;CALLBACK_URL&amp;gt;/_openrun/auth/&amp;lt;PROVIDER_ENTRY_NAME&amp;gt;/callback&lt;/code>. The callback url has to exactly match this format.&lt;/p>
&lt;h2>OAuth Config Details&lt;span class="hx:absolute hx:-mt-20" id="oauth-config-details">&lt;/span>
&lt;a href="#oauth-config-details" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The config details depend on the provider type. The &lt;code>key&lt;/code> is generally the Client Id and the &lt;code>secret&lt;/code> is the Client Secret. For some providers, additional config config entries are supported. These are:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>google&lt;/strong>: The google provider supports a &lt;code>hosted_domain&lt;/code> option. This is the domain name to verify on the user being logged in. For example, this can be set to &lt;code>openrun.dev&lt;/code>.&lt;/li>
&lt;li>&lt;strong>okta&lt;/strong>: The Okta provider supports the &lt;code>org_url&lt;/code> config, the tenant url to verify.&lt;/li>
&lt;li>&lt;strong>auth0&lt;/strong>: The Auth0 provider supports the &lt;code>domain&lt;/code> config.&lt;/li>
&lt;li>&lt;strong>oidc&lt;/strong>: OIDC supports the &lt;code>discovery_url&lt;/code> config property.&lt;/li>
&lt;/ul>
&lt;p>For all the providers, an optional &lt;code>scopes&lt;/code> property is also supported. This is the list of scopes to configure for the OAuth account.&lt;/p>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-yellow-100 hx:bg-yellow-50 hx:text-yellow-900 hx:dark:border-yellow-200/30 hx:dark:bg-yellow-700/30 hx:dark:text-yellow-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">⚠️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">The first time a new provider is added, it is important to manually verify an app, to verify if the required authentication restrictions are in place. For example, with google, any valid google user can login, including gmail.com accounts. The &lt;code>hosted_domain&lt;/code> config has to be used to restrict this.&lt;/div>
&lt;/div>
&lt;/div>
&lt;p>The OAuth integration internally uses the &lt;a href="https://github.com/markbates/goth" target="_blank" rel="noopener">goth&lt;/a> library, see &lt;a href="https://github.com/markbates/goth/blob/master/examples/main.go" target="_blank" rel="noopener">examples&lt;/a> for implementation details.&lt;/p></description></item><item><title>Audit Events</title><link>https://openrun.dev/docs/applications/audit/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/applications/audit/</guid><description>
&lt;p>OpenRun automatically creates audit events for all operations. See &lt;a href="https://audit.demo.clace.io/" target="_blank" rel="noopener">demo&lt;/a> for a demo of events viewing.&lt;/p>
&lt;h2>Introduction&lt;span class="hx:absolute hx:-mt-20" id="introduction">&lt;/span>
&lt;a href="#introduction" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>All operations against the OpenRun server are automatically logged in a database. The default location for this database is &lt;code>$OPENRUN_HOME/metadata/openrun_audit.db&lt;/code>. This can be configured by setting the property&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">metadata&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">audit_db_connection&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;sqlite:$OPENRUN_HOME/metadata/openrun_audit.db&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The events which are logged are&lt;/p>
&lt;ul>
&lt;li>All HTTP request except GET, HEAD and OPTIONS&lt;/li>
&lt;li>System events, like app updates and any metadata changes&lt;/li>
&lt;li>Action invocations (suggest, validate and exec)&lt;/li>
&lt;li>Custom events, as defined in app code&lt;/li>
&lt;/ul>
&lt;h2>Configuration&lt;span class="hx:absolute hx:-mt-20" id="configuration">&lt;/span>
&lt;a href="#configuration" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The configurable options related to audit events are:&lt;/p>
&lt;ul>
&lt;li>&lt;code>app_config.audit.redact_url&lt;/code>: Set to true to redact the API path for HTTP events. By default, the API path, except for query string, is logged&lt;/li>
&lt;li>&lt;code>app_config.audit.skip_http_events&lt;/code>: Set to true to skip HTTP event logging&lt;/li>
&lt;/ul>
&lt;p>The app config options can be set globally in the openrun.toml. It can also be set individually for an app by setting the app metadata. For example,&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app update-metadata conf --promote &lt;span class="s1">&amp;#39;audit.redact_url=true&amp;#39;&lt;/span> /myapp&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The retention for audit events is configurable globally. The config settings in &lt;code>openrun.toml&lt;/code> are:&lt;/p>
&lt;ul>
&lt;li>&lt;code>system.http_event_retention_days&lt;/code> : Number of days to retain http events, default 90&lt;/li>
&lt;li>&lt;code>system.non_http_event_retention_days&lt;/code> : Number of days to retain non-http events, default 180&lt;/li>
&lt;/ul>
&lt;h2>Custom Events&lt;span class="hx:absolute hx:-mt-20" id="custom-events">&lt;/span>
&lt;a href="#custom-events" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>HTTP, System and Action events are generated automatically. Apps can also define custom events. To add a custom event, in a handler function, add a call to &lt;code>ace.audit&lt;/code>. The parameters for &lt;code>ace.audit&lt;/code> are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">Property&lt;/th>
&lt;th style="text-align: center">Optional&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Default&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">operation&lt;/td>
&lt;td style="text-align: center">false&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The operation type to log&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">target&lt;/td>
&lt;td style="text-align: center">false&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The target the operation is being done on&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">detail&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">Detailed info about the event&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>For example, the dictionary app &lt;a href="https://github.com/openrundev/apps/blob/4e7722235b62c1d22308dc55ce8b65c812354177/misc/dictionary/app.star#L18" target="_blank" rel="noopener">does&lt;/a>:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">audit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;word_lookup&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">word&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>This will enable &lt;a href="https://audit.demo.clace.io/?operation=word_lookup" target="_blank" rel="noopener">searching&lt;/a> the audit events (using the Viewer app) for all operation of type &amp;ldquo;word_lookup&amp;rdquo;.&lt;/p>
&lt;p>Only the last call to &lt;code>ace.audit&lt;/code> from a handler function is logged.&lt;/p>
&lt;h2>Event Viewer&lt;span class="hx:absolute hx:-mt-20" id="event-viewer">&lt;/span>
&lt;a href="#event-viewer" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Events can be viewed by admin using the Event Viewer app &lt;a href="https://github.com/openrundev/apps/tree/main/openrun/audit_viewer" target="_blank" rel="noopener">code&lt;/a>: &lt;a href="https://audit.demo.clace.io/" target="_blank" rel="noopener">demo&lt;/a>. To install the app on your instance, run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app create --approve github.com/openrundev/apps/openrun/audit_viewer /events&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The event viewer shows events for all apps. This app can be installed with access by admins only.&lt;/p></description></item><item><title>Container Plugin</title><link>https://openrun.dev/docs/plugins/container/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/plugins/container/</guid><description>
&lt;p>The &lt;code>container.in&lt;/code> plugin provides the &lt;code>config&lt;/code> API to allow configuring the container backend.&lt;/p>
&lt;h2>Introduction&lt;span class="hx:absolute hx:-mt-20" id="introduction">&lt;/span>
&lt;a href="#introduction" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>OpenRun can build and manage containers for implementing the app backend APIs. The &lt;code>config&lt;/code> API is used to configure at the app level what configuration is used for the container.&lt;/p>
&lt;h2>API&lt;span class="hx:absolute hx:-mt-20" id="api">&lt;/span>
&lt;a href="#api" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The &lt;code>container.in&lt;/code> plugin has just one main api, &lt;code>config&lt;/code>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">API&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>config&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Read&lt;/td>
&lt;td style="text-align: center">Configures the container details for the app&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>The &lt;code>config&lt;/code> API supports the following parameter:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>src&lt;/strong> (string, optional) : the source for containerfile, &lt;code>auto&lt;/code> by default&lt;/li>
&lt;li>&lt;strong>port&lt;/strong> (int, optional) : the port number exposed from the container&lt;/li>
&lt;li>&lt;strong>scheme&lt;/strong> (string, optional) : the url scheme, &lt;code>http&lt;/code> by default&lt;/li>
&lt;li>&lt;strong>health&lt;/strong> (string, optional) : the health check API, &lt;code>/&lt;/code> by default&lt;/li>
&lt;li>&lt;strong>lifetime&lt;/strong> (string, optional) : the lifetime for the container, default is to start a service when app is initialize. Set to &lt;code>container.COMMAND&lt;/code> to allow running commands against the container using &lt;code>container.run&lt;/code> without starting a service.&lt;/li>
&lt;li>&lt;strong>build_dir&lt;/strong> (string, optional) : the build directory for the build, &lt;code>/&lt;/code> by default&lt;/li>
&lt;/ul>
&lt;p>When the &lt;code>src&lt;/code> is auto, the container file is auto detected. It checks for presence of either &lt;code>Containerfile&lt;/code> or &lt;code>Dockerfile&lt;/code>. If the value begins with &lt;code>image:&lt;/code>, the subsequent portion is treated as the image to download. No image build is done in that case. Any other value for &lt;code>src&lt;/code> is treated as the file name to use as the container file.&lt;/p>
&lt;p>&lt;code>port&lt;/code> can be specified in the container file, using a EXPOSE directive. If a value other than zero is specified in the config, that takes precedence over the value in the Expose.&lt;/p>
&lt;p>The container plugin also supports the &lt;a href="https://openrun.dev/docs/plugins/catalog/#run" >&lt;code>run&lt;/code>&lt;/a> API, same as the &lt;code>exec&lt;/code> plugin. This allows running a command inside a container.&lt;/p>
&lt;p>A sample program using the container &lt;code>config&lt;/code> is&lt;/p>
&lt;!-- prettier-ignore -->
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;proxy.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;proxy&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;container.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;container&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;My App&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">routes&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">proxy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">container&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">URL&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">container&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">container&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">container&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">AUTO&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">permissions&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">permission&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;proxy.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;config&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">container&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">URL&lt;/span>&lt;span class="p">]),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">permission&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;container.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;config&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">container&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">AUTO&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span> &lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>A app which runs an command against a specified image (see &lt;a href="https://github.com/openrundev/appspecs/blob/main/image-cmd/app.star" target="_blank" rel="noopener">image-cmd spec&lt;/a> is&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;container.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;container&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">dry_run&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">split&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">command&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34; &amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">container&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">split&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">:],&lt;/span> &lt;span class="n">parse_json&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">value&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">result&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Command output&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app_name&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34; : &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">param&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span> &lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">actions&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">action&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Run Command using &amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">param&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">run&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">description&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Run specified command in container&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">hidden&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;secrets&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;app_name&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;image&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">container&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">container&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;image:&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">param&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">lifetime&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">container&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">COMMAND&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">permissions&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">permission&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;container.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;config&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;image:&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">param&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">image&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">secrets&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">secrets&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">permission&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;container.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;run&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">secrets&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">secrets&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;!-- prettier-ignore-end --></description></item><item><title>Response</title><link>https://openrun.dev/docs/app/response/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/app/response/</guid><description>
&lt;h2>Response Data&lt;span class="hx:absolute hx:-mt-20" id="response-data">&lt;/span>
&lt;a href="#response-data" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The Response from the handler function is passed to the template to be converted to HTML. The handler response is accessible through &lt;code>.Data&lt;/code>, or &lt;code>$Data&lt;/code> if in &lt;a href="https://pkg.go.dev/text/template#:~:text=When%20execution%20begins%2C%20%24%20is%20set%20to%20the%20data%20argument%20passed%20to%20Execute%2C%20that%20is%2C%20to%20the%20starting%20value%20of%20dot." target="_blank" rel="noopener">another scope&lt;/a>. Any python object can be used as the return value. Using a dictionary is recommended, so that error handling is easier. Adding a &lt;code>Error&lt;/code> key in the response dict can indicate to the template that an error condition needs to be handled.&lt;/p>
&lt;p>For example, a handler like&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">handler&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">req&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Query&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;Name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">name&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="s2">&amp;#34;Error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;Error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Name not specified&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;Name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">None&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;test&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">routes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">)])&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>allows the template to handle the error by doing&lt;/p>
&lt;!-- prettier-ignore -->
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{block &amp;#34;openrun_body&amp;#34; .}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{if .Data.Error}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">div&lt;/span> &lt;span class="na">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;color: red&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>{{.Data.Error}}&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">div&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{else}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Hi {{.Data.Name}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{end}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{end}}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;!-- prettier-ignore-end -->
&lt;h2>Redirect Response&lt;span class="hx:absolute hx:-mt-20" id="redirect-response">&lt;/span>
&lt;a href="#redirect-response" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>If the API needs to redirect the client to another location after a POST/PUT/DELETE operation, the handler function can return an &lt;code>ace.Redirect&lt;/code> structure. The fields in this structure are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">Property&lt;/th>
&lt;th style="text-align: center">Optional&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Default&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">url&lt;/td>
&lt;td style="text-align: center">false&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The url to redirect to&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">code&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">int&lt;/td>
&lt;td style="text-align: center">303&lt;/td>
&lt;td style="text-align: center">The HTTP status code, 303 or 302&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>For example, this code does a 303 redirect after a POST API, which provides &lt;a href="https://en.wikipedia.org/wiki/Post/Redirect/Get" target="_blank" rel="noopener">handling&lt;/a> for update requests.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">def&lt;/span> &lt;span class="nf">create_game&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">level&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">req&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">Form&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;level&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">post&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">SERVICE_URL&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;/api/create_game/&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">level&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">redirect&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">AppPath&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;/game/&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">()[&lt;/span>&lt;span class="s2">&amp;#34;GameId&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>Custom Response&lt;span class="hx:absolute hx:-mt-20" id="custom-response">&lt;/span>
&lt;a href="#custom-response" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>In some cases, a custom response need to be generated, with special headers. Or the response needs to use a template different from the one defined in the route, which could happen in the case of an error. For such cases, a &lt;code>ace.Response&lt;/code> structure can be returned by the handler. The fields in this structure are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">Property&lt;/th>
&lt;th style="text-align: center">Optional&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Default&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">data&lt;/td>
&lt;td style="text-align: center">false&lt;/td>
&lt;td style="text-align: center">object&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The response data&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">block&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">Optional only if type is &amp;ldquo;json&amp;rdquo;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">type&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">inherited from the route type definition&lt;/td>
&lt;td style="text-align: center">If &amp;ldquo;json&amp;rdquo;, block is ignored&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">code&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">int&lt;/td>
&lt;td style="text-align: center">200&lt;/td>
&lt;td style="text-align: center">HTTP status code&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">retarget&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">&lt;a href="https://htmx.org/reference/#:~:text=for%20possible%20values-,HX%2DRetarget,-a%20CSS%20selector" target="_blank" rel="noopener">HX-Retarget&lt;/a> header value, CSS selector to target, like &amp;ldquo;#error_id&amp;rdquo;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">reswap&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">&lt;a href="https://htmx.org/reference/#:~:text=the%20location%20bar-,HX%2DReswap,-allows%20you%20to" target="_blank" rel="noopener">HX-Reswap&lt;/a>, like &amp;ldquo;outerHTML&amp;rdquo;&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>For example, this handler code uses retarget to handle errors by updating the html property which has id &amp;ldquo;gameErrorId&amp;rdquo;&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">http&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">post&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">api_url&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">json&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="n">ret&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Error&amp;#34;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ret&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;game_error_block&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">retarget&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;#gameErrorId&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">return&lt;/span> &lt;span class="n">fetch_game&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">req&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">game_id&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>This code returns a 404 with a custom body generated from a template block called &amp;ldquo;invalid_challenge_block&amp;rdquo;&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="n">challenge&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Error&amp;#34;&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">response&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">challenge&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;invalid_challenge_block&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">code&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">404&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>JSON Response&lt;span class="hx:absolute hx:-mt-20" id="json-response">&lt;/span>
&lt;a href="#json-response" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>All responses are HTML by default, as required for building a proper Hypermedia client. There are some cases where data needs to be returned to the client in JSON format. The type property can be used for those cases. For example, &lt;a href="https://github.com/openrundev/apps/blob/dbec99126329adbcff30824b050ff1d559922bdd/system/memory_usage/app.star#L98" target="_blank" rel="noopener">this API&lt;/a> returns JSON&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/memory&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">handler&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">memory_handler&lt;/span>&lt;span class="p">),&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Here, the response from the handler function is returned as JSON, no template is used. Also, in this handler, if there is a call to &lt;code>ace.Response&lt;/code>, the type will default to JSON since that is the type specified at the route level. Mime type detection based on the &lt;code>Accept&lt;/code> header is planned, it is not currently supported.&lt;/p></description></item><item><title>Proxy Plugin</title><link>https://openrun.dev/docs/plugins/proxy/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/plugins/proxy/</guid><description>
&lt;p>The &lt;code>proxy.in&lt;/code> plugin provides the &lt;code>config&lt;/code> API to allow proxying of API calls.&lt;/p>
&lt;h2>Introduction&lt;span class="hx:absolute hx:-mt-20" id="introduction">&lt;/span>
&lt;a href="#introduction" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>OpenRun can proxy API calls to external endpoints or to backend APIs implemented in a container. The &lt;code>config&lt;/code> API is used to configure at the route level what configuration is used for the proxy.&lt;/p>
&lt;h2>API&lt;span class="hx:absolute hx:-mt-20" id="api">&lt;/span>
&lt;a href="#api" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The &lt;code>proxy.in&lt;/code> plugin has just one api, &lt;code>config&lt;/code>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">API&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">&lt;strong>config&lt;/strong>&lt;/td>
&lt;td style="text-align: center">Read&lt;/td>
&lt;td style="text-align: center">Configures the proxy details for the route&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>The &lt;code>config&lt;/code> API supports the following parameter:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>url&lt;/strong> (string, required) : The url to proxy to. Use &lt;code>container.URL&lt;/code> to proxy to backend container&lt;/li>
&lt;li>&lt;strong>strip_path&lt;/strong> (string, optional) : extra path values to strip from the proxied API call&lt;/li>
&lt;li>&lt;strong>preserve_host&lt;/strong> (bool, optional) : whether to preserve the Host header. Default false, the Host header is set to the target host value&lt;/li>
&lt;li>&lt;strong>strip_app&lt;/strong> (bool, optional) : whether to strip the app path from the proxied API call. Default true.&lt;/li>
&lt;/ul>
&lt;h2>Example&lt;span class="hx:absolute hx:-mt-20" id="example">&lt;/span>
&lt;a href="#example" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>This is an example app which proxies data to google.com. This app has to be installed at the root level, since google does not use relative paths.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">load&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;proxy.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;proxy&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Proxy App&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">routes&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">proxy&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">proxy&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">config&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;https://www.google.com&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">permissions&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">permission&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;proxy.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;config&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">param&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">url&lt;/span>&lt;span class="p">]),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div></description></item><item><title>Secrets Management</title><link>https://openrun.dev/docs/configuration/secrets/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/configuration/secrets/</guid><description>
&lt;p>OpenRun supports secret management when working with apps. Secrets can be passed to containerized apps through the environment params. Secrets can also be passed to any plugin as argument. For OAuth config, the client secrets can be configured as secret in the config file.&lt;/p>
&lt;h2>Supported Providers&lt;span class="hx:absolute hx:-mt-20" id="supported-providers">&lt;/span>
&lt;a href="#supported-providers" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>OpenRun currently supports AWS Secrets Manager (ASM) and HashiCorp Vault as providers for secrets management. Secrets can also be read from the environment of the OpenRun server, which can be used in development and testing. Secrets can also be read from a local properties file.&lt;/p>
&lt;h2>AWS Secrets Manager&lt;span class="hx:absolute hx:-mt-20" id="aws-secrets-manager">&lt;/span>
&lt;a href="#aws-secrets-manager" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>To enable ASM, add one or more entries in the &lt;code>openrun.toml&lt;/code> config. The config name should be &lt;code>asm&lt;/code> or should start with &lt;code>asm_&lt;/code>. For example&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">secret&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">asm&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">secret&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">asm_prod&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">profile&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;myaccount&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>creates two ASM configs. &lt;code>asm&lt;/code> uses the default profile and &lt;code>asm_prod&lt;/code> uses the &lt;code>myaccount&lt;/code> profile. The default config is read from the home directory ~/.aws/config and ~/.aws/credentials as documented in &lt;a href="https://docs.aws.amazon.com/sdkref/latest/guide/file-location.html" target="_blank" rel="noopener">AWS docs&lt;/a>. The user id under which the OpenRun server was started is looked up for the aws config file.&lt;/p>
&lt;p>To access a secret in app parameters from &lt;code>asm_prod&lt;/code> config, use &lt;code>--param MYPARAM='{{secret_from &amp;quot;asm_prod&amp;quot; &amp;quot;MY_SECRET_KEY&amp;quot;}}'&lt;/code> as the param value. Use &lt;code>--param MYPARAM='{{secret &amp;quot;MY_SECRET_KEY&amp;quot;}}'&lt;/code> to read from the default provider.&lt;/p>
&lt;h2>HashiCorp Vault&lt;span class="hx:absolute hx:-mt-20" id="hashicorp-vault">&lt;/span>
&lt;a href="#hashicorp-vault" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>To enable Vault secret provider, add one or more entries in the &lt;code>openrun.toml&lt;/code> config. The config name should be &lt;code>vault&lt;/code> or should start with &lt;code>vault_&lt;/code>. For example&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">secret&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">vault_local&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">address&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;http://127.0.0.1:8200&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">token&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;abc&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">secret&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">vault_prod&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">address&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;http://myvault.example.com:8200&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">token&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;def&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>creates two Vault configs. The &lt;code>address&lt;/code> and &lt;code>token&lt;/code> properties are required.&lt;/p>
&lt;h2>Environment Secrets&lt;span class="hx:absolute hx:-mt-20" id="environment-secrets">&lt;/span>
&lt;a href="#environment-secrets" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Adding a secret provider with the name &lt;code>env&lt;/code> or starting with &lt;code>env_&lt;/code>, like&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">secret&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">env&lt;/span>&lt;span class="p">]&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>enables looking up the OpenRun server environment for secrets. This can be accessed like &lt;code>--param MYPARAM='{{secret_from &amp;quot;env&amp;quot; &amp;quot;MY_SECRET_KEY&amp;quot;}}'&lt;/code>. No properties are required in the env provider config. The value of MY_SECRET_KEY in the OpenRun server env wil be passed as the param.&lt;/p>
&lt;h2>Properties Secrets&lt;span class="hx:absolute hx:-mt-20" id="properties-secrets">&lt;/span>
&lt;a href="#properties-secrets" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Secrets can be read from a properties file. The config name should be &lt;code>prop&lt;/code> or should start with &lt;code>prop_&lt;/code>. To use this, add&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">secret&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prop_test1&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">file_name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;/etc/props.properties&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>&lt;code>file_name&lt;/code> is a required property.&lt;/p>
&lt;h2>Secrets Usage&lt;span class="hx:absolute hx:-mt-20" id="secrets-usage">&lt;/span>
&lt;a href="#secrets-usage" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Secrets can be accessed using the syntax &lt;code>{{secret_from &amp;quot;PROVIDER_NAME&amp;quot; &amp;quot;KEY_NAME&amp;quot;}}&lt;/code>. To read from the default provider, use &lt;code>{{secret &amp;quot;KEY_NAME&amp;quot;}}&lt;/code>. The three contexts in which secrets can be accessed are:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>App Params&lt;/strong> : Param values in &lt;code>params.star&lt;/code> or in the &lt;a href="https://openrun.dev/docs/container/overview/#app-environment-params" >app metadata definition&lt;/a> can access the secrets.&lt;/li>
&lt;li>&lt;strong>Plugin arguments&lt;/strong> : Secrets can be passed as string arguments in calls to &lt;a href="https://openrun.dev/docs/plugins/" >plugin functions&lt;/a>.&lt;/li>
&lt;li>&lt;strong>Config file&lt;/strong>: Secrets are supported in &lt;code>openrun.toml&lt;/code> config for:
&lt;ul>
&lt;li>For client key and secret in &lt;a href="https://openrun.dev/docs/configuration/authentication/#oauth-authentication" >auth config&lt;/a>&lt;/li>
&lt;li>For password in &lt;a href="https://openrun.dev/docs/configuration/security/#private-repository-access" >git_auth config&lt;/a>&lt;/li>
&lt;li>For string values in &lt;a href="https://openrun.dev/docs/plugins/overview/#account-linking" >plugin config&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>Secrets are always resolved late. The Starlark code does not get access to the plain text secrets. The secret lookup happens when the call to the plugin API is done. In case of params, the lookup happens when the param is passed to the container.&lt;/p>
&lt;p>For git_auth config, an example secret usage is&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">auth&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">google_prod&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">key&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;mykey.apps.googleusercontent.com&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">secret&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s1">&amp;#39;{{secret_from &amp;#34;PROVIDER_NAME&amp;#34; &amp;#34;GOOGLE_OAUTH_SECRET&amp;#34;}}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">hosted_domain&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;example.com&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>Plugin Access to Secrets&lt;span class="hx:absolute hx:-mt-20" id="plugin-access-to-secrets">&lt;/span>
&lt;a href="#plugin-access-to-secrets" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>For secrets which are passed to plugins, through app params or plugin arguments, the plugin needs to be authorized to access the secret. The permissions for each plugin are defined in the app definition. For example:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;test&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">routes&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">api&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;TEXT&amp;#34;&lt;/span>&lt;span class="p">)],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">permissions&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">permission&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;exec.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;run&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;ls&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">secrets&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[[&lt;/span>&lt;span class="s2">&amp;#34;c1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;c2&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;TESTENV&amp;#34;&lt;/span>&lt;span class="p">]]),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The secrets accessible are specified as a list of list of strings. In this case, the &lt;code>{{secret &amp;quot;c1&amp;quot; &amp;quot;c2&amp;quot;}}&lt;/code> and &lt;code>{{secret &amp;quot;TESTENV&amp;quot;}}&lt;/code> calls are allowed. Additional keys are also permitted.&lt;/p>
&lt;p>If the key is specified as a string starting with &lt;code>regex:&lt;/code>, then the subsequent part is a regex which is matched against the specified value. For example, &lt;code>ace.permission(&amp;quot;exec.in&amp;quot;, &amp;quot;run&amp;quot;, [&amp;quot;ls&amp;quot;], secrets=[[&amp;quot;regex:TEST_.*&amp;quot;]),&lt;/code> allows accessing any secret starting with &lt;code>TEST_&lt;/code>.&lt;/p>
&lt;h2>Multiple Keys&lt;span class="hx:absolute hx:-mt-20" id="multiple-keys">&lt;/span>
&lt;a href="#multiple-keys" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>If the &lt;code>KEY_NAME&lt;/code> is a single string, it is passed as is to the provider. If multiple keys are specified, they are concatenated and passed to the provider. For example, &lt;code>{{secret_from &amp;quot;env&amp;quot; &amp;quot;ABC&amp;quot; &amp;quot;DEF&amp;quot;}}&lt;/code> will get converted to a env lookup for &lt;code>ABC_DEF&lt;/code>. The delimiter used depends on the provider. The defaults are:&lt;/p>
&lt;ul>
&lt;li>ASM and Vault : &lt;code>/&lt;/code>&lt;/li>
&lt;li>Env : &lt;code>_&lt;/code>&lt;/li>
&lt;li>Properties: &lt;code>.&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>The formatter used to concatenate the keys can be customized by setting the &lt;code>keys_printf&lt;/code> property. For example,&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">secret&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">prop&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">file_name&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;/etc/mykeys.properties&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">keys_printf&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;%s-%s.%s&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>combines &lt;code>{{secret_from &amp;quot;prop&amp;quot; &amp;quot;ABC&amp;quot; &amp;quot;DEF&amp;quot; &amp;quot;XYZ&amp;quot;}}&lt;/code> as &lt;code>ABC-DEF.XYZ&lt;/code>. This allows the app to work with multiple secret providers without requiring code changes in the app.&lt;/p>
&lt;h2>Default Provider&lt;span class="hx:absolute hx:-mt-20" id="default-provider">&lt;/span>
&lt;a href="#default-provider" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>If the provider name is passed as &lt;code>default&lt;/code> or set to empty, a default provider is used. The default provider can be configured in the &lt;code>openrun.toml&lt;/code> as&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">app_config&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">security&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">default_secrets_provider&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;env&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The &lt;code>env&lt;/code> provider is used by default if it is enabled in the config. The default can be changed per app by setting&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app update-metadata conf --promote &lt;span class="s1">&amp;#39;security.default_secrets_provider=&amp;#34;prop_myfile&amp;#34;&amp;#39;&lt;/span> /myapp&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div></description></item><item><title>Templates</title><link>https://openrun.dev/docs/develop/templates/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/develop/templates/</guid><description>
&lt;p>OpenRun uses &lt;a href="https://pkg.go.dev/html/template@go1.21.2" target="_blank" rel="noopener">Go HTML templates&lt;/a> for returning data to the client. See &lt;a href="https://pkg.go.dev/text/template@go1.21.2" target="_blank" rel="noopener">here&lt;/a> for an overview of the template syntax. &lt;a href="https://gohugo.io/templates/introduction/" target="_blank" rel="noopener">Hugo docs&lt;/a> are a good source for an overview of using go templates.&lt;/p>
&lt;p>The &lt;a href="http://masterminds.github.io/sprig/" target="_blank" rel="noopener">Sprig template library functions&lt;/a> are included automatically. Two functions from Sprig which are excluded for security considerations are &lt;code>env&lt;/code> and &lt;code>expandenv&lt;/code>.&lt;/p>
&lt;p>Two extra functions &lt;code>static&lt;/code> and &lt;code>fileNonEmpty&lt;/code> are added for handling static file paths.&lt;/p>
&lt;h2>static function&lt;span class="hx:absolute hx:-mt-20" id="static-function">&lt;/span>
&lt;a href="#static-function" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>This function takes a file name and returns the url for a file in the static folder with a sha256 hash included in the file name. This approach is similar to the &lt;a href="https://github.com/benbjohnson/hashfs" target="_blank" rel="noopener">hashfs library&lt;/a>. If the &lt;code>static&lt;/code> folder contains a file &lt;code>file1&lt;/code> with the content &lt;code>file1data&lt;/code>, then a call to &lt;code>static &amp;quot;file&amp;quot;&lt;/code> will return &lt;code>/test/static/file1-ca9e40772ef9119c13100a8258bc38a665a0a1976bf81c96e69a353b6605f5a7&lt;/code>, assuming the app is installed at &lt;code>/test&lt;/code>.&lt;/p>
&lt;p>The returned file name has a hash based on the file contents. The file server used by OpenRun will serve aggressive cache headers &lt;code>Cache-Control: public, max-age=31536000&lt;/code> when this file is referenced by the browser. When the file contents change, the content hash will change and the file name will change. The files on disk are not renamed, only the filesystem used by the OpenRun server in memory sees the hashed file names.&lt;/p>
&lt;p>This approach allows for a build-less system with aggressive static asset caching. The usual approach for this requires the static file to be renamed to have the hash value in the file name on disk. This require a build step to do the file renaming. The hashfs approach can avoid the build step. The file hash computation and compression are done once, during app installation in prod mode. There is no runtime penalty for this. In dev mode, the file hashing is done during the api serving.&lt;/p>
&lt;h2>fileNonEmpty function&lt;span class="hx:absolute hx:-mt-20" id="filenonempty-function">&lt;/span>
&lt;a href="#filenonempty-function" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The fileNonEmpty function returns a bool, indicating whether a static file with that non-hashed name is present and is not empty. This can be used to conditionally include style files if present.&lt;/p>
&lt;p>For example&lt;/p>
&lt;!-- prettier-ignore -->
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{ if fileNonEmpty &amp;#34;css/style.css&amp;#34; }}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">link&lt;/span> &lt;span class="na">rel&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;stylesheet&amp;#34;&lt;/span> &lt;span class="na">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;{{ static &amp;#34;&lt;/span>&lt;span class="na">css&lt;/span>&lt;span class="err">/&lt;/span>&lt;span class="na">style&lt;/span>&lt;span class="err">.&lt;/span>&lt;span class="na">css&lt;/span>&lt;span class="err">&amp;#34;&lt;/span> &lt;span class="err">}}&amp;#34;&lt;/span> &lt;span class="p">/&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{ end }}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;!-- prettier-ignore-end -->
&lt;p>checks if the &amp;ldquo;css/style.css&amp;rdquo; file is present and not empty. If so, it is linked using the &lt;code>static&lt;/code> function, which returns a hashed file name which can be cached aggressively.&lt;/p>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-yellow-100 hx:bg-yellow-50 hx:text-yellow-900 hx:dark:border-yellow-200/30 hx:dark:bg-yellow-700/30 hx:dark:text-yellow-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">⚠️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">The path passed to &lt;code>static&lt;/code> and &lt;code>fileNonEmpty&lt;/code> functions should not include static, it is automatically added. So use &lt;code>{{ static &amp;quot;css/style.css&amp;quot; }}&lt;/code>, not &lt;code>{{ static &amp;quot;static/css/style.css&amp;quot; }}&lt;/code>&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2>Template File Location&lt;span class="hx:absolute hx:-mt-20" id="template-file-location">&lt;/span>
&lt;a href="#template-file-location" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Templates are loaded once on app initialization. In dev mode, they are automatically reload on file updates. By default, the app source home directory is searched for template files. This can be changed by adding this directive in the &lt;code>ace.app&lt;/code> config.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="err">settings=&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;routing&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="nt">&amp;#34;template_locations&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;*.go.html&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;templates/*.go.html&amp;#34;&lt;/span>&lt;span class="p">]}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>the default is &lt;code>[&amp;quot;*.go.html&amp;quot;]&lt;/code>. If additional directories are added, &lt;code>&amp;quot;*.go.html&amp;quot;&lt;/code> still needs to present in the list since generated files are created in the app home directory. Also, all folders in the list need to contains at least one template file. File names have to be unique across folders. Files are referenced by their name, without the folder name, when used in template import directives.&lt;/p>
&lt;h2>Structured Template Layout&lt;span class="hx:absolute hx:-mt-20" id="structured-template-layout">&lt;/span>
&lt;a href="#structured-template-layout" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The default in OpenRun is to load all the templates in one parse operation. This is easy to get started with but can result in challenges when the same template block needs to be duplicated in different files. OpenRun also supports a structured template layout. See &lt;a href="https://philipptanlak.com/web-frontends-in-go/#how-i-structure-my-templates" target="_blank" rel="noopener">this blog&lt;/a> for an explanation about the differences between the two layouts. The default in OpenRun is the WordPress layout, all template files are loaded in one go. To use the second, Django layout, use the structured format.&lt;/p>
&lt;p>If there is a &lt;code>base_templates&lt;/code> folder in the app main folder with one or more &lt;code>*.go.html&lt;/code> files, the structured template layout is used. In the structured layout format, all the base template files are loaded in one parse operation. Each of the files in the app main folder is then individually loaded. Each top level file has access to its own template blocks plus the base templates.&lt;/p>
&lt;p>This has the advantage that the main templates can have duplicate templates, with no conflicts because they are loaded individually. For example, if there is a &lt;code>base_templates/base.go.html&lt;/code> file with&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">head&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> {{block &amp;#34;body&amp;#34; .}} {{end}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">footer&lt;/span>&lt;span class="p">&amp;gt;&amp;lt;/&lt;/span>&lt;span class="nt">footer&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">html&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{end}}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>and a &lt;code>index.go.html&lt;/code> file with&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{define &amp;#34;body&amp;#34;}} My Index Body {{end}} {{- template &amp;#34;full&amp;#34; . -}}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>and a &lt;code>help.go.html&lt;/code> file with&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{define &amp;#34;body&amp;#34;}} My Help Body {{end}} {{- template &amp;#34;full&amp;#34; . -}}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>then a route using &lt;code>index.go.html&lt;/code> will get the HTML for the index page and route using &lt;code>help.go.html&lt;/code> with get HTML help page. Although the &lt;code>body&lt;/code> is defined in two template files, there is no conflict since the root level template files are loaded independently.&lt;/p>
&lt;p>Without structured template layout, if a duplicate block is found, the one to be used depends on the order in which the files are loaded. To change the folders used for base templates, set:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="err">settings=&lt;/span>&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;routing&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="nt">&amp;#34;base_templates&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;base_templates&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;template_helpers&amp;#34;&lt;/span>&lt;span class="p">]}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>App Layout&lt;span class="hx:absolute hx:-mt-20" id="app-layout">&lt;/span>
&lt;a href="#app-layout" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>When using custom layout with &lt;code>custom_layout=True&lt;/code>, the app developer has to create the &lt;code>index.go.html&lt;/code> file. Add a directive like:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{ template &amp;#34;openrun_gen_import&amp;#34; . }}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>in the head section to ensure that the auto generated &lt;code>openrun_gen_import&lt;/code> directives are loaded in the . This will include the style files, HTMX library and the live reload functionality in dev mode.&lt;/p>
&lt;p>In the default layout mode, the auto generated &lt;code>index_gen.go.html&lt;/code> file is used. The app developer has to provide a &lt;code>openrun_body&lt;/code> block. It can be in any template file, the convention is to use &lt;code>app.go.html&lt;/code>. For example:&lt;/p>
&lt;!-- prettier-ignore -->
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">{{block &amp;#34;openrun_body&amp;#34; .}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Data is {{.Data}}
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">{{end}}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;!-- prettier-ignore-end -->
&lt;p>The &lt;code>.Data&lt;/code> binding has the data as returned by the handler function for the route.&lt;/p>
&lt;p>shared across both apps.&lt;/p>
&lt;h2>Static Root Files&lt;span class="hx:absolute hx:-mt-20" id="static-root-files">&lt;/span>
&lt;a href="#static-root-files" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The &lt;code>static&lt;/code> folder is used for file which are served under the &lt;code>/static&lt;/code> path. Content based hashing is supported for these files.&lt;/p>
&lt;p>For files which need to be served under the root level, the &lt;code>static_root&lt;/code> folder is used. Files in this folder are served at the root path. For example, if an app is installed at &lt;code>example.com:&lt;/code> and a robots.txt file needs to be served, a file &lt;code>static_root/robots.txt&lt;/code> can be added to the app. This will be automatically served at &lt;code>example.com/robots.txt&lt;/code>. Note that the static folder path is stripped from the route name. The file name should not conflict with any of the API routes defined in the app. Nested folders are looked up in the static root folder.&lt;/p>
&lt;p>Content based hashing is not supported for static root files. These files are expected to be used for well known files like &lt;code>favicon.ico&lt;/code>. Most regular static file serving use cases should use the &lt;code>static&lt;/code> folder, not the &lt;code>static_root&lt;/code> folder.&lt;/p></description></item><item><title>Styling</title><link>https://openrun.dev/docs/develop/styling/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/develop/styling/</guid><description>
&lt;p>OpenRun supports working with Classless CSS libraries and also with TailwindCSS and DaisyUI. To use this, add the directive&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">style&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;daisyui&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>in the app definition. The fields in the &lt;code>ace.style&lt;/code> structure are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">Property&lt;/th>
&lt;th style="text-align: center">Optional&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Default&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">library&lt;/td>
&lt;td style="text-align: center">false&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The library to use, url to classless library, &amp;ldquo;tailwindcss&amp;rdquo; or &amp;ldquo;daisyui&amp;rdquo;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">themes&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string[]&lt;/td>
&lt;td style="text-align: center">[]&lt;/td>
&lt;td style="text-align: center">The daisyui themes to include&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">disable_watcher&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">bool&lt;/td>
&lt;td style="text-align: center">false&lt;/td>
&lt;td style="text-align: center">Whether to disable the tailwind watcher process startup in dev mode&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">light&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">emerald&lt;/td>
&lt;td style="text-align: center">The DaisyUI theme to use in light mode for Actions&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">dark&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">night&lt;/td>
&lt;td style="text-align: center">The DaisyUI theme to use in dark mode for Actions&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2>Classless CSS&lt;span class="hx:absolute hx:-mt-20" id="classless-css">&lt;/span>
&lt;a href="#classless-css" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>If the library property is a url, it should point to a publicly accessible style file. The style file is downloaded into the &lt;code>static/gen/css/style.css&lt;/code> file. The file is automatically included as part of the &lt;code>openrun_gen_import&lt;/code> template.&lt;/p>
&lt;p>For example,&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">style&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;https://unpkg.com/mvp.css@1.14.0/mvp.css&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>imports the &lt;a href="https://andybrewer.github.io/mvp/" target="_blank" rel="noopener">MVP.css&lt;/a> library. Since this is classless, no changes are required in the HTML templates.&lt;/p>
&lt;h2>TailwindCSS&lt;span class="hx:absolute hx:-mt-20" id="tailwindcss">&lt;/span>
&lt;a href="#tailwindcss" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>To use TailwindCSS, in app settings, add&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">style&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;tailwindcss&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Tailwind CSS works by scanning the HTML files for class names, generating the corresponding styles and then writing them to a static CSS file. A watcher process is started when an app using Tailwind is loaded in dev mode. The output of the watcher is written to &lt;code>static/gen/css/style.css&lt;/code> file. This file is automatically included as part of the &lt;code>openrun_gen_import&lt;/code> template.&lt;/p>
&lt;p>To ensure that the tailwind watcher is started, the tailwind CLI needs to be installed manually. The &lt;a href="https://tailwindcss.com/blog/standalone-cli" target="_blank" rel="noopener">standalone CLI&lt;/a> can be used. If using DaisyUI, use this &lt;a href="https://github.com/dobicinaitis/tailwind-cli-extra" target="_blank" rel="noopener">custom build&lt;/a> of the standalone CLI with DaisyUI included.&lt;/p>
&lt;p>The OpenRun server config file has the following entries:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">system&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">tailwindcss_command&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;npx tailwindcss&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">file_watcher_debounce_millis&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="mi">300&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>&lt;code>tailwindcss_command&lt;/code> is the command use to start the watcher. If the standalone version is being used change to&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">system&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">tailwindcss_command&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;/path/to/tailwindcss&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>&lt;code>file_watcher_debounce_millis&lt;/code> is used to prevent repeated reloads of the application files during dev mode. On slower machine, this value might have to be increased, but setting it too high will cause the reload to be slower.&lt;/p>
&lt;h2>DaisyUI&lt;span class="hx:absolute hx:-mt-20" id="daisyui">&lt;/span>
&lt;a href="#daisyui" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>To use &lt;a href="https://daisyui.com/" target="_blank" rel="noopener">DaisyUI&lt;/a>, in app settings, add&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">style&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;daisyui&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">themes&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;dark&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Change to the preferred &lt;a href="https://daisyui.com/docs/themes/" target="_blank" rel="noopener">theme&lt;/a>. DaisyUI is a good option to use to get great default styling for components, with the full flexibility of Tailwind. To use DaisyUI, use the npm version of Tailwind or use this &lt;a href="https://github.com/dobicinaitis/tailwind-cli-extra" target="_blank" rel="noopener">custom version&lt;/a> of the standalone CLI with DaisyUI included. OpenRun takes care of creating the config files. Using the CDN version of DaisyUI or Tailwind is not recommended since that will cause the style files to be large.&lt;/p>
&lt;p>If using &lt;a href="https://openrun.dev/docs/actions/" >Actions&lt;/a>, DaisyUI styles are automatically included. The themes can be customized using the &lt;code>light&lt;/code> and &lt;code>dark&lt;/code> property.&lt;/p></description></item><item><title>JavaScript</title><link>https://openrun.dev/docs/develop/javascript/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/develop/javascript/</guid><description>
&lt;p>OpenRun supports importing JavaScript libraries as &lt;a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules" target="_blank" rel="noopener">JavaScript Modules&lt;/a> . To use this feature, add&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">libraries&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">library&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;d3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;7.8.5&amp;#34;&lt;/span>&lt;span class="p">)]&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>in the app definition. The fields in the &lt;code>ace.library&lt;/code> structure are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">Property&lt;/th>
&lt;th style="text-align: center">Optional&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Default&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">name&lt;/td>
&lt;td style="text-align: center">false&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The name of the library to import&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">version&lt;/td>
&lt;td style="text-align: center">false&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The version of the library&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">args&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string[]&lt;/td>
&lt;td style="text-align: center">[]&lt;/td>
&lt;td style="text-align: center">Arguments to pass to esbuild&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>The args array uses the &lt;a href="https://pkg.go.dev/github.com/evanw/esbuild/pkg/cli" target="_blank" rel="noopener">esbuild cli syntax&lt;/a>. For example, passing args as &lt;code>[&amp;quot;--minify&amp;quot;]&lt;/code> will enable minification for the imported module.&lt;/p>
&lt;p>To directly download a library from a CDN to the static folder, add the url directly. For example,&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">libraries&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;https://unpkg.com/jquery@3.3.1/dist/jquery.min.js&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The HTMX library and its SSE extension are automatically downloaded.&lt;/p>
&lt;h2>JavaScript Modules&lt;span class="hx:absolute hx:-mt-20" id="javascript-modules">&lt;/span>
&lt;a href="#javascript-modules" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>JavaScript modules (also called ESM or ECMAScript Modules) are a way to import Javascript libraries dynamically, providing a unique namespace for all functions. Modules, once imported, can be used in the client code without requiring any build steps. See &lt;a href="https://jvns.ca/blog/2023/02/16/writing-javascript-without-a-build-system/" target="_blank" rel="noopener">jvns.ca&lt;/a> and &lt;a href="https://simonwillison.net/2023/May/2/download-esm/" target="_blank" rel="noopener">simonwillison.net&lt;/a> for notes about this approach. OpenRun tries to provide an easy interface to modules, converting npm packages to module format so that subsequent code changes do not require any build steps.&lt;/p>
&lt;h2>Workflow&lt;span class="hx:absolute hx:-mt-20" id="workflow">&lt;/span>
&lt;a href="#workflow" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The workflow when using modules in OpenRun for an app in dev mode is:&lt;/p>
&lt;ul>
&lt;li>Ensure &lt;a href="https://nodejs.org/en/download" target="_blank" rel="noopener">nodejs&lt;/a> is installed&lt;/li>
&lt;li>Using npm, install package you want to use a modules. for example &lt;code>npm install d3&lt;/code>&lt;/li>
&lt;li>Add the ace.library entry in the app config. OpenRun will automatically run esbuild and import the package as a module into &lt;code>static/gen/esm&lt;/code>&lt;/li>
&lt;li>Add an importmap in the head section of the html. Like &lt;a href="https://github.com/openrundev/openrun/blob/8b7f0d7d0c692e0ca3c6a74e97d1913031b954a1/examples/memory_usage/index.go.html#L10" target="_blank" rel="noopener">here&lt;/a>.
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">script&lt;/span> &lt;span class="na">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;importmap&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;imports&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;d3&amp;#34;&lt;/span>&lt;span class="o">:&lt;/span> &lt;span class="s2">&amp;#34;{{ static &amp;#34;&lt;/span>&lt;span class="nx">gen&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">esm&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="nx">d3&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mf">7.8&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="mf">5.&lt;/span>&lt;span class="nx">js&lt;/span>&lt;span class="s2">&amp;#34;}}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;/&lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;/li>
&lt;li>Use the library as required in your client. Like &lt;a href="https://github.com/openrundev/openrun/blob/8b7f0d7d0c692e0ca3c6a74e97d1913031b954a1/examples/memory_usage/static/js/app.js#L4" target="_blank" rel="noopener">here&lt;/a>&lt;/li>
&lt;/ul>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="kr">import&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="nx">as&lt;/span> &lt;span class="nx">d3&lt;/span> &lt;span class="nx">from&lt;/span> &lt;span class="s2">&amp;#34;d3&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Creating the module is a one time step. The generated module can be checked into source code. On a new machine, to make code changes to the app, you do not need nodejs or npm to be installed.&lt;/p>
&lt;p>For production deployment, no changes are required. Checkout the git repo containing the source code and create a OpenRun app. OpenRun will serve the static assets over HTTP/2 with content hash based caching. The assets are compressed for serving, there is no need usually for mimifying the modules.&lt;/p>
&lt;h2>Esbuild Config&lt;span class="hx:absolute hx:-mt-20" id="esbuild-config">&lt;/span>
&lt;a href="#esbuild-config" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>OpenRun includes esbuild, there is no need to install esbuild manually. The OpenRun server config has the entry&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">system&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">node_path&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The node_path property is used by esbuild, these paths are searched for packages in addition to the node_modules directories in all parent directories. See &lt;a href="https://esbuild.github.io/api/#node-paths" target="_blank" rel="noopener">esbuild docs&lt;/a> for details. Paths should be separated with : on Unix and ; on Windows.&lt;/p>
&lt;p>If you install the npm packages in your home directory, esbuild will pick up those without any additional configuration. Since each OpenRun project is importing the npm package as a module, you do not need to maintain separate node_modules for each OpenRun project.&lt;/p>
&lt;p>If you do not want esbuild to create modules, set the node_path property in the server config to &lt;code>disable&lt;/code>. You will have to manually download the module file into the static folder.&lt;/p>
&lt;h2>Notes&lt;span class="hx:absolute hx:-mt-20" id="notes">&lt;/span>
&lt;a href="#notes" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;ul>
&lt;li>The version number specified in the &lt;code>ace.library&lt;/code> is used to create the file name under &lt;code>static/gen/esm&lt;/code>. The actual package version depends on what was install using npm. Ensure that the same version is installed by npm as specified in the library config.&lt;/li>
&lt;li>Only the &lt;code>minify&lt;/code> option for esbuild has been tested with OpenRun. Other options like chunking the files might not work currently.&lt;/li>
&lt;li>The JavaScript support is for running JS on the browser. There is no support for running JavaScript on the OpenRun server, the server runs only Go code and starlark applications.&lt;/li>
&lt;li>If an library url is specified, that is downloaded directly. There is no need for npm package in that case.&lt;/li>
&lt;/ul></description></item></channel></rss>