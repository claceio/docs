<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>OpenRun - App Deployment Simplified – Managing Apps</title><link>https://openrun.dev/docs/applications/</link><description>Recent content in Managing Apps on OpenRun - App Deployment Simplified</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><atom:link href="https://openrun.dev/docs/applications/index.xml" rel="self" type="application/rss+xml"/><item><title>App Management Overview</title><link>https://openrun.dev/docs/applications/overview/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/applications/overview/</guid><description>
&lt;p>The various commands for managing OpenRun apps are&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ openrun
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> openrun - OpenRun client and server https://openrun.dev/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">USAGE:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> openrun &lt;span class="o">[&lt;/span>global options&lt;span class="o">]&lt;/span> &lt;span class="nb">command&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="nb">command&lt;/span> options&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>arguments...&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">COMMANDS:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server Manage the OpenRun server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app Manage OpenRun apps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> preview Manage OpenRun preview apps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> account Manage OpenRun accounts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> param Manage app parameter values
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> version Manage app versions
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app-webhook Manage app level webhooks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password Generate a password bcrypt config entry
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> help, h Shows a list of commands or &lt;span class="nb">help&lt;/span> &lt;span class="k">for&lt;/span> one &lt;span class="nb">command&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ openrun app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> openrun app - Manage OpenRun apps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">USAGE:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> openrun app &lt;span class="nb">command&lt;/span> &lt;span class="o">[&lt;/span>&lt;span class="nb">command&lt;/span> options&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>arguments...&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">COMMANDS:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> create Create a new app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> list List apps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> delete Delete an app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> approve Approve app permissions
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> reload Reload the app &lt;span class="nb">source&lt;/span> code
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> promote Promote the app from staging to production
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> update-settings Update OpenRun apps settings. Settings changes are NOT staged, they apply immediately to matched stage, prod and preview apps.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> update-metadata Update OpenRun app metadata. Metadata updates are staged and have to be promoted to prod. Use &lt;span class="s2">&amp;#34;openrun param&amp;#34;&lt;/span> to update app parameter metadata.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> help, h Shows a list of commands or &lt;span class="nb">help&lt;/span> &lt;span class="k">for&lt;/span> one command&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The app management subcommands are under the &lt;code>app&lt;/code> command. The &lt;code>preview&lt;/code> command manages preview app for an app and &lt;code>version&lt;/code> command manages versions for an app. The &lt;code>account&lt;/code> command is for managing accounts for an app.&lt;/p>
&lt;h2>App Management&lt;span class="hx:absolute hx:-mt-20" id="app-management">&lt;/span>
&lt;a href="#app-management" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>All the app management subcommands except &lt;code>create&lt;/code> take a glob pattern, so multiple apps can be updated using one command. Use the &lt;code>--dry-run&lt;/code> option with any update CLI call to verify if the options specified are correct before the actual run. No database changes are committed during dry-run and no changes are done in memory.&lt;/p>
&lt;h2>Glob Pattern&lt;span class="hx:absolute hx:-mt-20" id="glob-pattern">&lt;/span>
&lt;a href="#glob-pattern" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The &lt;code>reload/delete/promote/approve/list/update&lt;/code> commands accept a glob pattern. &lt;code>example.com:**&lt;/code> will match apps under the example.com domain. &lt;code>*:**&lt;/code> will match all apps in all domains, &lt;code>all&lt;/code> is a shortcut for this. When using glob patterns, place the pattern inside double-quotes to avoid issues with shell star expansion. For example, &lt;code>&amp;quot;example.com:**&amp;quot;&lt;/code>&lt;/p>
&lt;p>The default for &lt;code>app list&lt;/code> command is to list all apps. All other commands require an glob pattern to be specified explicitly.&lt;/p>
&lt;p>When multiple apps are being updated, if any one app fails, the whole operation is rolled back. This allows for atomic updates across multiple applications.&lt;/p>
&lt;h2>App Listing&lt;span class="hx:absolute hx:-mt-20" id="app-listing">&lt;/span>
&lt;a href="#app-listing" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Use the &lt;code>app list&lt;/code> command to list apps. If the &lt;code>--internal&lt;/code> option is used, then the internal staging and preview apps for each matched prod app are also listed.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ openrun app list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Id Type Version Auth GitInfo Domain:Path SourceUrl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d3kCRk43FOuIGy979NbBWakRMm PROD &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 memory.demo.clace.io:/ github.com/openrundev/openrun/examples/memory_usage/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d3kCZ28w6VIzoXMsT9yldwijxL PROD &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 cowbull.co:/ github.com/openrundev/openrun/examples/cowbull
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d3kCjmw8ldQ2LaOd0CLmWXDApq PROD &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 / github.com/openrundev/openrun/examples/demo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d3kKVvSsSgUHqtNGZaD95NuLK3 PROD &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 du.demo.clace.io:/ github.com/openrundev/openrun/examples/disk_usage/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d6KcZmNwHIB8cSzNCotqBHpeje PROD &lt;span class="m">5&lt;/span> NONE main:ed7545ae739dfe85140a utils.demo.clace.io:/bookmarks github.com/openrundev/apps/utils/bookmarks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ openrun app list -i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Id Type Version Auth GitInfo Domain:Path SourceUrl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d3kCRk43FOuIGy979NbBWakRMm PROD &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 memory.demo.clace.io:/ github.com/openrundev/openrun/examples/memory_usage/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_stg_2d3kCRk43FOuIGy979NbBWakRMm STG &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 memory.demo.clace.io:/_cl_stage github.com/openrundev/openrun/examples/memory_usage/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d3kCZ28w6VIzoXMsT9yldwijxL PROD &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 cowbull.co:/ github.com/openrundev/openrun/examples/cowbull
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_stg_2d3kCZ28w6VIzoXMsT9yldwijxL STG &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 cowbull.co:/_cl_stage github.com/openrundev/openrun/examples/cowbull
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d3kCjmw8ldQ2LaOd0CLmWXDApq PROD &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 / github.com/openrundev/openrun/examples/demo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_stg_2d3kCjmw8ldQ2LaOd0CLmWXDApq STG &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 /_cl_stage github.com/openrundev/openrun/examples/demo
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d3kKVvSsSgUHqtNGZaD95NuLK3 PROD &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 du.demo.clace.io:/ github.com/openrundev/openrun/examples/disk_usage/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_stg_2d3kKVvSsSgUHqtNGZaD95NuLK3 STG &lt;span class="m">3&lt;/span> NONE main:9ce5e1adfc28983f7894 du.demo.clace.io:/_cl_stage github.com/openrundev/openrun/examples/disk_usage/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2d6KcZmNwHIB8cSzNCotqBHpeje PROD &lt;span class="m">5&lt;/span> NONE main:ed7545ae739dfe85140a utils.demo.clace.io:/bookmarks github.com/openrundev/apps/utils/bookmarks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_stg_2d6KcZmNwHIB8cSzNCotqBHpeje STG &lt;span class="m">5&lt;/span> NONE main:ed7545ae739dfe85140a utils.demo.clace.io:/bookmarks_cl_stage github.com/openrundev/apps/utils/bookmarks&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Use the &lt;code>version list&lt;/code> command to list versions for particular apps. This command works on prod app or staging app specifically.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">$ openrun version list utils.demo.clace.io:/bookmarks_cl_stage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Active Version Previous CreateTime GitCommit GitMessage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> &lt;span class="m">0&lt;/span> 2024-03-01 19:59:27 +0000 UTC 86385ff67deab288c362 Updated bookmarks app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">2&lt;/span> &lt;span class="m">1&lt;/span> 2024-03-01 20:00:20 +0000 UTC 86385ff67deab288c362 Updated bookmarks app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">3&lt;/span> &lt;span class="m">2&lt;/span> 2024-03-01 20:16:08 +0000 UTC 86385ff67deab288c362 Updated bookmarks app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">4&lt;/span> &lt;span class="m">3&lt;/span> 2024-03-02 00:12:28 +0000 UTC 8080fcfe6be832a1f6f5 Update styling &lt;span class="k">for&lt;/span> bookmarks &lt;span class="nv">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span>&amp;gt; &lt;span class="m">5&lt;/span> &lt;span class="m">4&lt;/span> 2024-03-02 00:23:35 +0000 UTC ed7545ae739dfe85140a Update styling &lt;span class="k">for&lt;/span> bookmarks app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ openrun version list utils.demo.clace.io:/bookmarks
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Active Version Previous CreateTime GitCommit GitMessage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> &lt;span class="m">0&lt;/span> 2024-03-01 19:59:27 +0000 UTC 86385ff67deab288c362 Updated bookmarks app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">2&lt;/span> &lt;span class="m">1&lt;/span> 2024-03-01 20:00:20 +0000 UTC 86385ff67deab288c362 Updated bookmarks &lt;span class="nv">app&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span>&amp;gt; &lt;span class="m">5&lt;/span> &lt;span class="m">2&lt;/span> 2024-03-02 00:23:35 +0000 UTC ed7545ae739dfe85140a Update styling &lt;span class="k">for&lt;/span> bookmarks app&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The &lt;code>version switch&lt;/code> command can be used to switch versions, up or down or to particular version. The &lt;code>version revert&lt;/code> command can be used to revert the last change. &lt;code>app promote&lt;/code> makes the prod app run the same version as the current staging app.&lt;/p>
&lt;p>In the above listing, the staging app has five versions. Three of those (1,2 and 5) were promoted to prod. &lt;code>version switch previous utils.demo.clace.io:/bookmarks_cl_stage&lt;/code> will change the stage app to version 4. &lt;code>version switch previous utils.demo.clace.io:/bookmarks&lt;/code> will change the prod app to version 2. After that, &lt;code>app promote utils.demo.clace.io:/bookmarks&lt;/code> will change prod to also be at version 4, same as stage. The &lt;code>version switch&lt;/code> command accepts &lt;code>previous&lt;/code>, &lt;code>next&lt;/code> and actual version number as version to switch to.&lt;/p>
&lt;p>A star, like &lt;code>PROD*&lt;/code> in the &lt;code>app list&lt;/code> output indicates that there are staged changes waiting to be promoted. That will show up any time the prod app is at a different version than the stage app.&lt;/p>
&lt;h2>App Authentication&lt;span class="hx:absolute hx:-mt-20" id="app-authentication">&lt;/span>
&lt;a href="#app-authentication" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>By default, apps are created with the no authentication type. &lt;code>system&lt;/code> auth uses &lt;code>admin&lt;/code> as the username. The password is displayed on the screen during the initial setup of the OpenRun server config.&lt;/p>
&lt;p>To change app auth type, add &lt;code>--auth system&lt;/code> to the &lt;code>app create&lt;/code> command. After an app is created, the auth type can be changed by running &lt;code>app update-settings auth system /myapp&lt;/code>. OAuth based authentication is also supported, see &lt;a href="https://openrun.dev/docs/configuration/authentication/" >authentication&lt;/a> for details.&lt;/p>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-yellow-100 hx:bg-yellow-50 hx:text-yellow-900 hx:dark:border-yellow-200/30 hx:dark:bg-yellow-700/30 hx:dark:text-yellow-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">⚠️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">&lt;p>Changes done to the app settings using the &lt;code>app update-settings&lt;/code> command are not staged or versioned, they apply immediately to the stage/prod/preview apps. App settings are fundamental properties of the app, like what authentication type to use, what git auth key to use etc.&lt;/p>
&lt;p>All other changes done to app metadata using &lt;code>app update-metadata&lt;/code>, &lt;code>app reload&lt;/code>, &lt;code>param update&lt;/code> etc are staged before deployment. Use the &lt;code>--promote&lt;/code> option on the change to promote the change immediately when applying it on the staging app. Use &lt;code>app promote&lt;/code> command to promote later. When a promotion is done, &lt;strong>all&lt;/strong> currently staged changes for that app are promoted, not just the most recent change. After promote, the prod app is exactly same as staging app.&lt;/p>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2>Declarative App Management&lt;span class="hx:absolute hx:-mt-20" id="declarative-app-management">&lt;/span>
&lt;a href="#declarative-app-management" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The CLI and management apps allow imperative management of OpenRun apps. OpenRun apps can also be managed declaratively. The app definition has to be defined in a file and OpenRun can apply the configuration. This works similar to the Kubernetes &lt;code>apply&lt;/code> functionality.&lt;/p>
&lt;p>To use this feature, create an app config file, with &lt;code>.ace&lt;/code> extension. The config file should contain one or more &lt;code>app&lt;/code> definitions. For example, in a file called &lt;code>apps.ace&lt;/code>&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">apps.ace&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/myapps/disk_usage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;github.com/openrundev/apps/system/disk_usage&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/myapps/memory_usage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;github.com/openrundev/apps/system/memory_usage&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/myapps/list_files&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;github.com/openrundev/apps/system/list_files&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>defines three apps. Running&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun apply --approve apps.ace&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>will create the apps if not already present. If present, the app configuration is updated to match the new configuration.&lt;/p>
&lt;h3>Apply Command&lt;span class="hx:absolute hx:-mt-20" id="apply-command">&lt;/span>
&lt;a href="#apply-command" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>The &lt;code>apply&lt;/code> command takes one or two arguments: &lt;code>&amp;lt;filePath&amp;gt; [&amp;lt;appPathGlob&amp;gt;]&lt;/code>. The first is a file path, which can be a glob pointing to multiple files. The files can be from local disk or from a git url. The second optional argument is an app path glob which specifies which apps to apply from the loaded files. By default, all apps is the file(s) are applied.&lt;/p>
&lt;p>The options the &lt;code>apply&lt;/code> command takes are:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>OPTIONS:
--branch value, -b value The branch to checkout if using git source (default: &amp;#34;main&amp;#34;)
--commit value, -c value The commit SHA to checkout if using git source. This takes precedence over branch
--git-auth value, -g value The name of the git_auth entry in server config to use
--approve, -a Approve the app permissions (default: false)
--reload value, -r value Which apps to reload: none, updated, matched
--promote, -p Promote changes from stage to prod (default: false)
--clobber Force update app config, overwriting non-declarative changes (default: false)
--force-reload, -f Force reload even if there is no new commit (default: false)
--dry-run Verify command but don&amp;#39;t commit any changes (default: false)
--help, -h show help&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The branch/commit/git-auth arguments are for the apply file itself (if the file path is a git url). For the app source code, the git config has to be specified in the config file.&lt;/p>
&lt;p>By default, changes are applied to the stage app. Add the &lt;code>--promote&lt;/code> option to promote the changes. Use the &lt;code>--approve&lt;/code> option to approve any permission changes required by apps.&lt;/p>
&lt;p>The &lt;code>--reload&lt;/code> option controls whether new source code is loaded for apps during the apply operation. Setting it to &lt;code>none&lt;/code> means no apps are reloaded, &lt;code>updated&lt;/code> means apps which have a config update are reloaded. &lt;code>matched&lt;/code> (the default) means all apps matched by the app glob are reloaded, even if there is no config update.&lt;/p>
&lt;p>By default, changes are applied as a three way merge. The old config and new config are compared against the live config. If there are changes between old and new declarative config, those changes are applied. Changes done imperatively are not overwritten. Using the &lt;code>--force&lt;/code> option will overwrite any changes applied imperatively through the CLI or UI. The new declarative config overwrites any existing state when &lt;code>--force&lt;/code> is used.&lt;/p>
&lt;h3>App Configuration&lt;span class="hx:absolute hx:-mt-20" id="app-configuration">&lt;/span>
&lt;a href="#app-configuration" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>The declarative app configuration uses Starlark syntax. An app is defined using the &lt;code>app&lt;/code> struct which has these properties:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">Property&lt;/th>
&lt;th style="text-align: center">Optional&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Default&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">path&lt;/td>
&lt;td style="text-align: center">false&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The app installation domain:path&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">source&lt;/td>
&lt;td style="text-align: center">false&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The app source code url&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">dev&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">bool&lt;/td>
&lt;td style="text-align: center">false&lt;/td>
&lt;td style="text-align: center">Whether app is in dev mode&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">auth&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">default&lt;/td>
&lt;td style="text-align: center">The app authentication type (none or system or default or &lt;custom>)&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">git_auth&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">default&lt;/td>
&lt;td style="text-align: center">The git auth entry to use&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">git_branch&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">main&lt;/td>
&lt;td style="text-align: center">The git branch to use&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">git_commit&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The git commit to use&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">params&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">dict&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The params for the app&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">spec&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The app spec to use for the app&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">app_config&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">dict&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The config settings for the app&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">container_opts&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">dict&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The container options for the app&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">container_args&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">dict&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The container build args options for the app&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">container_vols&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">list string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The container volumes for the app&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>For example, a definition like&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/streamlit&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;github.com/streamlit/streamlit-example&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">git_branch&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;master&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">spec&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;python-streamlit&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">params&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;p1&amp;#34;&lt;/span>&lt;span class="p">:[&lt;/span>&lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;2&amp;#34;&lt;/span>&lt;span class="p">]},&lt;/span> &lt;span class="n">container_opts&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;cpus&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">container_vols&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;/v1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;/v2&amp;#34;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">app_config&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s2">&amp;#34;ac1&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>defines a Streamlit based app. Applying this file will create the app. Config can be updated through the CLI or UI. Subsequent runs of apply will not overwrite the imperative changes. For example, if a new param &amp;ldquo;p2&amp;rdquo; is defined using the CLI, that will be retained during subsequent runs. If the value of &amp;ldquo;p1&amp;rdquo; is updated in the config file, the next apply run will modify the value.&lt;/p>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-yellow-100 hx:bg-yellow-50 hx:text-yellow-900 hx:dark:border-yellow-200/30 hx:dark:bg-yellow-700/30 hx:dark:text-yellow-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">⚠️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">Apps are identified by their path and source url, so those cannot be changed. Dev mode is set during app creation and cannot be updated. App auth and git_auth are settings which are directly applied without being staged. They can be updated through the CLI but not through the config file. All other properties are metadata changes which are staged. They can be updated through the app config. New app versions are created during apply and versions can be reverted at the app level.&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2>Automated Sync&lt;span class="hx:absolute hx:-mt-20" id="automated-sync">&lt;/span>
&lt;a href="#automated-sync" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>OpenRun supports automatically syncing the app definition from Git. The commands to manage sync are:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>openrun sync
NAME:
openrun sync - Manage sync operations, scheduled and webhook
USAGE:
openrun sync command [command options]
COMMANDS:
schedule Create scheduled sync job for updating app config
list List the sync jobs
delete Delete specified sync job
help, h Shows a list of commands or help for one command&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>&lt;code>openrun sync schedule --approve --promote github.com/openrundev/openrun/examples/utils.star&lt;/code> will create a scheduled sync which will run every 15 minutes and check for app config updates to apply. Use &lt;code>--minutes&lt;/code> option to change the frequency.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>openrun sync schedule --help
NAME:
openrun sync schedule - Create scheduled sync job for updating app config
USAGE:
args: &amp;lt;filePath&amp;gt;
&amp;lt;filePath&amp;gt; is the path to the apply file containing the app configuration.
Examples:
Create scheduled sync, reloading apps with code changes: openrun sync schedule ./app.ace
Create scheduled sync, reloading only apps with a config change: openrun sync schedule --reload=updated github.com/openrundev/apps/apps.ace
Create scheduled sync, promoting changes: openrun sync schedule --promote --approve github.com/openrundev/apps/apps.ace
Create scheduled sync, overwriting changes: openrun sync schedule --promote --clobber github.com/openrundev/apps/apps.ace
OPTIONS:
--branch value, -b value The branch to checkout if using git source (default: &amp;#34;main&amp;#34;)
--git-auth value, -g value The name of the git_auth entry in server config to use
--approve, -a Approve the app permissions (default: false)
--reload value, -r value Which apps to reload: none, updated, matched
--promote, -p Promote changes from stage to prod (default: false)
--minutes value, -s value Schedule sync for every N minutes (default: 0)
--clobber Force update app config, overwriting non-declarative changes (default: false)
--force-reload, -f Force reload even if there are no new commits (default: false)
--dry-run Verify command but don&amp;#39;t commit any changes (default: false)
--help, -h show help&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Scheduled sync takes all the same options as the &lt;code>apply&lt;/code> command. The apply is done automatically by OpenRun on schedule.&lt;/p>
&lt;p>Use &lt;code>openrun sync list&lt;/code> to list all jobs and &lt;code>openrun sync delete &amp;lt;sync_id&amp;gt;&lt;/code> to delete a sync job.&lt;/p>
&lt;h2>Sync Frequency&lt;span class="hx:absolute hx:-mt-20" id="sync-frequency">&lt;/span>
&lt;a href="#sync-frequency" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The default sync frequency is every 15 minutes. This can be changed for each sync by passing &lt;code>--minutes 10&lt;/code> during sync creation. To change the default globally, for any new sync being created, set&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="n">system&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">default_schedule_mins&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>GitHub imposes a &lt;a href="https://docs.github.com/en/rest/using-the-rest-api/rate-limits-for-the-rest-api" target="_blank" rel="noopener">rate limit&lt;/a> for API calls. Every sync run make one list API call to the apply file repo and one API call to each source file repo. So if apply files and source files are in the same repo, there is just one API call in total. If there are multiple sync operation, each runs independently. If there a new commit found, then a clone is done on the repo.&lt;/p>
&lt;p>Sync can be run more frequently, making sure rate limits are respected. If a &lt;a href="https://openrun.dev/docs/configuration/security/#private-repository-access" >default git auth&lt;/a> entry is added, that will be used for all list API calls. The rate limits are higher for authenticated requests.&lt;/p></description></item><item><title>Application Routing</title><link>https://openrun.dev/docs/applications/routing/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/applications/routing/</guid><description>
&lt;h2>Request Routing&lt;span class="hx:absolute hx:-mt-20" id="request-routing">&lt;/span>
&lt;a href="#request-routing" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The OpenRun server can host multiple applications simultaneously. Each application gets a dedicated path, the application can use all sub-paths within that without conflicts with other applications.&lt;/p>
&lt;p>When an application is created, a path needs to be specified and a domain can be optionally specified. Routing for application requests is done based on domain and path. The domain is the namespace within which the paths are resolved. If no domain is specified for the app, it is installed for the default domain. &lt;a href="https://openrun.dev/docs/configuration/networking/#default-domain" >Default domain&lt;/a> can be set using the &lt;code>system.default_domain&lt;/code> config property (default value is &lt;code>localhost&lt;/code>).&lt;/p>
&lt;p>Consider this scenario:&lt;/p>
&lt;ul>
&lt;li>App A is installed at /utils/appA&lt;/li>
&lt;li>App B is installed at /appB&lt;/li>
&lt;li>App C is installed at the root level / for domain example.com, example.com:/&lt;/li>
&lt;/ul>
&lt;p>For the above scenario:&lt;/p>
&lt;ul>
&lt;li>Requests to /utils/appA/* for the default domain go to app A&lt;/li>
&lt;li>Requests to /appB/* for the default domain go to App B.&lt;/li>
&lt;li>Requests to example.com for any path will always go to App C, since it is installed at the root path.&lt;/li>
&lt;/ul>
&lt;h2>Creating Applications&lt;span class="hx:absolute hx:-mt-20" id="creating-applications">&lt;/span>
&lt;a href="#creating-applications" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>When an app is being created, a path and an optional domain need to be specified. For the above example scenario:&lt;/p>
&lt;ul>
&lt;li>No new apps can be created for example.com domain, since App C is installed at the root path.&lt;/li>
&lt;li>For the default domain, /utils/appA and /appB are taken, other paths are available.&lt;/li>
&lt;li>New apps can be created under any path, including root path, for new domains and subdomains, like test.example.com.&lt;/li>
&lt;/ul>
&lt;h2>Notes&lt;span class="hx:absolute hx:-mt-20" id="notes">&lt;/span>
&lt;a href="#notes" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;ul>
&lt;li>The domain specified for the app is used only for routing requests. The user has to ensure that the actual DNS routing is done properly outside of OpenRun for the API calls to land on the OpenRun server.&lt;/li>
&lt;li>Using wildcard DNS entries will reduce the configuration required in the DNS service. So if *.example.com points to the IP address of the OpenRun service, any domain based routing done in OpenRun will work with no further DNS configuration being required. The automated certificates created by OpenRun will be domain level certificates, wildcard certificates are not currently created.&lt;/li>
&lt;li>&lt;code>/_openrun/&lt;/code> API path at the root level and &lt;code>/_openrun_app/&lt;/code> within an app path are reserved paths, they are used by the OpenRun internal APIs, requests will not reach the app. This applies for all domains. &lt;code>_cl_&lt;/code> is reserved for use for internal apps, so app path last component cannot have &lt;code>_cl_&lt;/code>.&lt;/li>
&lt;/ul></description></item><item><title>Application Lifecycle</title><link>https://openrun.dev/docs/applications/lifecycle/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/applications/lifecycle/</guid><description>
&lt;h2>Application Types&lt;span class="hx:absolute hx:-mt-20" id="application-types">&lt;/span>
&lt;a href="#application-types" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>A OpenRun application can be one of four types:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Development Apps&lt;/strong> : Used for developing apps, supports live reload from code change on disk.&lt;/li>
&lt;li>&lt;strong>Production Apps&lt;/strong> : For production use. Can be created from git hosted source or from sources on local disk.&lt;/li>
&lt;li>&lt;strong>Staging Apps&lt;/strong> : For reviewing code and config changes before they are pushed to prod. Every prod app has one staging app.&lt;/li>
&lt;li>&lt;strong>Preview Apps&lt;/strong> : For creating a review environment for code changes, useful as part of code review.&lt;/li>
&lt;/ul>
&lt;h2>Development Apps&lt;span class="hx:absolute hx:-mt-20" id="development-apps">&lt;/span>
&lt;a href="#development-apps" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Development mode apps are used for developing or updating OpenRun apps. The source for these apps has to be on local disk, it cannot be git. Any code or config changes are live reloaded immediately for dev apps. To create a dev mode app, add the &lt;code>--dev&lt;/code> option to the &lt;code>app create&lt;/code> command. For example,&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app create --dev --approve /home/user/mycode /myapp&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>Production Apps&lt;span class="hx:absolute hx:-mt-20" id="production-apps">&lt;/span>
&lt;a href="#production-apps" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Without the &lt;code>--dev&lt;/code> options, apps are created as production apps by default. Production apps can be created from source on GitHub or from local disk. In either case, the source code for the app is uploaded to the OpenRun metadata database. For example:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app create --approve /home/user/mycode example.com:/&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>creates an production app. After app creation, the original source location is not read, until a &lt;code>app reload&lt;/code> operation is done to update the sources. The source folder &lt;code>/home/user/mycode&lt;/code> can be deleted if reload is not required, since the sources are present in the OpenRun metadata database. Every production app automatically has one staging app associated with it.&lt;/p>
&lt;h2>Staging Apps&lt;span class="hx:absolute hx:-mt-20" id="staging-apps">&lt;/span>
&lt;a href="#staging-apps" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Staging apps are created for each production app. The purpose of staging app is to be able to verify config and code changes before they are made live in the prod app. For example, after the previous &lt;code>app create&lt;/code> command, a call to &lt;code>app list&lt;/code> with the &lt;code>--internal&lt;/code> option will show two apps:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app list --internal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Id Type Version GitCommit GitBranch Domain:Path SourceUrl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2aMvX3fc9fH18n6i2Jew0tNxnky PROD &lt;span class="m">1&lt;/span> example.com:/ /home/user/mycode
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_stg_2aMvX3fc9fH18n6i2Jew0tNxnky STG &lt;span class="m">1&lt;/span> example.com:/_cl_stage /home/user/mycode&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The second app is the staging app for the first. &lt;code>app list&lt;/code> shows only the main apps by default, the &lt;code>--internal&lt;/code> option makes it show the linked apps.&lt;/p>
&lt;p>The staging app url is available by suffixing &lt;code>_cl_stage&lt;/code> at the end of the app path. So for an app at &lt;code>https://example.com/&lt;/code>, the staging url is &lt;code>https://example.com/cl_stage&lt;/code>. For an app at &lt;code>https://example.com/utils/app1&lt;/code>, the staging app url is &lt;code>https://example.com/utils/app1_cl_stage&lt;/code>.&lt;/p>
&lt;h2>Promoting Changes&lt;span class="hx:absolute hx:-mt-20" id="promoting-changes">&lt;/span>
&lt;a href="#promoting-changes" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>When there are code changes, running &lt;code>app reload&lt;/code> will update the staging environment.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app reload example.com:/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Reloaded apps: example.com:/_cl_stage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">1&lt;/span> app&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span> reloaded, &lt;span class="m">0&lt;/span> app&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span> approved, &lt;span class="m">0&lt;/span> app&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span> promoted.&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The staging app is version 2 now, prod app is still at version 1.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app list -i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Id Type Version GitCommit GitBranch Domain:Path SourceUrl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2aMvX3fc9fH18n6i2Jew0tNxnky PROD* &lt;span class="m">1&lt;/span> example.com:/ /home/user/mycode
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_stg_2aMvX3fc9fH18n6i2Jew0tNxnky STG &lt;span class="m">2&lt;/span> example.com:/_cl_stage /home/user/mycode&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>At this point, going to the url &lt;code>example.com:/_cl_stage&lt;/code> will show the updated code while &lt;code>example.com:/&lt;/code> has not been updated.&lt;/p>
&lt;div class="hx:overflow-x-auto hx:mt-6 hx:flex hx:rounded-lg hx:border hx:py-2 hx:ltr:pr-4 hx:rtl:pl-4 hx:contrast-more:border-current hx:contrast-more:dark:border-current hx:border-blue-200 hx:bg-blue-100 hx:text-blue-900 hx:dark:border-blue-200/30 hx:dark:bg-blue-900/30 hx:dark:text-blue-200">
&lt;div class="hx:ltr:pl-3 hx:ltr:pr-2 hx:rtl:pr-3 hx:rtl:pl-2">&lt;div class="hx:select-none hx:text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">ℹ️&lt;/div>&lt;/div>
&lt;div class="hx:w-full hx:min-w-0 hx:leading-7">
&lt;div class="hx:mt-6 hx:leading-7 hx:first:mt-0">The &lt;code>*&lt;/code> next to PROD indicates that there are staged changes waiting to be promoted to PROD.&lt;/div>
&lt;/div>
&lt;/div>
&lt;p>To promote the changes to prod, run &lt;code>app promote&lt;/code>&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app promote example.com:/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Promoting example.com:/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">1&lt;/span> app&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span> promoted.&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The prod app is at the same version as the staging app now&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app list -i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Id Type Version GitCommit GitBranch Domain:Path SourceUrl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_prd_2aMvX3fc9fH18n6i2Jew0tNxnky PROD &lt;span class="m">2&lt;/span> example.com:/ /home/user/mycode
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">app_stg_2aMvX3fc9fH18n6i2Jew0tNxnky STG &lt;span class="m">2&lt;/span> example.com:/_cl_stage /home/user/mycode&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>If the application code change requires new permissions, the reload operation will fail unless &lt;code>--approve&lt;/code> is added.&lt;/p>
&lt;p>To do the reload, approval and promotion is one step, do &lt;code>openrun app reload --approve --promote example.com:/&lt;/code>.&lt;/p>
&lt;h2>GitHub Reload&lt;span class="hx:absolute hx:-mt-20" id="github-reload">&lt;/span>
&lt;a href="#github-reload" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The rules for fetching source code from local disk and GitHub are:&lt;/p>
&lt;ul>
&lt;li>If the source url starts with &lt;code>http://&lt;/code>, &lt;code>https://&lt;/code> or &lt;code>github.com&lt;/code>, the source is assumed to be from a github API endpoint. Otherwise the source is assumed to be local disk on the OpenRun server.&lt;/li>
&lt;li>If OpenRun client and server are on different machines and local disk is being used, the code needs to be copied to the server node first.&lt;/li>
&lt;li>For GitHub source, the format is https://domain_name/org_name/repo_name/sub/folder, like &lt;code>github.com/openrundev/openrun/examples/disk_usage&lt;/code>. The sub_folder should contain the &lt;code>app.star&lt;/code> config file.&lt;/li>
&lt;li>During &lt;code>app create&lt;/code> and &lt;code>app reload&lt;/code>, the commit id takes precedence over the branch name if both are specified.&lt;/li>
&lt;li>During &lt;code>app reload&lt;/code>, if no branch and commit are specified, the newest code is checked out from the current branch. &lt;code>main&lt;/code> is used as current branch if no branch was previously specified for the app.&lt;/li>
&lt;/ul>
&lt;h2>Preview Apps&lt;span class="hx:absolute hx:-mt-20" id="preview-apps">&lt;/span>
&lt;a href="#preview-apps" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Preview allows the creation of any number of linked preview apps for a main app. This is supported for apps created from GitHub source. The commit id to use needs to be specified when creating the preview. For example,&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun preview create 49182d4ca1cacbd8e3463a77c2174a6da1fb66c9 /myapp&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>creates an app accessible at &lt;code>/myapp_cl_preview_49182d4ca1cacbd8e3463a77c2174a6da1fb66c9&lt;/code> which runs the app code in the specified commit id.&lt;/p>
&lt;p>Preview apps cannot be changed once they are created. If preview app requires new permissions, add the &lt;code>--approve&lt;/code> option to the &lt;code>preview create&lt;/code> command.&lt;/p>
&lt;h2>Write Mode Access&lt;span class="hx:absolute hx:-mt-20" id="write-mode-access">&lt;/span>
&lt;a href="#write-mode-access" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Staging and Preview apps have read only access by default to plugin APIs. This means that when they make calls to plugin APIs, only APIs defined as READ by the plugin are permitted. The HTTP plugin defines GET/OPTIONS/HEAD requests as READ type, POST/PUT/DELETE are defined as WRITE. For the CLI Exec plugin, the run API is defined as WRITE since the CLI command run might do write operations.&lt;/p>
&lt;p>For cases where the plugin defines an API as Write, the app permission can overwrite the default type and define the operation to be a READ operation. For example, the disk_usage app runs the &lt;code>du&lt;/code> command, which is a read operation. The &lt;a href="https://github.com/openrundev/openrun/blob/49182d4ca1cacbd8e3463a77c2174a6da1fb66c9/examples/disk_usage/app.star#L45" target="_blank" rel="noopener">app config defines&lt;/a> the run plugin call as &lt;code>type=&amp;quot;READ&amp;quot;&lt;/code>, over-riding the default WRITE type defined in the plugin. If no type is specified in the permission, the type defined in the plugin takes effect.&lt;/p>
&lt;p>Staging and Preview apps are allowed only READ calls by default, even if the app permissions allow WRITE operations. To allow stage apps access to WRITE operations, run &lt;code>openrun app update-settings stage-write-access true all&lt;/code>. Change &lt;code>all&lt;/code> to the desired app glob pattern.&lt;/p>
&lt;p>To allow preview apps access to WRITE operation, run &lt;code>openrun app update-settings preview-write-access true example.com:/&lt;/code>. This changes the existing preview apps and any new preview apps created for example.com:/ to allow write operations, if the permissions have been approved.&lt;/p></description></item><item><title>Application Security</title><link>https://openrun.dev/docs/applications/appsecurity/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/applications/appsecurity/</guid><description>
&lt;p>OpenRun applications run in a sandbox environment with no direct access to the system or OpenRun service. All access is through plugins. When an application is installed, the admin can audit the application for what access is being requested. Only the permissions which are approved are allowed at runtime.&lt;/p>
&lt;h2>Security Model&lt;span class="hx:absolute hx:-mt-20" id="security-model">&lt;/span>
&lt;a href="#security-model" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The security model used by OpenRun is:&lt;/p>
&lt;ul>
&lt;li>The application code written in Starlark(python) and HTML templates is untrusted.&lt;/li>
&lt;li>The OpenRun service and plugin code (in Go) are trusted.&lt;/li>
&lt;li>The admin can audit and approve the access required by the untrusted application code when the app is being installed.&lt;/li>
&lt;li>After installation, further application code updates do not require any further audit, as long as no new permissions are required. If the updated app code requires any new permission, the new plugin call will fail at runtime with a permission error.&lt;/li>
&lt;/ul>
&lt;p>The trust boundary is about what the application can do in the backend. The frontend code is sandboxed by the browser, there is no additional auditing implemented for the frontend code.&lt;/p>
&lt;p>For apps which make calls to external programs (using &lt;code>exec&lt;/code> plugin) and containerized apps, the external program runs as usual. The OpenRun security model applies for Starlark apps. For other apps, the security model allows control on which program to run and what args to pass and which container to use. But there is no restriction on what the external program or container itself can do.&lt;/p>
&lt;h2>Usecases&lt;span class="hx:absolute hx:-mt-20" id="usecases">&lt;/span>
&lt;a href="#usecases" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>This security model allows for the following:&lt;/p>
&lt;ul>
&lt;li>Users can download applications and run on their machine, without worrying about what operations the app can do on their system outside the audited permissions.&lt;/li>
&lt;li>Operations teams can install and approve applications. Further application updates can be handled by the development team, without requiring the operational admins to verify the updated code. As long as the application works within the originally defined permission boundary, application updates will continue to work.&lt;/li>
&lt;li>Application developers can use LLM powered automated code generation tools without worrying about the side-effects of the code. If the generated code tries to perform any operation not previously approved, it will fail.&lt;/li>
&lt;/ul>
&lt;h2>Sample Application&lt;span class="hx:absolute hx:-mt-20" id="sample-application">&lt;/span>
&lt;a href="#sample-application" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>As an example, the disk usage analysis app requires &lt;a href="https://github.com/openrundev/openrun/blob/8b8975cea2d650c9f80dab6eb70cc5b2ddbe5c40/examples/disk_usage/app.star#L42" target="_blank" rel="noopener">two permissions&lt;/a>&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">app&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">app&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;Disk Usage&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">routes&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">html&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;/&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">partial&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;du_table_block&amp;#34;&lt;/span>&lt;span class="p">)],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">permissions&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">permission&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;exec.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;run&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;du&amp;#34;&lt;/span>&lt;span class="p">]),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">permission&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;exec.in&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s2">&amp;#34;run&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;readlink&amp;#34;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">style&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">style&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;https://unpkg.com/mvp.css@1.14.0/mvp.css&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>It requests permission to use the &lt;code>exec.in&lt;/code> plugin to &lt;code>run&lt;/code> two CLI commands, first being &lt;code>du&lt;/code> and other being &lt;code>readlink&lt;/code>. When installing the app&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ openrun app create ./examples/disk_usage/ /utils/disk_usage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">App audit results /utils/disk_usage : app2WPQHwr5ZpKELqh0TvP5YMSnbab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Plugins :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exec.in
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Permissions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exec.in.run &lt;span class="o">[&lt;/span>du&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exec.in.run &lt;span class="o">[&lt;/span>readlink&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">App created. Permissions need to be approved&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>an audit report is shown with these requests. To approve the requested permissions, the admin can do&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ openrun app approve /utils/disk_usage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">App audit: /utils/disk_usage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Plugins :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exec.in
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Permissions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exec.in.run &lt;span class="o">[&lt;/span>du&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exec.in.run &lt;span class="o">[&lt;/span>readlink&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">App permissions have been approved.&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The approval can be done during the app create itself, in that case the app is installed and approved immediately. None of the plugin code runs during the app creation, even for calls at the global scope. If the audit report does not match expectations, the app can be deleted.&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ openrun app create --approve ./examples/disk_usage/ /utils/disk_usage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">App audit results /utils/disk_usage : app2WPQpws6C1mWb6BujYGOdWMnF1C
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Plugins :
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exec.in
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Permissions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exec.in.run &lt;span class="o">[&lt;/span>du&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> exec.in.run &lt;span class="o">[&lt;/span>readlink&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">App created. Permissions have been approved
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ openrun app delete /utils/disk_usage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">App deleted /utils/disk_usage&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>Once the app is created, if the application code is updated to change &lt;a href="https://github.com/openrundev/openrun/blob/8b8975cea2d650c9f80dab6eb70cc5b2ddbe5c40/examples/disk_usage/app.star#L9" target="_blank" rel="noopener">the line&lt;/a> from&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">exec&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;readlink&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;-f&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">current&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">process_partial&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>to&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">app.star&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ret&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">exec&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;rm&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;-f&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">current&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="n">process_partial&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The app will fail at runtime with an error like&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;pre>&lt;code>app /utils/disk_usage is not permitted to call exec.in.run with argument 0 having value &amp;#34;rm&amp;#34;, expected &amp;#34;readlink&amp;#34;. Update the app or audit and approve permissions&lt;/code>&lt;/pre>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The app cannot be run until either the code change is reverted or the admin approves the new call to rm.&lt;/p></description></item><item><title>Audit Events</title><link>https://openrun.dev/docs/applications/audit/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://openrun.dev/docs/applications/audit/</guid><description>
&lt;p>OpenRun automatically creates audit events for all operations. See &lt;a href="https://audit.demo.clace.io/" target="_blank" rel="noopener">demo&lt;/a> for a demo of events viewing.&lt;/p>
&lt;h2>Introduction&lt;span class="hx:absolute hx:-mt-20" id="introduction">&lt;/span>
&lt;a href="#introduction" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>All operations against the OpenRun server are automatically logged in a database. The default location for this database is &lt;code>$OPENRUN_HOME/metadata/openrun_audit.db&lt;/code>. This can be configured by setting the property&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div class="hextra-code-filename not-prose" dir="auto">openrun.toml&lt;/div>&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-toml" data-lang="toml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="nx">metadata&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nx">audit_db_connection&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s2">&amp;#34;sqlite:$OPENRUN_HOME/metadata/openrun_audit.db&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-8">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The events which are logged are&lt;/p>
&lt;ul>
&lt;li>All HTTP request except GET, HEAD and OPTIONS&lt;/li>
&lt;li>System events, like app updates and any metadata changes&lt;/li>
&lt;li>Action invocations (suggest, validate and exec)&lt;/li>
&lt;li>Custom events, as defined in app code&lt;/li>
&lt;/ul>
&lt;h2>Configuration&lt;span class="hx:absolute hx:-mt-20" id="configuration">&lt;/span>
&lt;a href="#configuration" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>The configurable options related to audit events are:&lt;/p>
&lt;ul>
&lt;li>&lt;code>app_config.audit.redact_url&lt;/code>: Set to true to redact the API path for HTTP events. By default, the API path, except for query string, is logged&lt;/li>
&lt;li>&lt;code>app_config.audit.skip_http_events&lt;/code>: Set to true to skip HTTP event logging&lt;/li>
&lt;/ul>
&lt;p>The app config options can be set globally in the openrun.toml. It can also be set individually for an app by setting the app metadata. For example,&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app update-metadata conf --promote &lt;span class="s1">&amp;#39;audit.redact_url=true&amp;#39;&lt;/span> /myapp&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The retention for audit events is configurable globally. The config settings in &lt;code>openrun.toml&lt;/code> are:&lt;/p>
&lt;ul>
&lt;li>&lt;code>system.http_event_retention_days&lt;/code> : Number of days to retain http events, default 90&lt;/li>
&lt;li>&lt;code>system.non_http_event_retention_days&lt;/code> : Number of days to retain non-http events, default 180&lt;/li>
&lt;/ul>
&lt;h2>Custom Events&lt;span class="hx:absolute hx:-mt-20" id="custom-events">&lt;/span>
&lt;a href="#custom-events" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>HTTP, System and Action events are generated automatically. Apps can also define custom events. To add a custom event, in a handler function, add a call to &lt;code>ace.audit&lt;/code>. The parameters for &lt;code>ace.audit&lt;/code> are:&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align: center">Property&lt;/th>
&lt;th style="text-align: center">Optional&lt;/th>
&lt;th style="text-align: center">Type&lt;/th>
&lt;th style="text-align: center">Default&lt;/th>
&lt;th style="text-align: center">Notes&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align: center">operation&lt;/td>
&lt;td style="text-align: center">false&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The operation type to log&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">target&lt;/td>
&lt;td style="text-align: center">false&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">The target the operation is being done on&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align: center">detail&lt;/td>
&lt;td style="text-align: center">true&lt;/td>
&lt;td style="text-align: center">string&lt;/td>
&lt;td style="text-align: center">&lt;/td>
&lt;td style="text-align: center">Detailed info about the event&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>For example, the dictionary app &lt;a href="https://github.com/openrundev/apps/blob/4e7722235b62c1d22308dc55ce8b65c812354177/misc/dictionary/app.star#L18" target="_blank" rel="noopener">does&lt;/a>:&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ace&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">audit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;word_lookup&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">args&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">word&lt;/span>&lt;span class="p">)&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>This will enable &lt;a href="https://audit.demo.clace.io/?operation=word_lookup" target="_blank" rel="noopener">searching&lt;/a> the audit events (using the Viewer app) for all operation of type &amp;ldquo;word_lookup&amp;rdquo;.&lt;/p>
&lt;p>Only the last call to &lt;code>ace.audit&lt;/code> from a handler function is logged.&lt;/p>
&lt;h2>Event Viewer&lt;span class="hx:absolute hx:-mt-20" id="event-viewer">&lt;/span>
&lt;a href="#event-viewer" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>Events can be viewed by admin using the Event Viewer app &lt;a href="https://github.com/openrundev/apps/tree/main/openrun/audit_viewer" target="_blank" rel="noopener">code&lt;/a>: &lt;a href="https://audit.demo.clace.io/" target="_blank" rel="noopener">demo&lt;/a>. To install the app on your instance, run&lt;/p>
&lt;div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">
&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">openrun app create --approve github.com/openrundev/apps/openrun/audit_viewer /events&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
&lt;button
class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
title="Copy code"
>
&lt;div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>The event viewer shows events for all apps. This app can be installed with access by admins only.&lt;/p></description></item></channel></rss>